{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/schools.ts"],"sourcesContent":["import { pgTable, uuid, varchar, jsonb, timestamp, boolean } from 'drizzle-orm/pg-core';\n\nexport interface SchoolConfig {\n  internshipDays: number;\n  requireMinTwoCompanies: boolean;\n  modules: {\n    expectations: boolean;\n    observations: boolean;\n    portfolio: boolean;\n    grading: boolean;\n  };\n  notifications: {\n    enabled: boolean;\n    reminderDaysBefore: number[];\n    escalationDaysAfter: number;\n  };\n  assessmentQuestions?: AssessmentQuestion[];\n  milestoneTemplates?: MilestoneTemplate[];\n}\n\nexport interface AssessmentQuestion {\n  id: string;\n  category: string;\n  question: string;\n  type: 'likert' | 'text' | 'boolean';\n  required: boolean;\n}\n\nexport interface MilestoneTemplate {\n  id: string;\n  type: string;\n  title: string;\n  description?: string;\n  phase: 'preparation' | 'execution' | 'followup';\n  defaultDaysOffset: number;\n  required: boolean;\n}\n\nexport interface SmtpConfig {\n  host: string;\n  port: number;\n  user: string;\n  password: string;\n  from: string;\n}\n\nexport const schools = pgTable('schools', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  name: varchar('name', { length: 255 }).notNull(),\n  slug: varchar('slug', { length: 100 }).notNull().unique(),\n\n  config: jsonb('config').$type<SchoolConfig>().default({\n    internshipDays: 15,\n    requireMinTwoCompanies: true,\n    modules: {\n      expectations: true,\n      observations: false,\n      portfolio: true,\n      grading: true,\n    },\n    notifications: {\n      enabled: true,\n      reminderDaysBefore: [7, 2],\n      escalationDaysAfter: 1,\n    },\n  }),\n\n  address: varchar('address', { length: 500 }),\n  email: varchar('email', { length: 255 }),\n  phone: varchar('phone', { length: 50 }),\n  website: varchar('website', { length: 255 }),\n  logoUrl: varchar('logo_url', { length: 500 }),\n\n  emailProvider: varchar('email_provider', { length: 20 }).default('resend'),\n  smtpConfig: jsonb('smtp_config').$type<SmtpConfig>(),\n\n  isActive: boolean('is_active').default(true),\n  createdAt: timestamp('created_at').defaultNow(),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA8CO,MAAM,UAAU,IAAA,kKAAO,EAAC,WAAW;IACxC,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC9C,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI,GAAG,OAAO,GAAG,MAAM;IAEvD,QAAQ,IAAA,2KAAK,EAAC,UAAU,KAAK,GAAiB,OAAO,CAAC;QACpD,gBAAgB;QAChB,wBAAwB;QACxB,SAAS;YACP,cAAc;YACd,cAAc;YACd,WAAW;YACX,SAAS;QACX;QACA,eAAe;YACb,SAAS;YACT,oBAAoB;gBAAC;gBAAG;aAAE;YAC1B,qBAAqB;QACvB;IACF;IAEA,SAAS,IAAA,+KAAO,EAAC,WAAW;QAAE,QAAQ;IAAI;IAC1C,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI;IACtC,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAG;IACrC,SAAS,IAAA,+KAAO,EAAC,WAAW;QAAE,QAAQ;IAAI;IAC1C,SAAS,IAAA,+KAAO,EAAC,YAAY;QAAE,QAAQ;IAAI;IAE3C,eAAe,IAAA,+KAAO,EAAC,kBAAkB;QAAE,QAAQ;IAAG,GAAG,OAAO,CAAC;IACjE,YAAY,IAAA,2KAAK,EAAC,eAAe,KAAK;IAEtC,UAAU,IAAA,+KAAO,EAAC,aAAa,OAAO,CAAC;IACvC,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;IAC7C,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/users.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp, boolean, pgEnum, text } from 'drizzle-orm/pg-core';\nimport { schools } from './schools';\n\nexport const userRoleEnum = pgEnum('user_role', [\n  'super_admin',\n  'school_admin',\n  'teacher',\n  'student',\n  'company_user',\n]);\n\nexport type UserRole = 'super_admin' | 'school_admin' | 'teacher' | 'student' | 'company_user';\n\n/**\n * Users table - compatible with Better Auth\n *\n * Better Auth required fields: id, name, email, emailVerified, image, createdAt, updatedAt\n * Custom fields: schoolId, role, firstName, lastName, username, displayUsername, isActive, lastLoginAt\n */\nexport const users = pgTable('users', {\n  // Better Auth required fields\n  id: uuid('id').primaryKey().defaultRandom(),\n  name: varchar('name', { length: 255 }).notNull(),\n  email: varchar('email', { length: 255 }).notNull(),\n  emailVerified: boolean('email_verified').default(false),\n  image: varchar('image', { length: 500 }),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n\n  // Username plugin fields\n  username: varchar('username', { length: 100 }).unique(),\n  displayUsername: varchar('display_username', { length: 100 }),\n\n  // Custom fields for our app\n  schoolId: uuid('school_id').references(() => schools.id),\n  firstName: varchar('first_name', { length: 100 }).notNull(),\n  lastName: varchar('last_name', { length: 100 }).notNull(),\n  role: userRoleEnum('role').notNull().default('student'),\n  isActive: boolean('is_active').default(true),\n  lastLoginAt: timestamp('last_login_at'),\n});\n\n/**\n * Sessions table - compatible with Better Auth\n * Note: Better Auth generates string IDs, not UUIDs\n */\nexport const sessions = pgTable('sessions', {\n  id: text('id').primaryKey(),\n  userId: uuid('user_id').notNull().references(() => users.id, { onDelete: 'cascade' }),\n  token: varchar('token', { length: 255 }).notNull().unique(),\n  expiresAt: timestamp('expires_at').notNull(),\n  ipAddress: varchar('ip_address', { length: 45 }),\n  userAgent: text('user_agent'),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n});\n\n/**\n * Accounts table - Better Auth uses this for OAuth providers and credentials\n */\nexport const accounts = pgTable('accounts', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  userId: uuid('user_id').notNull().references(() => users.id, { onDelete: 'cascade' }),\n  accountId: varchar('account_id', { length: 255 }).notNull(),\n  providerId: varchar('provider_id', { length: 255 }).notNull(),\n  accessToken: text('access_token'),\n  refreshToken: text('refresh_token'),\n  accessTokenExpiresAt: timestamp('access_token_expires_at'),\n  refreshTokenExpiresAt: timestamp('refresh_token_expires_at'),\n  scope: varchar('scope', { length: 500 }),\n  idToken: text('id_token'),\n  password: varchar('password', { length: 255 }),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n});\n\n/**\n * Verifications table - Better Auth uses this for email verification, password reset, etc.\n */\nexport const verifications = pgTable('verifications', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  identifier: varchar('identifier', { length: 255 }).notNull(),\n  value: varchar('value', { length: 255 }).notNull(),\n  expiresAt: timestamp('expires_at').notNull(),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n});\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEO,MAAM,eAAe,IAAA,2KAAM,EAAC,aAAa;IAC9C;IACA;IACA;IACA;IACA;CACD;AAUM,MAAM,QAAQ,IAAA,kKAAO,EAAC,SAAS;IACpC,8BAA8B;IAC9B,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC9C,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI,GAAG,OAAO;IAChD,eAAe,IAAA,+KAAO,EAAC,kBAAkB,OAAO,CAAC;IACjD,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI;IACtC,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IAEvD,yBAAyB;IACzB,UAAU,IAAA,+KAAO,EAAC,YAAY;QAAE,QAAQ;IAAI,GAAG,MAAM;IACrD,iBAAiB,IAAA,+KAAO,EAAC,oBAAoB;QAAE,QAAQ;IAAI;IAE3D,4BAA4B;IAC5B,UAAU,IAAA,yKAAI,EAAC,aAAa,UAAU,CAAC,IAAM,kJAAO,CAAC,EAAE;IACvD,WAAW,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAI,GAAG,OAAO;IACzD,UAAU,IAAA,+KAAO,EAAC,aAAa;QAAE,QAAQ;IAAI,GAAG,OAAO;IACvD,MAAM,aAAa,QAAQ,OAAO,GAAG,OAAO,CAAC;IAC7C,UAAU,IAAA,+KAAO,EAAC,aAAa,OAAO,CAAC;IACvC,aAAa,IAAA,mLAAS,EAAC;AACzB;AAMO,MAAM,WAAW,IAAA,kKAAO,EAAC,YAAY;IAC1C,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU;IACzB,QAAQ,IAAA,yKAAI,EAAC,WAAW,OAAO,GAAG,UAAU,CAAC,IAAM,MAAM,EAAE,EAAE;QAAE,UAAU;IAAU;IACnF,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI,GAAG,OAAO,GAAG,MAAM;IACzD,WAAW,IAAA,mLAAS,EAAC,cAAc,OAAO;IAC1C,WAAW,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAG;IAC9C,WAAW,IAAA,yKAAI,EAAC;IAChB,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AACzD;AAKO,MAAM,WAAW,IAAA,kKAAO,EAAC,YAAY;IAC1C,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,QAAQ,IAAA,yKAAI,EAAC,WAAW,OAAO,GAAG,UAAU,CAAC,IAAM,MAAM,EAAE,EAAE;QAAE,UAAU;IAAU;IACnF,WAAW,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAI,GAAG,OAAO;IACzD,YAAY,IAAA,+KAAO,EAAC,eAAe;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC3D,aAAa,IAAA,yKAAI,EAAC;IAClB,cAAc,IAAA,yKAAI,EAAC;IACnB,sBAAsB,IAAA,mLAAS,EAAC;IAChC,uBAAuB,IAAA,mLAAS,EAAC;IACjC,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI;IACtC,SAAS,IAAA,yKAAI,EAAC;IACd,UAAU,IAAA,+KAAO,EAAC,YAAY;QAAE,QAAQ;IAAI;IAC5C,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AACzD;AAKO,MAAM,gBAAgB,IAAA,kKAAO,EAAC,iBAAiB;IACpD,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,YAAY,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC1D,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI,GAAG,OAAO;IAChD,WAAW,IAAA,mLAAS,EAAC,cAAc,OAAO;IAC1C,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AACzD"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/students.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp } from 'drizzle-orm/pg-core';\nimport { users } from './users';\nimport { schools } from './schools';\n\nexport const students = pgTable('students', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  userId: uuid('user_id').notNull().references(() => users.id),\n  schoolId: uuid('school_id').notNull().references(() => schools.id),\n\n  classYear: varchar('class_year', { length: 20 }),\n  schoolYear: varchar('school_year', { length: 10 }),\n\n  primaryTeacherId: uuid('primary_teacher_id').references(() => users.id),\n\n  createdAt: timestamp('created_at').defaultNow(),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n\nexport const studentTeachers = pgTable('student_teachers', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  studentId: uuid('student_id').notNull().references(() => students.id),\n  teacherId: uuid('teacher_id').notNull().references(() => users.id),\n  role: varchar('role', { length: 50 }),\n  assignedAt: timestamp('assigned_at').defaultNow(),\n});\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;AAEO,MAAM,WAAW,IAAA,kKAAO,EAAC,YAAY;IAC1C,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,QAAQ,IAAA,yKAAI,EAAC,WAAW,OAAO,GAAG,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IAC3D,UAAU,IAAA,yKAAI,EAAC,aAAa,OAAO,GAAG,UAAU,CAAC,IAAM,kJAAO,CAAC,EAAE;IAEjE,WAAW,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAG;IAC9C,YAAY,IAAA,+KAAO,EAAC,eAAe;QAAE,QAAQ;IAAG;IAEhD,kBAAkB,IAAA,yKAAI,EAAC,sBAAsB,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IAEtE,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;IAC7C,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C;AAEO,MAAM,kBAAkB,IAAA,kKAAO,EAAC,oBAAoB;IACzD,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,WAAW,IAAA,yKAAI,EAAC,cAAc,OAAO,GAAG,UAAU,CAAC,IAAM,SAAS,EAAE;IACpE,WAAW,IAAA,yKAAI,EAAC,cAAc,OAAO,GAAG,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IACjE,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAG;IACnC,YAAY,IAAA,mLAAS,EAAC,eAAe,UAAU;AACjD"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/companies.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp, boolean, integer, decimal, text } from 'drizzle-orm/pg-core';\nimport { schools } from './schools';\nimport { users } from './users';\n\nexport const companies = pgTable('companies', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  schoolId: uuid('school_id').notNull().references(() => schools.id),\n\n  name: varchar('name', { length: 255 }).notNull(),\n  industry: varchar('industry', { length: 100 }),\n\n  street: varchar('street', { length: 255 }),\n  zip: varchar('zip', { length: 10 }),\n  city: varchar('city', { length: 100 }),\n\n  latitude: decimal('latitude', { precision: 10, scale: 7 }),\n  longitude: decimal('longitude', { precision: 10, scale: 7 }),\n\n  phone: varchar('phone', { length: 50 }),\n  email: varchar('email', { length: 255 }),\n  website: varchar('website', { length: 255 }),\n\n  inPool: boolean('in_pool').default(false),\n  poolOptInAt: timestamp('pool_opt_in_at'),\n\n  totalInternships: integer('total_internships').default(0),\n\n  createdAt: timestamp('created_at').defaultNow(),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n\nexport const companyContacts = pgTable('company_contacts', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  companyId: uuid('company_id').notNull().references(() => companies.id),\n  userId: uuid('user_id').references(() => users.id),\n\n  firstName: varchar('first_name', { length: 100 }).notNull(),\n  lastName: varchar('last_name', { length: 100 }).notNull(),\n  position: varchar('position', { length: 100 }),\n  phone: varchar('phone', { length: 50 }),\n  email: varchar('email', { length: 255 }),\n\n  isPrimary: boolean('is_primary').default(false),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n\nexport const companyReviews = pgTable('company_reviews', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  companyId: uuid('company_id').notNull().references(() => companies.id),\n  internshipId: uuid('internship_id').notNull(),\n\n  wouldRecommend: boolean('would_recommend'),\n  supervisionRating: integer('supervision_rating'),\n  learningRating: integer('learning_rating'),\n  atmosphereRating: integer('atmosphere_rating'),\n  comment: text('comment'),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;AAEO,MAAM,YAAY,IAAA,kKAAO,EAAC,aAAa;IAC5C,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,UAAU,IAAA,yKAAI,EAAC,aAAa,OAAO,GAAG,UAAU,CAAC,IAAM,kJAAO,CAAC,EAAE;IAEjE,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI,GAAG,OAAO;IAC9C,UAAU,IAAA,+KAAO,EAAC,YAAY;QAAE,QAAQ;IAAI;IAE5C,QAAQ,IAAA,+KAAO,EAAC,UAAU;QAAE,QAAQ;IAAI;IACxC,KAAK,IAAA,+KAAO,EAAC,OAAO;QAAE,QAAQ;IAAG;IACjC,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAI;IAEpC,UAAU,IAAA,+KAAO,EAAC,YAAY;QAAE,WAAW;QAAI,OAAO;IAAE;IACxD,WAAW,IAAA,+KAAO,EAAC,aAAa;QAAE,WAAW;QAAI,OAAO;IAAE;IAE1D,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAG;IACrC,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI;IACtC,SAAS,IAAA,+KAAO,EAAC,WAAW;QAAE,QAAQ;IAAI;IAE1C,QAAQ,IAAA,+KAAO,EAAC,WAAW,OAAO,CAAC;IACnC,aAAa,IAAA,mLAAS,EAAC;IAEvB,kBAAkB,IAAA,+KAAO,EAAC,qBAAqB,OAAO,CAAC;IAEvD,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;IAC7C,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C;AAEO,MAAM,kBAAkB,IAAA,kKAAO,EAAC,oBAAoB;IACzD,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,WAAW,IAAA,yKAAI,EAAC,cAAc,OAAO,GAAG,UAAU,CAAC,IAAM,UAAU,EAAE;IACrE,QAAQ,IAAA,yKAAI,EAAC,WAAW,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IAEjD,WAAW,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAI,GAAG,OAAO;IACzD,UAAU,IAAA,+KAAO,EAAC,aAAa;QAAE,QAAQ;IAAI,GAAG,OAAO;IACvD,UAAU,IAAA,+KAAO,EAAC,YAAY;QAAE,QAAQ;IAAI;IAC5C,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAG;IACrC,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI;IAEtC,WAAW,IAAA,+KAAO,EAAC,cAAc,OAAO,CAAC;IAEzC,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C;AAEO,MAAM,iBAAiB,IAAA,kKAAO,EAAC,mBAAmB;IACvD,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,WAAW,IAAA,yKAAI,EAAC,cAAc,OAAO,GAAG,UAAU,CAAC,IAAM,UAAU,EAAE;IACrE,cAAc,IAAA,yKAAI,EAAC,iBAAiB,OAAO;IAE3C,gBAAgB,IAAA,+KAAO,EAAC;IACxB,mBAAmB,IAAA,+KAAO,EAAC;IAC3B,gBAAgB,IAAA,+KAAO,EAAC;IACxB,kBAAkB,IAAA,+KAAO,EAAC;IAC1B,SAAS,IAAA,yKAAI,EAAC;IAEd,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C"}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/internships.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp, boolean, integer, date, time, text, pgEnum } from 'drizzle-orm/pg-core';\nimport { students } from './students';\nimport { schools } from './schools';\nimport { users } from './users';\nimport { companies, companyContacts } from './companies';\n\nexport const internshipStatusEnum = pgEnum('internship_status', [\n  'draft',\n  'searching',\n  'confirmed',\n  'in_progress',\n  'completed',\n  'incomplete',\n]);\n\nexport type InternshipStatus = 'draft' | 'searching' | 'confirmed' | 'in_progress' | 'completed' | 'incomplete';\n\nexport const internships = pgTable('internships', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  studentId: uuid('student_id').notNull().references(() => students.id),\n  schoolId: uuid('school_id').notNull().references(() => schools.id),\n\n  requiredDays: integer('required_days').notNull(),\n\n  status: internshipStatusEnum('status').default('draft'),\n\n  completedDays: integer('completed_days').default(0),\n  missedDays: integer('missed_days').default(0),\n\n  finalGrade: varchar('final_grade', { length: 10 }),\n  gradedAt: timestamp('graded_at'),\n  gradedBy: uuid('graded_by').references(() => users.id),\n\n  certificateGeneratedAt: timestamp('certificate_generated_at'),\n  certificateUrl: varchar('certificate_url', { length: 500 }),\n\n  createdAt: timestamp('created_at').defaultNow(),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n\nexport const internshipBlocks = pgTable('internship_blocks', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  internshipId: uuid('internship_id').notNull().references(() => internships.id),\n  companyId: uuid('company_id').notNull().references(() => companies.id),\n  contactId: uuid('contact_id').references(() => companyContacts.id),\n\n  startDate: date('start_date').notNull(),\n  endDate: date('end_date').notNull(),\n  plannedDays: integer('planned_days').notNull(),\n\n  contractStatus: varchar('contract_status', { length: 20 }).default('pending'),\n  contractUrl: varchar('contract_url', { length: 500 }),\n  signedContractUrl: varchar('signed_contract_url', { length: 500 }),\n\n  visitScheduledAt: timestamp('visit_scheduled_at'),\n  visitCompletedAt: timestamp('visit_completed_at'),\n  visitNotes: text('visit_notes'),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n\nexport const timeEntries = pgTable('time_entries', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  blockId: uuid('block_id').notNull().references(() => internshipBlocks.id),\n\n  date: date('date').notNull(),\n\n  studentConfirmed: boolean('student_confirmed').default(false),\n  studentConfirmedAt: timestamp('student_confirmed_at'),\n  companyConfirmed: boolean('company_confirmed').default(false),\n  companyConfirmedAt: timestamp('company_confirmed_at'),\n\n  checkInTime: time('check_in_time'),\n  checkOutTime: time('check_out_time'),\n\n  notes: text('notes'),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n\nexport const sickLeaves = pgTable('sick_leaves', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  blockId: uuid('block_id').notNull().references(() => internshipBlocks.id),\n\n  startDate: date('start_date').notNull(),\n  endDate: date('end_date').notNull(),\n  days: integer('days').notNull(),\n\n  hasAttest: boolean('has_attest').default(false),\n  attestUrl: varchar('attest_url', { length: 500 }),\n  attestUploadedAt: timestamp('attest_uploaded_at'),\n\n  makeUpRequired: boolean('make_up_required').default(true),\n  madeUpDays: integer('made_up_days').default(0),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n\nexport const reports = pgTable('reports', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  blockId: uuid('block_id').notNull().references(() => internshipBlocks.id),\n\n  reportDate: date('report_date').notNull(),\n  reportType: varchar('report_type', { length: 10 }).default('daily'),\n\n  content: text('content').notNull(),\n\n  companyApproved: boolean('company_approved').default(false),\n  companyApprovedAt: timestamp('company_approved_at'),\n  teacherReviewed: boolean('teacher_reviewed').default(false),\n  teacherComment: text('teacher_comment'),\n\n  createdAt: timestamp('created_at').defaultNow(),\n  updatedAt: timestamp('updated_at').defaultNow(),\n});\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 537, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/milestones.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp, boolean, date, text, jsonb } from 'drizzle-orm/pg-core';\nimport { internships } from './internships';\n\nexport const milestones = pgTable('milestones', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  internshipId: uuid('internship_id').notNull().references(() => internships.id),\n\n  type: varchar('type', { length: 50 }).notNull(),\n  title: varchar('title', { length: 255 }).notNull(),\n  description: text('description'),\n\n  dueDate: date('due_date'),\n\n  isCompleted: boolean('is_completed').default(false),\n  completedAt: timestamp('completed_at'),\n\n  documentIds: jsonb('document_ids').$type<string[]>().default([]),\n  remindersSent: jsonb('reminders_sent').$type<string[]>().default([]),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEO,MAAM,aAAa,IAAA,kKAAO,EAAC,cAAc;IAC9C,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,cAAc,IAAA,yKAAI,EAAC,iBAAiB,OAAO,GAAG,UAAU,CAAC,IAAM,0JAAW,CAAC,EAAE;IAE7E,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAG,GAAG,OAAO;IAC7C,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI,GAAG,OAAO;IAChD,aAAa,IAAA,yKAAI,EAAC;IAElB,SAAS,IAAA,yKAAI,EAAC;IAEd,aAAa,IAAA,+KAAO,EAAC,gBAAgB,OAAO,CAAC;IAC7C,aAAa,IAAA,mLAAS,EAAC;IAEvB,aAAa,IAAA,2KAAK,EAAC,gBAAgB,KAAK,GAAa,OAAO,CAAC,EAAE;IAC/D,eAAe,IAAA,2KAAK,EAAC,kBAAkB,KAAK,GAAa,OAAO,CAAC,EAAE;IAEnE,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C"}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/assessments.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp, text, jsonb } from 'drizzle-orm/pg-core';\nimport { internships, internshipBlocks } from './internships';\nimport { users } from './users';\n\nexport const assessments = pgTable('assessments', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  internshipId: uuid('internship_id').notNull().references(() => internships.id),\n  blockId: uuid('block_id').references(() => internshipBlocks.id),\n\n  assessorType: varchar('assessor_type', { length: 20 }).notNull(),\n  assessorId: uuid('assessor_id').references(() => users.id),\n\n  ratings: jsonb('ratings').$type<Record<string, number>>().notNull(),\n\n  strengths: text('strengths'),\n  improvements: text('improvements'),\n  comments: text('comments'),\n\n  wouldRecommend: varchar('would_recommend', { length: 20 }),\n\n  submittedAt: timestamp('submitted_at').defaultNow(),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;AAEO,MAAM,cAAc,IAAA,kKAAO,EAAC,eAAe;IAChD,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,cAAc,IAAA,yKAAI,EAAC,iBAAiB,OAAO,GAAG,UAAU,CAAC,IAAM,0JAAW,CAAC,EAAE;IAC7E,SAAS,IAAA,yKAAI,EAAC,YAAY,UAAU,CAAC,IAAM,+JAAgB,CAAC,EAAE;IAE9D,cAAc,IAAA,+KAAO,EAAC,iBAAiB;QAAE,QAAQ;IAAG,GAAG,OAAO;IAC9D,YAAY,IAAA,yKAAI,EAAC,eAAe,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IAEzD,SAAS,IAAA,2KAAK,EAAC,WAAW,KAAK,GAA2B,OAAO;IAEjE,WAAW,IAAA,yKAAI,EAAC;IAChB,cAAc,IAAA,yKAAI,EAAC;IACnB,UAAU,IAAA,yKAAI,EAAC;IAEf,gBAAgB,IAAA,+KAAO,EAAC,mBAAmB;QAAE,QAAQ;IAAG;IAExD,aAAa,IAAA,mLAAS,EAAC,gBAAgB,UAAU;AACnD"}},
    {"offset": {"line": 609, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/documents.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp, integer } from 'drizzle-orm/pg-core';\nimport { schools } from './schools';\nimport { internships, internshipBlocks } from './internships';\nimport { students } from './students';\nimport { users } from './users';\n\nexport const documents = pgTable('documents', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  schoolId: uuid('school_id').notNull().references(() => schools.id),\n\n  internshipId: uuid('internship_id').references(() => internships.id),\n  blockId: uuid('block_id').references(() => internshipBlocks.id),\n  studentId: uuid('student_id').references(() => students.id),\n\n  type: varchar('type', { length: 50 }).notNull(),\n\n  fileName: varchar('file_name', { length: 255 }).notNull(),\n  fileSize: integer('file_size'),\n  mimeType: varchar('mime_type', { length: 100 }),\n  storageUrl: varchar('storage_url', { length: 500 }).notNull(),\n\n  uploadedBy: uuid('uploaded_by').references(() => users.id),\n  createdAt: timestamp('created_at').defaultNow(),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,MAAM,YAAY,IAAA,kKAAO,EAAC,aAAa;IAC5C,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,UAAU,IAAA,yKAAI,EAAC,aAAa,OAAO,GAAG,UAAU,CAAC,IAAM,kJAAO,CAAC,EAAE;IAEjE,cAAc,IAAA,yKAAI,EAAC,iBAAiB,UAAU,CAAC,IAAM,0JAAW,CAAC,EAAE;IACnE,SAAS,IAAA,yKAAI,EAAC,YAAY,UAAU,CAAC,IAAM,+JAAgB,CAAC,EAAE;IAC9D,WAAW,IAAA,yKAAI,EAAC,cAAc,UAAU,CAAC,IAAM,oJAAQ,CAAC,EAAE;IAE1D,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAG,GAAG,OAAO;IAE7C,UAAU,IAAA,+KAAO,EAAC,aAAa;QAAE,QAAQ;IAAI,GAAG,OAAO;IACvD,UAAU,IAAA,+KAAO,EAAC;IAClB,UAAU,IAAA,+KAAO,EAAC,aAAa;QAAE,QAAQ;IAAI;IAC7C,YAAY,IAAA,+KAAO,EAAC,eAAe;QAAE,QAAQ;IAAI,GAAG,OAAO;IAE3D,YAAY,IAAA,yKAAI,EAAC,eAAe,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IACzD,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C"}},
    {"offset": {"line": 653, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/notifications.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp, boolean, text } from 'drizzle-orm/pg-core';\nimport { users } from './users';\n\nexport const notifications = pgTable('notifications', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  userId: uuid('user_id').notNull().references(() => users.id),\n\n  type: varchar('type', { length: 50 }).notNull(),\n  title: varchar('title', { length: 255 }).notNull(),\n  message: text('message'),\n\n  relatedType: varchar('related_type', { length: 50 }),\n  relatedId: uuid('related_id'),\n\n  isRead: boolean('is_read').default(false),\n  readAt: timestamp('read_at'),\n\n  pushSentAt: timestamp('push_sent_at'),\n  emailSentAt: timestamp('email_sent_at'),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n\nexport const pushSubscriptions = pgTable('push_subscriptions', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  userId: uuid('user_id').notNull().references(() => users.id),\n\n  endpoint: text('endpoint').notNull(),\n  p256dh: text('p256dh').notNull(),\n  auth: text('auth').notNull(),\n\n  userAgent: varchar('user_agent', { length: 500 }),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEO,MAAM,gBAAgB,IAAA,kKAAO,EAAC,iBAAiB;IACpD,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,QAAQ,IAAA,yKAAI,EAAC,WAAW,OAAO,GAAG,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IAE3D,MAAM,IAAA,+KAAO,EAAC,QAAQ;QAAE,QAAQ;IAAG,GAAG,OAAO;IAC7C,OAAO,IAAA,+KAAO,EAAC,SAAS;QAAE,QAAQ;IAAI,GAAG,OAAO;IAChD,SAAS,IAAA,yKAAI,EAAC;IAEd,aAAa,IAAA,+KAAO,EAAC,gBAAgB;QAAE,QAAQ;IAAG;IAClD,WAAW,IAAA,yKAAI,EAAC;IAEhB,QAAQ,IAAA,+KAAO,EAAC,WAAW,OAAO,CAAC;IACnC,QAAQ,IAAA,mLAAS,EAAC;IAElB,YAAY,IAAA,mLAAS,EAAC;IACtB,aAAa,IAAA,mLAAS,EAAC;IAEvB,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C;AAEO,MAAM,oBAAoB,IAAA,kKAAO,EAAC,sBAAsB;IAC7D,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,QAAQ,IAAA,yKAAI,EAAC,WAAW,OAAO,GAAG,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IAE3D,UAAU,IAAA,yKAAI,EAAC,YAAY,OAAO;IAClC,QAAQ,IAAA,yKAAI,EAAC,UAAU,OAAO;IAC9B,MAAM,IAAA,yKAAI,EAAC,QAAQ,OAAO;IAE1B,WAAW,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAI;IAE/C,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C"}},
    {"offset": {"line": 703, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/audit-logs.ts"],"sourcesContent":["import { pgTable, uuid, varchar, timestamp, jsonb } from 'drizzle-orm/pg-core';\nimport { schools } from './schools';\nimport { users } from './users';\n\nexport const auditLogs = pgTable('audit_logs', {\n  id: uuid('id').primaryKey().defaultRandom(),\n  schoolId: uuid('school_id').references(() => schools.id),\n  userId: uuid('user_id').references(() => users.id),\n\n  action: varchar('action', { length: 20 }).notNull(),\n\n  entityType: varchar('entity_type', { length: 50 }).notNull(),\n  entityId: uuid('entity_id').notNull(),\n\n  oldValues: jsonb('old_values'),\n  newValues: jsonb('new_values'),\n\n  ipAddress: varchar('ip_address', { length: 45 }),\n  userAgent: varchar('user_agent', { length: 500 }),\n\n  createdAt: timestamp('created_at').defaultNow(),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;AAEO,MAAM,YAAY,IAAA,kKAAO,EAAC,cAAc;IAC7C,IAAI,IAAA,yKAAI,EAAC,MAAM,UAAU,GAAG,aAAa;IACzC,UAAU,IAAA,yKAAI,EAAC,aAAa,UAAU,CAAC,IAAM,kJAAO,CAAC,EAAE;IACvD,QAAQ,IAAA,yKAAI,EAAC,WAAW,UAAU,CAAC,IAAM,8IAAK,CAAC,EAAE;IAEjD,QAAQ,IAAA,+KAAO,EAAC,UAAU;QAAE,QAAQ;IAAG,GAAG,OAAO;IAEjD,YAAY,IAAA,+KAAO,EAAC,eAAe;QAAE,QAAQ;IAAG,GAAG,OAAO;IAC1D,UAAU,IAAA,yKAAI,EAAC,aAAa,OAAO;IAEnC,WAAW,IAAA,2KAAK,EAAC;IACjB,WAAW,IAAA,2KAAK,EAAC;IAEjB,WAAW,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAG;IAC9C,WAAW,IAAA,+KAAO,EAAC,cAAc;QAAE,QAAQ;IAAI;IAE/C,WAAW,IAAA,mLAAS,EAAC,cAAc,UAAU;AAC/C"}},
    {"offset": {"line": 742, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/schema/index.ts"],"sourcesContent":["export * from './schools';\nexport * from './users';\nexport * from './students';\nexport * from './companies';\nexport * from './internships';\nexport * from './milestones';\nexport * from './assessments';\nexport * from './documents';\nexport * from './notifications';\nexport * from './audit-logs';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 830, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/db/index.ts"],"sourcesContent":["import { drizzle } from 'drizzle-orm/postgres-js';\nimport postgres from 'postgres';\nimport * as schema from './schema';\n\nconst connectionString = process.env.DATABASE_URL!;\n\nconst client = postgres(connectionString);\nexport const db = drizzle(client, { schema });\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;;;;AAEA,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;AAEjD,MAAM,SAAS,IAAA,qJAAQ,EAAC;AACjB,MAAM,KAAK,IAAA,uKAAO,EAAC,QAAQ;IAAE,QAAA;AAAO"}},
    {"offset": {"line": 850, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/lib/auth/index.ts"],"sourcesContent":["import { betterAuth } from 'better-auth';\nimport { drizzleAdapter } from 'better-auth/adapters/drizzle';\nimport { username } from 'better-auth/plugins';\nimport { db } from '@/lib/db';\nimport * as schema from '@/lib/db/schema';\n\nexport const auth = betterAuth({\n  database: drizzleAdapter(db, {\n    provider: 'pg',\n    usePlural: true,\n    schema: {\n      ...schema,\n      user: schema.users,\n      session: schema.sessions,\n      account: schema.accounts,\n      verification: schema.verifications,\n    },\n  }),\n\n  emailAndPassword: {\n    enabled: true,\n    requireEmailVerification: false,\n  },\n\n  plugins: [\n    username({\n      minUsernameLength: 3,\n      maxUsernameLength: 30,\n    }),\n  ],\n\n  session: {\n    cookieCache: {\n      enabled: true,\n      maxAge: 60 * 5, // 5 minutes\n    },\n    expiresIn: 60 * 60 * 24 * 7, // 7 days\n    updateAge: 60 * 60 * 24, // 1 day\n  },\n\n  user: {\n    additionalFields: {\n      schoolId: {\n        type: 'string',\n        required: false,\n      },\n      role: {\n        type: 'string',\n        required: true,\n        defaultValue: 'student',\n      },\n      firstName: {\n        type: 'string',\n        required: true,\n      },\n      lastName: {\n        type: 'string',\n        required: true,\n      },\n      isActive: {\n        type: 'boolean',\n        required: false,\n        defaultValue: true,\n      },\n      lastLoginAt: {\n        type: 'date',\n        required: false,\n      },\n    },\n  },\n\n  trustedOrigins: [\n    process.env.BETTER_AUTH_URL || 'http://localhost:3000',\n  ],\n});\n\nexport type Session = typeof auth.$Infer.Session;\nexport type User = typeof auth.$Infer.Session.user;\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;;;;;;AAEO,MAAM,OAAO,IAAA,8MAAU,EAAC;IAC7B,UAAU,IAAA,sMAAc,EAAC,iIAAE,EAAE;QAC3B,UAAU;QACV,WAAW;QACX,QAAQ;YACN,GAAG,qIAAM;YACT,MAAM,sIAAO,KAAK;YAClB,SAAS,sIAAO,QAAQ;YACxB,SAAS,sIAAO,QAAQ;YACxB,cAAc,sIAAO,aAAa;QACpC;IACF;IAEA,kBAAkB;QAChB,SAAS;QACT,0BAA0B;IAC5B;IAEA,SAAS;QACP,IAAA,8MAAQ,EAAC;YACP,mBAAmB;YACnB,mBAAmB;QACrB;KACD;IAED,SAAS;QACP,aAAa;YACX,SAAS;YACT,QAAQ,KAAK;QACf;QACA,WAAW,KAAK,KAAK,KAAK;QAC1B,WAAW,KAAK,KAAK;IACvB;IAEA,MAAM;QACJ,kBAAkB;YAChB,UAAU;gBACR,MAAM;gBACN,UAAU;YACZ;YACA,MAAM;gBACJ,MAAM;gBACN,UAAU;gBACV,cAAc;YAChB;YACA,WAAW;gBACT,MAAM;gBACN,UAAU;YACZ;YACA,UAAU;gBACR,MAAM;gBACN,UAAU;YACZ;YACA,UAAU;gBACR,MAAM;gBACN,UAAU;gBACV,cAAc;YAChB;YACA,aAAa;gBACX,MAAM;gBACN,UAAU;YACZ;QACF;IACF;IAEA,gBAAgB;QACd,QAAQ,GAAG,CAAC,eAAe,IAAI;KAChC;AACH"}},
    {"offset": {"line": 935, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/src/app/api/auth/%5B...all%5D/route.ts"],"sourcesContent":["import { auth } from '@/lib/auth';\nimport { toNextJsHandler } from 'better-auth/next-js';\n\nexport const { GET, POST } = toNextJsHandler(auth);\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,IAAA,0LAAe,EAAC,qIAAI"}}]
}