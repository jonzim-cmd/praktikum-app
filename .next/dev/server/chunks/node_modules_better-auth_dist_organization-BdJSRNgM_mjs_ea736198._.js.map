{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/node_modules/better-auth/dist/organization-BdJSRNgM.mjs"],"sourcesContent":["import { i as toZodSchema } from \"./get-migration-Bf0TuCzm.mjs\";\nimport { t as generateId } from \"./utils-db7gNqd-.mjs\";\nimport { u as getDate } from \"./schema-Bb7wzeK_.mjs\";\nimport { t as APIError$1 } from \"./api-CkmycQ2x.mjs\";\nimport { c as setSessionCookie } from \"./cookies-D72PbWdz.mjs\";\nimport { a as requestOnlySessionMiddleware, r as getSessionFromCtx, u as sessionMiddleware } from \"./session-AaRl3_x-.mjs\";\nimport { n as parser_default } from \"./parser-pHp5yoAv.mjs\";\nimport { r as defaultRoles } from \"./access-vPNO48H4.mjs\";\nimport { n as hasPermissionFn, t as cacheAllRoles } from \"./permission-JwliMugl.mjs\";\nimport { getCurrentAdapter } from \"@better-auth/core/context\";\nimport { BASE_ERROR_CODES, BetterAuthError } from \"@better-auth/core/error\";\nimport { defineErrorCodes } from \"@better-auth/core/utils\";\nimport { APIError } from \"better-call\";\nimport * as z from \"zod\";\nimport { createAuthEndpoint, createAuthMiddleware } from \"@better-auth/core/api\";\n\n//#region src/utils/shim.ts\nconst shimContext = (originalObject, newContext) => {\n\tconst shimmedObj = {};\n\tfor (const [key, value] of Object.entries(originalObject)) {\n\t\tshimmedObj[key] = (ctx) => {\n\t\t\treturn value({\n\t\t\t\t...ctx,\n\t\t\t\tcontext: {\n\t\t\t\t\t...newContext,\n\t\t\t\t\t...ctx.context\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tshimmedObj[key].path = value.path;\n\t\tshimmedObj[key].method = value.method;\n\t\tshimmedObj[key].options = value.options;\n\t\tshimmedObj[key].headers = value.headers;\n\t}\n\treturn shimmedObj;\n};\n\n//#endregion\n//#region src/plugins/organization/adapter.ts\nconst getOrgAdapter = (context, options) => {\n\tconst baseAdapter = context.adapter;\n\treturn {\n\t\tfindOrganizationBySlug: async (slug) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findOne({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"slug\",\n\t\t\t\t\tvalue: slug\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcreateOrganization: async (data) => {\n\t\t\tconst organization$1 = await (await getCurrentAdapter(baseAdapter)).create({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\tdata: {\n\t\t\t\t\t...data.organization,\n\t\t\t\t\tmetadata: data.organization.metadata ? JSON.stringify(data.organization.metadata) : void 0\n\t\t\t\t},\n\t\t\t\tforceAllowId: true\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...organization$1,\n\t\t\t\tmetadata: organization$1.metadata && typeof organization$1.metadata === \"string\" ? JSON.parse(organization$1.metadata) : void 0\n\t\t\t};\n\t\t},\n\t\tfindMemberByEmail: async (data) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tconst user = await adapter.findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"email\",\n\t\t\t\t\tvalue: data.email.toLowerCase()\n\t\t\t\t}]\n\t\t\t});\n\t\t\tif (!user) return null;\n\t\t\tconst member = await adapter.findOne({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: user.id\n\t\t\t\t}]\n\t\t\t});\n\t\t\tif (!member) return null;\n\t\t\treturn {\n\t\t\t\t...member,\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.image\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tlistMembers: async (data) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tconst members = await Promise.all([adapter.findMany({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}, ...data.filter?.field ? [{\n\t\t\t\t\tfield: data.filter?.field,\n\t\t\t\t\tvalue: data.filter?.value\n\t\t\t\t}] : []],\n\t\t\t\tlimit: data.limit || options?.membershipLimit || 100,\n\t\t\t\toffset: data.offset || 0,\n\t\t\t\tsortBy: data.sortBy ? {\n\t\t\t\t\tfield: data.sortBy,\n\t\t\t\t\tdirection: data.sortOrder || \"asc\"\n\t\t\t\t} : void 0\n\t\t\t}), adapter.count({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}, ...data.filter?.field ? [{\n\t\t\t\t\tfield: data.filter?.field,\n\t\t\t\t\tvalue: data.filter?.value\n\t\t\t\t}] : []]\n\t\t\t})]);\n\t\t\tconst users = await adapter.findMany({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: members[0].map((member) => member.userId),\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}]\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tmembers: members[0].map((member) => {\n\t\t\t\t\tconst user = users.find((user$1) => user$1.id === member.userId);\n\t\t\t\t\tif (!user) throw new BetterAuthError(\"Unexpected error: User not found for member\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...member,\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\tid: user.id,\n\t\t\t\t\t\t\tname: user.name,\n\t\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\t\timage: user.image\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\ttotal: members[1]\n\t\t\t};\n\t\t},\n\t\tfindMemberByOrgId: async (data) => {\n\t\t\tconst result = await (await getCurrentAdapter(baseAdapter)).findOne({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!result || !result.user) return null;\n\t\t\tconst { user, ...member } = result;\n\t\t\treturn {\n\t\t\t\t...member,\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.image\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tfindMemberById: async (memberId) => {\n\t\t\tconst result = await (await getCurrentAdapter(baseAdapter)).findOne({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: memberId\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { user, ...member } = result;\n\t\t\treturn {\n\t\t\t\t...member,\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.image\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tcreateMember: async (data) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).create({\n\t\t\t\tmodel: \"member\",\n\t\t\t\tdata: {\n\t\t\t\t\t...data,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tupdateMember: async (memberId, role) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).update({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: memberId\n\t\t\t\t}],\n\t\t\t\tupdate: { role }\n\t\t\t});\n\t\t},\n\t\tdeleteMember: async ({ memberId, organizationId, userId: _userId }) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tlet userId;\n\t\t\tif (!_userId) {\n\t\t\t\tconst member$1 = await adapter.findOne({\n\t\t\t\t\tmodel: \"member\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: memberId\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!member$1) throw new BetterAuthError(\"Member not found\");\n\t\t\t\tuserId = member$1.userId;\n\t\t\t} else userId = _userId;\n\t\t\tconst member = await adapter.delete({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: memberId\n\t\t\t\t}]\n\t\t\t});\n\t\t\tif (options?.teams?.enabled) {\n\t\t\t\tconst teams = await adapter.findMany({\n\t\t\t\t\tmodel: \"team\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\t\tvalue: organizationId\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tawait Promise.all(teams.map((team) => adapter.deleteMany({\n\t\t\t\t\tmodel: \"teamMember\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\t\tvalue: team.id\n\t\t\t\t\t}, {\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: userId\n\t\t\t\t\t}]\n\t\t\t\t})));\n\t\t\t}\n\t\t\treturn member;\n\t\t},\n\t\tupdateOrganization: async (organizationId, data) => {\n\t\t\tconst organization$1 = await (await getCurrentAdapter(baseAdapter)).update({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}],\n\t\t\t\tupdate: {\n\t\t\t\t\t...data,\n\t\t\t\t\tmetadata: typeof data.metadata === \"object\" ? JSON.stringify(data.metadata) : data.metadata\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!organization$1) return null;\n\t\t\treturn {\n\t\t\t\t...organization$1,\n\t\t\t\tmetadata: organization$1.metadata ? parser_default(organization$1.metadata) : void 0\n\t\t\t};\n\t\t},\n\t\tdeleteOrganization: async (organizationId) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tawait adapter.deleteMany({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t\tawait adapter.deleteMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t\tawait adapter.delete({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t\treturn organizationId;\n\t\t},\n\t\tsetActiveOrganization: async (sessionToken, organizationId, ctx) => {\n\t\t\treturn await context.internalAdapter.updateSession(sessionToken, { activeOrganizationId: organizationId });\n\t\t},\n\t\tfindOrganizationById: async (organizationId) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findOne({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcheckMembership: async ({ userId, organizationId }) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findOne({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindFullOrganization: async ({ organizationId, isSlug, includeTeams, membersLimit }) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tconst result = await adapter.findOne({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: isSlug ? \"slug\" : \"id\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}],\n\t\t\t\tjoin: {\n\t\t\t\t\tinvitation: true,\n\t\t\t\t\tmember: membersLimit ? { limit: membersLimit } : true,\n\t\t\t\t\t...includeTeams ? { team: true } : {}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { invitation: invitations, member: members, team: teams, ...org } = result;\n\t\t\tconst userIds = members.map((member) => member.userId);\n\t\t\tconst users = userIds.length > 0 ? await adapter.findMany({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: userIds,\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}],\n\t\t\t\tlimit: options?.membershipLimit || 100\n\t\t\t}) : [];\n\t\t\tconst userMap = new Map(users.map((user) => [user.id, user]));\n\t\t\tconst membersWithUsers = members.map((member) => {\n\t\t\t\tconst user = userMap.get(member.userId);\n\t\t\t\tif (!user) throw new BetterAuthError(\"Unexpected error: User not found for member\");\n\t\t\t\treturn {\n\t\t\t\t\t...member,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: user.id,\n\t\t\t\t\t\tname: user.name,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.image\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...org,\n\t\t\t\tinvitations,\n\t\t\t\tmembers: membersWithUsers,\n\t\t\t\tteams\n\t\t\t};\n\t\t},\n\t\tlistOrganizations: async (userId) => {\n\t\t\tconst result = await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}],\n\t\t\t\tjoin: { organization: true }\n\t\t\t});\n\t\t\tif (!result || result.length === 0) return [];\n\t\t\treturn result.map((member) => member.organization);\n\t\t},\n\t\tcreateTeam: async (data) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).create({\n\t\t\t\tmodel: \"team\",\n\t\t\t\tdata\n\t\t\t});\n\t\t},\n\t\tfindTeamById: async ({ teamId, organizationId, includeTeamMembers }) => {\n\t\t\tconst result = await (await getCurrentAdapter(baseAdapter)).findOne({\n\t\t\t\tmodel: \"team\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}, ...organizationId ? [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}] : []],\n\t\t\t\tjoin: { ...includeTeamMembers ? { teamMember: true } : {} }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { teamMember, ...team } = result;\n\t\t\treturn {\n\t\t\t\t...team,\n\t\t\t\t...includeTeamMembers ? { members: teamMember } : {}\n\t\t\t};\n\t\t},\n\t\tupdateTeam: async (teamId, data) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tif (\"id\" in data) data.id = void 0;\n\t\t\treturn await adapter.update({\n\t\t\t\tmodel: \"team\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}],\n\t\t\t\tupdate: { ...data }\n\t\t\t});\n\t\t},\n\t\tdeleteTeam: async (teamId) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tawait adapter.deleteMany({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t\treturn await adapter.delete({\n\t\t\t\tmodel: \"team\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistTeams: async (organizationId) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"team\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcreateTeamInvitation: async ({ email, role, teamId, organizationId, inviterId, expiresIn = 1e3 * 60 * 60 * 48 }) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tconst expiresAt = getDate(expiresIn);\n\t\t\treturn await adapter.create({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\tdata: {\n\t\t\t\t\temail,\n\t\t\t\t\trole,\n\t\t\t\t\torganizationId,\n\t\t\t\t\tteamId,\n\t\t\t\t\tinviterId,\n\t\t\t\t\tstatus: \"pending\",\n\t\t\t\t\texpiresAt\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsetActiveTeam: async (sessionToken, teamId, ctx) => {\n\t\t\treturn await context.internalAdapter.updateSession(sessionToken, { activeTeamId: teamId });\n\t\t},\n\t\tlistTeamMembers: async (data) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcountTeamMembers: async (data) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).count({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcountMembers: async (data) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).count({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistTeamsByUser: async (data) => {\n\t\t\treturn (await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}],\n\t\t\t\tjoin: { team: true }\n\t\t\t})).map((result) => result.team);\n\t\t},\n\t\tfindTeamMember: async (data) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findOne({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindOrCreateTeamMember: async (data) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tconst member = await adapter.findOne({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}]\n\t\t\t});\n\t\t\tif (member) return member;\n\t\t\treturn await adapter.create({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\tdata: {\n\t\t\t\t\tteamId: data.teamId,\n\t\t\t\t\tuserId: data.userId,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tremoveTeamMember: async (data) => {\n\t\t\tawait (await getCurrentAdapter(baseAdapter)).deleteMany({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindInvitationsByTeamId: async (teamId) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistUserInvitations: async (email) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"email\",\n\t\t\t\t\tvalue: email.toLowerCase()\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcreateInvitation: async ({ invitation, user }) => {\n\t\t\tconst adapter = await getCurrentAdapter(baseAdapter);\n\t\t\tconst expiresAt = getDate(options?.invitationExpiresIn || 3600 * 48, \"sec\");\n\t\t\treturn await adapter.create({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\tdata: {\n\t\t\t\t\tstatus: \"pending\",\n\t\t\t\t\texpiresAt,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\tinviterId: user.id,\n\t\t\t\t\t...invitation,\n\t\t\t\t\tteamId: invitation.teamIds.length > 0 ? invitation.teamIds.join(\",\") : null\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tfindInvitationById: async (id) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findOne({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: id\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindPendingInvitation: async (data) => {\n\t\t\treturn (await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfield: \"email\",\n\t\t\t\t\t\tvalue: data.email.toLowerCase()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfield: \"status\",\n\t\t\t\t\t\tvalue: \"pending\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t})).filter((invite) => new Date(invite.expiresAt) > /* @__PURE__ */ new Date());\n\t\t},\n\t\tfindPendingInvitations: async (data) => {\n\t\t\treturn (await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"status\",\n\t\t\t\t\tvalue: \"pending\"\n\t\t\t\t}]\n\t\t\t})).filter((invite) => new Date(invite.expiresAt) > /* @__PURE__ */ new Date());\n\t\t},\n\t\tlistInvitations: async (data) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tupdateInvitation: async (data) => {\n\t\t\treturn await (await getCurrentAdapter(baseAdapter)).update({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: data.invitationId\n\t\t\t\t}],\n\t\t\t\tupdate: { status: data.status }\n\t\t\t});\n\t\t}\n\t};\n};\n\n//#endregion\n//#region src/plugins/organization/call.ts\nconst orgMiddleware = createAuthMiddleware(async () => {\n\treturn {};\n});\n/**\n* The middleware forces the endpoint to require a valid session by utilizing the `sessionMiddleware`.\n* It also appends additional types to the session type regarding organizations.\n*/\nconst orgSessionMiddleware = createAuthMiddleware({ use: [sessionMiddleware] }, async (ctx) => {\n\treturn { session: ctx.context.session };\n});\n\n//#endregion\n//#region src/plugins/organization/error-codes.ts\nconst ORGANIZATION_ERROR_CODES = defineErrorCodes({\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION: \"You are not allowed to create a new organization\",\n\tYOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS: \"You have reached the maximum number of organizations\",\n\tORGANIZATION_ALREADY_EXISTS: \"Organization already exists\",\n\tORGANIZATION_SLUG_ALREADY_TAKEN: \"Organization slug already taken\",\n\tORGANIZATION_NOT_FOUND: \"Organization not found\",\n\tUSER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION: \"User is not a member of the organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION: \"You are not allowed to update this organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION: \"You are not allowed to delete this organization\",\n\tNO_ACTIVE_ORGANIZATION: \"No active organization\",\n\tUSER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION: \"User is already a member of this organization\",\n\tMEMBER_NOT_FOUND: \"Member not found\",\n\tROLE_NOT_FOUND: \"Role not found\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM: \"You are not allowed to create a new team\",\n\tTEAM_ALREADY_EXISTS: \"Team already exists\",\n\tTEAM_NOT_FOUND: \"Team not found\",\n\tYOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER: \"You cannot leave the organization as the only owner\",\n\tYOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER: \"You cannot leave the organization without an owner\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER: \"You are not allowed to delete this member\",\n\tYOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION: \"You are not allowed to invite users to this organization\",\n\tUSER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION: \"User is already invited to this organization\",\n\tINVITATION_NOT_FOUND: \"Invitation not found\",\n\tYOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION: \"You are not the recipient of the invitation\",\n\tEMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION: \"Email verification required before accepting or rejecting invitation\",\n\tYOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION: \"You are not allowed to cancel this invitation\",\n\tINVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION: \"Inviter is no longer a member of the organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE: \"You are not allowed to invite a user with this role\",\n\tFAILED_TO_RETRIEVE_INVITATION: \"Failed to retrieve invitation\",\n\tYOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS: \"You have reached the maximum number of teams\",\n\tUNABLE_TO_REMOVE_LAST_TEAM: \"Unable to remove last team\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER: \"You are not allowed to update this member\",\n\tORGANIZATION_MEMBERSHIP_LIMIT_REACHED: \"Organization membership limit reached\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION: \"You are not allowed to create teams in this organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION: \"You are not allowed to delete teams in this organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM: \"You are not allowed to update this team\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM: \"You are not allowed to delete this team\",\n\tINVITATION_LIMIT_REACHED: \"Invitation limit reached\",\n\tTEAM_MEMBER_LIMIT_REACHED: \"Team member limit reached\",\n\tUSER_IS_NOT_A_MEMBER_OF_THE_TEAM: \"User is not a member of the team\",\n\tYOU_CAN_NOT_ACCESS_THE_MEMBERS_OF_THIS_TEAM: \"You are not allowed to list the members of this team\",\n\tYOU_DO_NOT_HAVE_AN_ACTIVE_TEAM: \"You do not have an active team\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER: \"You are not allowed to create a new member\",\n\tYOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER: \"You are not allowed to remove a team member\",\n\tYOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION: \"You are not allowed to access this organization as an owner\",\n\tYOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION: \"You are not a member of this organization\",\n\tMISSING_AC_INSTANCE: \"Dynamic Access Control requires a pre-defined ac instance on the server auth plugin. Read server logs for more information\",\n\tYOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE: \"You must be in an organization to create a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE: \"You are not allowed to create a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE: \"You are not allowed to update a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE: \"You are not allowed to delete a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE: \"You are not allowed to read a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE: \"You are not allowed to list a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE: \"You are not allowed to get a role\",\n\tTOO_MANY_ROLES: \"This organization has too many roles\",\n\tINVALID_RESOURCE: \"The provided permission includes an invalid resource\",\n\tROLE_NAME_IS_ALREADY_TAKEN: \"That role name is already taken\",\n\tCANNOT_DELETE_A_PRE_DEFINED_ROLE: \"Cannot delete a pre-defined role\"\n});\n\n//#endregion\n//#region src/plugins/organization/has-permission.ts\nconst hasPermission = async (input, ctx) => {\n\tlet acRoles = { ...input.options.roles || defaultRoles };\n\tif (ctx && input.organizationId && input.options.dynamicAccessControl?.enabled && input.options.ac && !input.useMemoryCache) {\n\t\tconst roles = await ctx.context.adapter.findMany({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: input.organizationId\n\t\t\t}]\n\t\t});\n\t\tfor (const { role, permission: permissionsString } of roles) {\n\t\t\tif (role in acRoles) continue;\n\t\t\tconst result = z.record(z.string(), z.array(z.string())).safeParse(JSON.parse(permissionsString));\n\t\t\tif (!result.success) {\n\t\t\t\tctx.context.logger.error(\"[hasPermission] Invalid permissions for role \" + role, { permissions: JSON.parse(permissionsString) });\n\t\t\t\tthrow new APIError$1(\"INTERNAL_SERVER_ERROR\", { message: \"Invalid permissions for role \" + role });\n\t\t\t}\n\t\t\tacRoles[role] = input.options.ac.newRole(result.data);\n\t\t}\n\t}\n\tif (input.useMemoryCache) acRoles = cacheAllRoles.get(input.organizationId) || acRoles;\n\tcacheAllRoles.set(input.organizationId, acRoles);\n\treturn hasPermissionFn(input, acRoles);\n};\n\n//#endregion\n//#region src/plugins/organization/routes/crud-access-control.ts\nconst normalizeRoleName = (role) => role.toLowerCase();\nconst DEFAULT_MAXIMUM_ROLES_PER_ORGANIZATION = Number.POSITIVE_INFINITY;\nconst getAdditionalFields = (options, shouldBePartial = false) => {\n\tlet additionalFields = options?.schema?.organizationRole?.additionalFields || {};\n\tif (shouldBePartial) for (const key in additionalFields) additionalFields[key].required = false;\n\treturn {\n\t\tadditionalFieldsSchema: toZodSchema({\n\t\t\tfields: additionalFields,\n\t\t\tisClientSide: true\n\t\t}),\n\t\t$AdditionalFields: {},\n\t\t$ReturnAdditionalFields: {}\n\t};\n};\nconst createOrgRole = (options) => {\n\tconst { additionalFieldsSchema, $AdditionalFields, $ReturnAdditionalFields } = getAdditionalFields(options, false);\n\treturn createAuthEndpoint(\"/organization/create-role\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({\n\t\t\torganizationId: z.string().optional().meta({ description: \"The id of the organization to create the role in. If not provided, the user's active organization will be used.\" }),\n\t\t\trole: z.string().meta({ description: \"The name of the role to create\" }),\n\t\t\tpermission: z.record(z.string(), z.array(z.string())).meta({ description: \"The permission to assign to the role\" }),\n\t\t\tadditionalFields: z.object({ ...additionalFieldsSchema.shape }).optional()\n\t\t}),\n\t\tmetadata: { $Infer: { body: {} } },\n\t\trequireHeaders: true,\n\t\tuse: [orgSessionMiddleware]\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tlet roleName = ctx.body.role;\n\t\tconst permission = ctx.body.permission;\n\t\tconst additionalFields = ctx.body.additionalFields;\n\t\tconst ac = options.ac;\n\t\tif (!ac) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The organization plugin is missing a pre-defined ac instance.`, `\\nPlease refer to the documentation here: https://better-auth.com/docs/plugins/organization#dynamic-access-control`);\n\t\t\tthrow new APIError$1(\"NOT_IMPLEMENTED\", { message: ORGANIZATION_ERROR_CODES.MISSING_AC_INSTANCE });\n\t\t}\n\t\tconst organizationId = ctx.body.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to create a role. Either set an active org id, or pass an organizationId in the request body.`);\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.YOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE });\n\t\t}\n\t\troleName = normalizeRoleName(roleName);\n\t\tawait checkIfRoleNameIsTakenByPreDefinedRole({\n\t\t\trole: roleName,\n\t\t\torganizationId,\n\t\t\toptions,\n\t\t\tctx\n\t\t});\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to create a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await hasPermission({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { ac: [\"create\"] },\n\t\t\trole: member.role\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to create a role. If this is unexpected, please make sure the role associated to that member has the \"ac\" resource with the \"create\" permission.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId,\n\t\t\t\trole: member.role\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE });\n\t\t}\n\t\tconst maximumRolesPerOrganization = typeof options.dynamicAccessControl?.maximumRolesPerOrganization === \"function\" ? await options.dynamicAccessControl.maximumRolesPerOrganization(organizationId) : options.dynamicAccessControl?.maximumRolesPerOrganization ?? DEFAULT_MAXIMUM_ROLES_PER_ORGANIZATION;\n\t\tconst rolesInDB = await ctx.context.adapter.count({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (rolesInDB >= maximumRolesPerOrganization) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] Failed to create a new role, the organization has too many roles. Maximum allowed roles is ${maximumRolesPerOrganization}.`, {\n\t\t\t\torganizationId,\n\t\t\t\tmaximumRolesPerOrganization,\n\t\t\t\trolesInDB\n\t\t\t});\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.TOO_MANY_ROLES });\n\t\t}\n\t\tawait checkForInvalidResources({\n\t\t\tac,\n\t\t\tctx,\n\t\t\tpermission\n\t\t});\n\t\tawait checkIfMemberHasPermission({\n\t\t\tctx,\n\t\t\tmember,\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissionRequired: permission,\n\t\t\tuser,\n\t\t\taction: \"create\"\n\t\t});\n\t\tawait checkIfRoleNameIsTakenByRoleInDB({\n\t\t\tctx,\n\t\t\torganizationId,\n\t\t\trole: roleName\n\t\t});\n\t\tconst newRole = ac.newRole(permission);\n\t\tconst data = {\n\t\t\t...await ctx.context.adapter.create({\n\t\t\t\tmodel: \"organizationRole\",\n\t\t\t\tdata: {\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\torganizationId,\n\t\t\t\t\tpermission: JSON.stringify(permission),\n\t\t\t\t\trole: roleName,\n\t\t\t\t\t...additionalFields\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpermission\n\t\t};\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\troleData: data,\n\t\t\tstatements: newRole.statements\n\t\t});\n\t});\n};\nconst deleteOrgRole = (options) => {\n\treturn createAuthEndpoint(\"/organization/delete-role\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({ organizationId: z.string().optional().meta({ description: \"The id of the organization to create the role in. If not provided, the user's active organization will be used.\" }) }).and(z.union([z.object({ roleName: z.string().nonempty().meta({ description: \"The name of the role to delete\" }) }), z.object({ roleId: z.string().nonempty().meta({ description: \"The id of the role to delete\" }) })])),\n\t\trequireHeaders: true,\n\t\tuse: [orgSessionMiddleware],\n\t\tmetadata: { $Infer: { body: {} } }\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tconst organizationId = ctx.body.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to delete a role. Either set an active org id, or pass an organizationId in the request body.`);\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\t}\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to delete a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await hasPermission({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { ac: [\"delete\"] },\n\t\t\trole: member.role\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to delete a role. If this is unexpected, please make sure the role associated to that member has the \"ac\" resource with the \"delete\" permission.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId,\n\t\t\t\trole: member.role\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE });\n\t\t}\n\t\tif (ctx.body.roleName) {\n\t\t\tconst roleName = ctx.body.roleName;\n\t\t\tconst defaultRoles$2 = options.roles ? Object.keys(options.roles) : [\n\t\t\t\t\"owner\",\n\t\t\t\t\"admin\",\n\t\t\t\t\"member\"\n\t\t\t];\n\t\t\tif (defaultRoles$2.includes(roleName)) {\n\t\t\t\tctx.context.logger.error(`[Dynamic Access Control] Cannot delete a pre-defined role.`, {\n\t\t\t\t\troleName,\n\t\t\t\t\torganizationId,\n\t\t\t\t\tdefaultRoles: defaultRoles$2\n\t\t\t\t});\n\t\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.CANNOT_DELETE_A_PRE_DEFINED_ROLE });\n\t\t\t}\n\t\t}\n\t\tlet condition;\n\t\tif (ctx.body.roleName) condition = {\n\t\t\tfield: \"role\",\n\t\t\tvalue: ctx.body.roleName,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse if (ctx.body.roleId) condition = {\n\t\t\tfield: \"id\",\n\t\t\tvalue: ctx.body.roleId,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id is not provided in the request body.`);\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\tconst existingRoleInDB = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition]\n\t\t});\n\t\tif (!existingRoleInDB) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id does not exist in the database.`, {\n\t\t\t\t...\"roleName\" in ctx.body ? { roleName: ctx.body.roleName } : { roleId: ctx.body.roleId },\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\texistingRoleInDB.permission = JSON.parse(existingRoleInDB.permission);\n\t\tawait ctx.context.adapter.delete({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition]\n\t\t});\n\t\treturn ctx.json({ success: true });\n\t});\n};\nconst listOrgRoles = (options) => {\n\tconst { $ReturnAdditionalFields } = getAdditionalFields(options, false);\n\treturn createAuthEndpoint(\"/organization/list-roles\", {\n\t\tmethod: \"GET\",\n\t\trequireHeaders: true,\n\t\tuse: [orgSessionMiddleware],\n\t\tquery: z.object({ organizationId: z.string().optional().meta({ description: \"The id of the organization to list roles for. If not provided, the user's active organization will be used.\" }) }).optional()\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tconst organizationId = ctx.query?.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to list roles. Either set an active org id, or pass an organizationId in the request query.`);\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\t}\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to list roles.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await hasPermission({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { ac: [\"read\"] },\n\t\t\trole: member.role\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to list roles.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId,\n\t\t\t\trole: member.role\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE });\n\t\t}\n\t\tlet roles = await ctx.context.adapter.findMany({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\troles = roles.map((x) => ({\n\t\t\t...x,\n\t\t\tpermission: JSON.parse(x.permission)\n\t\t}));\n\t\treturn ctx.json(roles);\n\t});\n};\nconst getOrgRole = (options) => {\n\tconst { $ReturnAdditionalFields } = getAdditionalFields(options, false);\n\treturn createAuthEndpoint(\"/organization/get-role\", {\n\t\tmethod: \"GET\",\n\t\trequireHeaders: true,\n\t\tuse: [orgSessionMiddleware],\n\t\tquery: z.object({ organizationId: z.string().optional().meta({ description: \"The id of the organization to read a role for. If not provided, the user's active organization will be used.\" }) }).and(z.union([z.object({ roleName: z.string().nonempty().meta({ description: \"The name of the role to read\" }) }), z.object({ roleId: z.string().nonempty().meta({ description: \"The id of the role to read\" }) })])).optional(),\n\t\tmetadata: { $Infer: { query: {} } }\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tconst organizationId = ctx.query?.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to read a role. Either set an active org id, or pass an organizationId in the request query.`);\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\t}\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to read a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await hasPermission({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { ac: [\"read\"] },\n\t\t\trole: member.role\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to read a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId,\n\t\t\t\trole: member.role\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE });\n\t\t}\n\t\tlet condition;\n\t\tif (ctx.query.roleName) condition = {\n\t\t\tfield: \"role\",\n\t\t\tvalue: ctx.query.roleName,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse if (ctx.query.roleId) condition = {\n\t\t\tfield: \"id\",\n\t\t\tvalue: ctx.query.roleId,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id is not provided in the request query.`);\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\tlet role = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition]\n\t\t});\n\t\tif (!role) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id does not exist in the database.`, {\n\t\t\t\t...\"roleName\" in ctx.query ? { roleName: ctx.query.roleName } : { roleId: ctx.query.roleId },\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\trole.permission = JSON.parse(role.permission);\n\t\treturn ctx.json(role);\n\t});\n};\nconst updateOrgRole = (options) => {\n\tconst { additionalFieldsSchema, $AdditionalFields, $ReturnAdditionalFields } = getAdditionalFields(options, true);\n\treturn createAuthEndpoint(\"/organization/update-role\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({\n\t\t\torganizationId: z.string().optional().meta({ description: \"The id of the organization to update the role in. If not provided, the user's active organization will be used.\" }),\n\t\t\tdata: z.object({\n\t\t\t\tpermission: z.record(z.string(), z.array(z.string())).optional().meta({ description: \"The permission to update the role with\" }),\n\t\t\t\troleName: z.string().optional().meta({ description: \"The name of the role to update\" }),\n\t\t\t\t...additionalFieldsSchema.shape\n\t\t\t})\n\t\t}).and(z.union([z.object({ roleName: z.string().nonempty().meta({ description: \"The name of the role to update\" }) }), z.object({ roleId: z.string().nonempty().meta({ description: \"The id of the role to update\" }) })])),\n\t\tmetadata: { $Infer: { body: {} } },\n\t\trequireHeaders: true,\n\t\tuse: [orgSessionMiddleware]\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tconst ac = options.ac;\n\t\tif (!ac) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The organization plugin is missing a pre-defined ac instance.`, `\\nPlease refer to the documentation here: https://better-auth.com/docs/plugins/organization#dynamic-access-control`);\n\t\t\tthrow new APIError$1(\"NOT_IMPLEMENTED\", { message: ORGANIZATION_ERROR_CODES.MISSING_AC_INSTANCE });\n\t\t}\n\t\tconst organizationId = ctx.body.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to update a role. Either set an active org id, or pass an organizationId in the request body.`);\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\t}\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to update a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await hasPermission({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\trole: member.role,\n\t\t\tpermissions: { ac: [\"update\"] }\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to update a role.`);\n\t\t\tthrow new APIError$1(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE });\n\t\t}\n\t\tlet condition;\n\t\tif (ctx.body.roleName) condition = {\n\t\t\tfield: \"role\",\n\t\t\tvalue: ctx.body.roleName,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse if (ctx.body.roleId) condition = {\n\t\t\tfield: \"id\",\n\t\t\tvalue: ctx.body.roleId,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id is not provided in the request body.`);\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\tlet role = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition]\n\t\t});\n\t\tif (!role) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id does not exist in the database.`, {\n\t\t\t\t...\"roleName\" in ctx.body ? { roleName: ctx.body.roleName } : { roleId: ctx.body.roleId },\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\trole.permission = role.permission ? JSON.parse(role.permission) : void 0;\n\t\tconst { permission: _, roleName: __, ...additionalFields } = ctx.body.data;\n\t\tlet updateData = { ...additionalFields };\n\t\tif (ctx.body.data.permission) {\n\t\t\tlet newPermission = ctx.body.data.permission;\n\t\t\tawait checkForInvalidResources({\n\t\t\t\tac,\n\t\t\t\tctx,\n\t\t\t\tpermission: newPermission\n\t\t\t});\n\t\t\tawait checkIfMemberHasPermission({\n\t\t\t\tctx,\n\t\t\t\tmember,\n\t\t\t\toptions,\n\t\t\t\torganizationId,\n\t\t\t\tpermissionRequired: newPermission,\n\t\t\t\tuser,\n\t\t\t\taction: \"update\"\n\t\t\t});\n\t\t\tupdateData.permission = newPermission;\n\t\t}\n\t\tif (ctx.body.data.roleName) {\n\t\t\tlet newRoleName = ctx.body.data.roleName;\n\t\t\tnewRoleName = normalizeRoleName(newRoleName);\n\t\t\tawait checkIfRoleNameIsTakenByPreDefinedRole({\n\t\t\t\trole: newRoleName,\n\t\t\t\torganizationId,\n\t\t\t\toptions,\n\t\t\t\tctx\n\t\t\t});\n\t\t\tawait checkIfRoleNameIsTakenByRoleInDB({\n\t\t\t\trole: newRoleName,\n\t\t\t\torganizationId,\n\t\t\t\tctx\n\t\t\t});\n\t\t\tupdateData.role = newRoleName;\n\t\t}\n\t\tconst update = {\n\t\t\t...updateData,\n\t\t\t...updateData.permission ? { permission: JSON.stringify(updateData.permission) } : {}\n\t\t};\n\t\tawait ctx.context.adapter.update({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition],\n\t\t\tupdate\n\t\t});\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\troleData: {\n\t\t\t\t...role,\n\t\t\t\t...update,\n\t\t\t\tpermission: updateData.permission || role.permission || null\n\t\t\t}\n\t\t});\n\t});\n};\nasync function checkForInvalidResources({ ac, ctx, permission }) {\n\tconst validResources = Object.keys(ac.statements);\n\tconst providedResources = Object.keys(permission);\n\tif (providedResources.some((r) => !validResources.includes(r))) {\n\t\tctx.context.logger.error(`[Dynamic Access Control] The provided permission includes an invalid resource.`, {\n\t\t\tprovidedResources,\n\t\t\tvalidResources\n\t\t});\n\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.INVALID_RESOURCE });\n\t}\n}\nasync function checkIfMemberHasPermission({ ctx, permissionRequired: permission, options, organizationId, member, user, action }) {\n\tconst hasNecessaryPermissions = [];\n\tconst permissionEntries = Object.entries(permission);\n\tfor await (const [resource, permissions] of permissionEntries) for await (const perm of permissions) hasNecessaryPermissions.push({\n\t\tresource: { [resource]: [perm] },\n\t\thasPermission: await hasPermission({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { [resource]: [perm] },\n\t\t\tuseMemoryCache: true,\n\t\t\trole: member.role\n\t\t}, ctx)\n\t});\n\tconst missingPermissions = hasNecessaryPermissions.filter((x) => x.hasPermission === false).map((x) => {\n\t\tconst key = Object.keys(x.resource)[0];\n\t\treturn `${key}:${x.resource[key][0]}`;\n\t});\n\tif (missingPermissions.length > 0) {\n\t\tctx.context.logger.error(`[Dynamic Access Control] The user is missing permissions necessary to ${action} a role with those set of permissions.\\n`, {\n\t\t\tuserId: user.id,\n\t\t\torganizationId,\n\t\t\trole: member.role,\n\t\t\tmissingPermissions\n\t\t});\n\t\tlet errorMessage;\n\t\tif (action === \"create\") errorMessage = ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE;\n\t\telse if (action === \"update\") errorMessage = ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE;\n\t\telse if (action === \"delete\") errorMessage = ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE;\n\t\telse if (action === \"read\") errorMessage = ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE;\n\t\telse if (action === \"list\") errorMessage = ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE;\n\t\telse errorMessage = ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE;\n\t\tthrow new APIError$1(\"FORBIDDEN\", {\n\t\t\tmessage: errorMessage,\n\t\t\tmissingPermissions\n\t\t});\n\t}\n}\nasync function checkIfRoleNameIsTakenByPreDefinedRole({ options, organizationId, role, ctx }) {\n\tconst defaultRoles$2 = options.roles ? Object.keys(options.roles) : [\n\t\t\"owner\",\n\t\t\"admin\",\n\t\t\"member\"\n\t];\n\tif (defaultRoles$2.includes(role)) {\n\t\tctx.context.logger.error(`[Dynamic Access Control] The role name \"${role}\" is already taken by a pre-defined role.`, {\n\t\t\trole,\n\t\t\torganizationId,\n\t\t\tdefaultRoles: defaultRoles$2\n\t\t});\n\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ROLE_NAME_IS_ALREADY_TAKEN });\n\t}\n}\nasync function checkIfRoleNameIsTakenByRoleInDB({ organizationId, role, ctx }) {\n\tif (await ctx.context.adapter.findOne({\n\t\tmodel: \"organizationRole\",\n\t\twhere: [{\n\t\t\tfield: \"organizationId\",\n\t\t\tvalue: organizationId,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t}, {\n\t\t\tfield: \"role\",\n\t\t\tvalue: role,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t}]\n\t})) {\n\t\tctx.context.logger.error(`[Dynamic Access Control] The role name \"${role}\" is already taken by a role in the database.`, {\n\t\t\trole,\n\t\t\torganizationId\n\t\t});\n\t\tthrow new APIError$1(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ROLE_NAME_IS_ALREADY_TAKEN });\n\t}\n}\n\n//#endregion\n//#region src/plugins/organization/routes/crud-invites.ts\nconst createInvitation = (option) => {\n\tconst additionalFieldsSchema = toZodSchema({\n\t\tfields: option?.schema?.invitation?.additionalFields || {},\n\t\tisClientSide: true\n\t});\n\tconst baseSchema = z.object({\n\t\temail: z.string().meta({ description: \"The email address of the user to invite\" }),\n\t\trole: z.union([z.string().meta({ description: \"The role to assign to the user\" }), z.array(z.string().meta({ description: \"The roles to assign to the user\" }))]).meta({ description: \"The role(s) to assign to the user. It can be `admin`, `member`, owner. Eg: \\\"member\\\"\" }),\n\t\torganizationId: z.string().meta({ description: \"The organization ID to invite the user to\" }).optional(),\n\t\tresend: z.boolean().meta({ description: \"Resend the invitation email, if the user is already invited. Eg: true\" }).optional(),\n\t\tteamId: z.union([z.string().meta({ description: \"The team ID to invite the user to\" }).optional(), z.array(z.string()).meta({ description: \"The team IDs to invite the user to\" }).optional()])\n\t});\n\treturn createAuthEndpoint(\"/organization/invite-member\", {\n\t\tmethod: \"POST\",\n\t\trequireHeaders: true,\n\t\tuse: [orgMiddleware, orgSessionMiddleware],\n\t\tbody: z.object({\n\t\t\t...baseSchema.shape,\n\t\t\t...additionalFieldsSchema.shape\n\t\t}),\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\toperationId: \"createOrganizationInvitation\",\n\t\t\t\tdescription: \"Create an invitation to an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\t\t\trole: { type: \"string\" },\n\t\t\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\t\t\tinviterId: { type: \"string\" },\n\t\t\t\t\t\t\tstatus: { type: \"string\" },\n\t\t\t\t\t\t\texpiresAt: { type: \"string\" },\n\t\t\t\t\t\t\tcreatedAt: { type: \"string\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\"role\",\n\t\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\t\"inviterId\",\n\t\t\t\t\t\t\t\"status\",\n\t\t\t\t\t\t\t\"expiresAt\",\n\t\t\t\t\t\t\t\"createdAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = ctx.context.session;\n\t\tconst organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n\t\tif (!organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tconst email = ctx.body.email.toLowerCase();\n\t\tif (!z.email().safeParse(email).success) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.INVALID_EMAIL });\n\t\tconst adapter = getOrgAdapter(ctx.context, option);\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\t\tif (!await hasPermission({\n\t\t\trole: member.role,\n\t\t\toptions: ctx.context.orgOptions,\n\t\t\tpermissions: { invitation: [\"create\"] },\n\t\t\torganizationId\n\t\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION });\n\t\tconst creatorRole = ctx.context.orgOptions.creatorRole || \"owner\";\n\t\tconst roles = parseRoles(ctx.body.role);\n\t\tif (member.role !== creatorRole && roles.split(\",\").includes(creatorRole)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE });\n\t\tif (await adapter.findMemberByEmail({\n\t\t\temail,\n\t\t\torganizationId\n\t\t})) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\tconst alreadyInvited = await adapter.findPendingInvitation({\n\t\t\temail,\n\t\t\torganizationId\n\t\t});\n\t\tif (alreadyInvited.length && !ctx.body.resend) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION });\n\t\tconst organization$1 = await adapter.findOrganizationById(organizationId);\n\t\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tif (alreadyInvited.length && ctx.body.resend) {\n\t\t\tconst existingInvitation = alreadyInvited[0];\n\t\t\tconst newExpiresAt = getDate(ctx.context.orgOptions.invitationExpiresIn || 3600 * 48, \"sec\");\n\t\t\tawait ctx.context.adapter.update({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: existingInvitation.id\n\t\t\t\t}],\n\t\t\t\tupdate: { expiresAt: newExpiresAt }\n\t\t\t});\n\t\t\tconst updatedInvitation = {\n\t\t\t\t...existingInvitation,\n\t\t\t\texpiresAt: newExpiresAt\n\t\t\t};\n\t\t\tawait ctx.context.orgOptions.sendInvitationEmail?.({\n\t\t\t\tid: updatedInvitation.id,\n\t\t\t\trole: updatedInvitation.role,\n\t\t\t\temail: updatedInvitation.email.toLowerCase(),\n\t\t\t\torganization: organization$1,\n\t\t\t\tinviter: {\n\t\t\t\t\t...member,\n\t\t\t\t\tuser: session.user\n\t\t\t\t},\n\t\t\t\tinvitation: updatedInvitation\n\t\t\t}, ctx.request);\n\t\t\treturn ctx.json(updatedInvitation);\n\t\t}\n\t\tif (alreadyInvited.length && ctx.context.orgOptions.cancelPendingInvitationsOnReInvite) await adapter.updateInvitation({\n\t\t\tinvitationId: alreadyInvited[0].id,\n\t\t\tstatus: \"canceled\"\n\t\t});\n\t\tconst invitationLimit = typeof ctx.context.orgOptions.invitationLimit === \"function\" ? await ctx.context.orgOptions.invitationLimit({\n\t\t\tuser: session.user,\n\t\t\torganization: organization$1,\n\t\t\tmember\n\t\t}, ctx.context) : ctx.context.orgOptions.invitationLimit ?? 100;\n\t\tif ((await adapter.findPendingInvitations({ organizationId })).length >= invitationLimit) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.INVITATION_LIMIT_REACHED });\n\t\tif (ctx.context.orgOptions.teams && ctx.context.orgOptions.teams.enabled && typeof ctx.context.orgOptions.teams.maximumMembersPerTeam !== \"undefined\" && \"teamId\" in ctx.body && ctx.body.teamId) {\n\t\t\tconst teamIds$1 = typeof ctx.body.teamId === \"string\" ? [ctx.body.teamId] : ctx.body.teamId;\n\t\t\tfor (const teamId of teamIds$1) {\n\t\t\t\tconst team = await adapter.findTeamById({\n\t\t\t\t\tteamId,\n\t\t\t\t\torganizationId,\n\t\t\t\t\tincludeTeamMembers: true\n\t\t\t\t});\n\t\t\t\tif (!team) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\t\t\t\tconst maximumMembersPerTeam = typeof ctx.context.orgOptions.teams.maximumMembersPerTeam === \"function\" ? await ctx.context.orgOptions.teams.maximumMembersPerTeam({\n\t\t\t\t\tteamId,\n\t\t\t\t\tsession,\n\t\t\t\t\torganizationId\n\t\t\t\t}) : ctx.context.orgOptions.teams.maximumMembersPerTeam;\n\t\t\t\tif (team.members.length >= maximumMembersPerTeam) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.TEAM_MEMBER_LIMIT_REACHED });\n\t\t\t}\n\t\t}\n\t\tconst teamIds = \"teamId\" in ctx.body ? typeof ctx.body.teamId === \"string\" ? [ctx.body.teamId] : ctx.body.teamId ?? [] : [];\n\t\tconst { email: _, role: __, organizationId: ___, resend: ____, ...additionalFields } = ctx.body;\n\t\tlet invitationData = {\n\t\t\trole: roles,\n\t\t\temail,\n\t\t\torganizationId,\n\t\t\tteamIds,\n\t\t\t...additionalFields ? additionalFields : {}\n\t\t};\n\t\tif (option?.organizationHooks?.beforeCreateInvitation) {\n\t\t\tconst response = await option?.organizationHooks.beforeCreateInvitation({\n\t\t\t\tinvitation: {\n\t\t\t\t\t...invitationData,\n\t\t\t\t\tinviterId: session.user.id,\n\t\t\t\t\tteamId: teamIds.length > 0 ? teamIds[0] : void 0\n\t\t\t\t},\n\t\t\t\tinviter: session.user,\n\t\t\t\torganization: organization$1\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) invitationData = {\n\t\t\t\t...invitationData,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst invitation = await adapter.createInvitation({\n\t\t\tinvitation: invitationData,\n\t\t\tuser: session.user\n\t\t});\n\t\tawait ctx.context.orgOptions.sendInvitationEmail?.({\n\t\t\tid: invitation.id,\n\t\t\trole: invitation.role,\n\t\t\temail: invitation.email.toLowerCase(),\n\t\t\torganization: organization$1,\n\t\t\tinviter: {\n\t\t\t\t...member,\n\t\t\t\tuser: session.user\n\t\t\t},\n\t\t\tinvitation\n\t\t}, ctx.request);\n\t\tif (option?.organizationHooks?.afterCreateInvitation) await option?.organizationHooks.afterCreateInvitation({\n\t\t\tinvitation,\n\t\t\tinviter: session.user,\n\t\t\torganization: organization$1\n\t\t});\n\t\treturn ctx.json(invitation);\n\t});\n};\nconst acceptInvitation = (options) => createAuthEndpoint(\"/organization/accept-invitation\", {\n\tmethod: \"POST\",\n\tbody: z.object({ invitationId: z.string().meta({ description: \"The ID of the invitation to accept\" }) }),\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Accept an invitation to an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tinvitation: { type: \"object\" },\n\t\t\t\t\tmember: { type: \"object\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tconst invitation = await adapter.findInvitationById(ctx.body.invitationId);\n\tif (!invitation || invitation.expiresAt < /* @__PURE__ */ new Date() || invitation.status !== \"pending\") throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND });\n\tif (invitation.email.toLowerCase() !== session.user.email.toLowerCase()) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION });\n\tif (ctx.context.orgOptions.requireEmailVerificationOnInvitation && !session.user.emailVerified) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION });\n\tconst membershipLimit = ctx.context.orgOptions?.membershipLimit || 100;\n\tif (await adapter.countMembers({ organizationId: invitation.organizationId }) >= membershipLimit) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_MEMBERSHIP_LIMIT_REACHED });\n\tconst organization$1 = await adapter.findOrganizationById(invitation.organizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (options?.organizationHooks?.beforeAcceptInvitation) await options?.organizationHooks.beforeAcceptInvitation({\n\t\tinvitation,\n\t\tuser: session.user,\n\t\torganization: organization$1\n\t});\n\tconst acceptedI = await adapter.updateInvitation({\n\t\tinvitationId: ctx.body.invitationId,\n\t\tstatus: \"accepted\"\n\t});\n\tif (!acceptedI) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.FAILED_TO_RETRIEVE_INVITATION });\n\tif (ctx.context.orgOptions.teams && ctx.context.orgOptions.teams.enabled && \"teamId\" in acceptedI && acceptedI.teamId) {\n\t\tconst teamIds = acceptedI.teamId.split(\",\");\n\t\tconst onlyOne = teamIds.length === 1;\n\t\tfor (const teamId of teamIds) {\n\t\t\tawait adapter.findOrCreateTeamMember({\n\t\t\t\tteamId,\n\t\t\t\tuserId: session.user.id\n\t\t\t});\n\t\t\tif (typeof ctx.context.orgOptions.teams.maximumMembersPerTeam !== \"undefined\") {\n\t\t\t\tif (await adapter.countTeamMembers({ teamId }) >= (typeof ctx.context.orgOptions.teams.maximumMembersPerTeam === \"function\" ? await ctx.context.orgOptions.teams.maximumMembersPerTeam({\n\t\t\t\t\tteamId,\n\t\t\t\t\tsession,\n\t\t\t\t\torganizationId: invitation.organizationId\n\t\t\t\t}) : ctx.context.orgOptions.teams.maximumMembersPerTeam)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.TEAM_MEMBER_LIMIT_REACHED });\n\t\t\t}\n\t\t}\n\t\tif (onlyOne) {\n\t\t\tconst teamId = teamIds[0];\n\t\t\tawait setSessionCookie(ctx, {\n\t\t\t\tsession: await adapter.setActiveTeam(session.session.token, teamId, ctx),\n\t\t\t\tuser: session.user\n\t\t\t});\n\t\t}\n\t}\n\tconst member = await adapter.createMember({\n\t\torganizationId: invitation.organizationId,\n\t\tuserId: session.user.id,\n\t\trole: invitation.role,\n\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t});\n\tawait adapter.setActiveOrganization(session.session.token, invitation.organizationId, ctx);\n\tif (!acceptedI) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND }\n\t});\n\tif (options?.organizationHooks?.afterAcceptInvitation) await options?.organizationHooks.afterAcceptInvitation({\n\t\tinvitation: acceptedI,\n\t\tmember,\n\t\tuser: session.user,\n\t\torganization: organization$1\n\t});\n\treturn ctx.json({\n\t\tinvitation: acceptedI,\n\t\tmember\n\t});\n});\nconst rejectInvitation = (options) => createAuthEndpoint(\"/organization/reject-invitation\", {\n\tmethod: \"POST\",\n\tbody: z.object({ invitationId: z.string().meta({ description: \"The ID of the invitation to reject\" }) }),\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Reject an invitation to an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tinvitation: { type: \"object\" },\n\t\t\t\t\tmember: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tnullable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n\tconst invitation = await adapter.findInvitationById(ctx.body.invitationId);\n\tif (!invitation || invitation.expiresAt < /* @__PURE__ */ new Date() || invitation.status !== \"pending\") throw new APIError(\"BAD_REQUEST\", { message: \"Invitation not found!\" });\n\tif (invitation.email.toLowerCase() !== session.user.email.toLowerCase()) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION });\n\tif (ctx.context.orgOptions.requireEmailVerificationOnInvitation && !session.user.emailVerified) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION });\n\tconst organization$1 = await adapter.findOrganizationById(invitation.organizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (options?.organizationHooks?.beforeRejectInvitation) await options?.organizationHooks.beforeRejectInvitation({\n\t\tinvitation,\n\t\tuser: session.user,\n\t\torganization: organization$1\n\t});\n\tconst rejectedI = await adapter.updateInvitation({\n\t\tinvitationId: ctx.body.invitationId,\n\t\tstatus: \"rejected\"\n\t});\n\tif (options?.organizationHooks?.afterRejectInvitation) await options?.organizationHooks.afterRejectInvitation({\n\t\tinvitation: rejectedI || invitation,\n\t\tuser: session.user,\n\t\torganization: organization$1\n\t});\n\treturn ctx.json({\n\t\tinvitation: rejectedI,\n\t\tmember: null\n\t});\n});\nconst cancelInvitation = (options) => createAuthEndpoint(\"/organization/cancel-invitation\", {\n\tmethod: \"POST\",\n\tbody: z.object({ invitationId: z.string().meta({ description: \"The ID of the invitation to cancel\" }) }),\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\topenapi: {\n\t\toperationId: \"cancelOrganizationInvitation\",\n\t\tdescription: \"Cancel an invitation to an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { invitation: { type: \"object\" } }\n\t\t\t} } }\n\t\t} }\n\t}\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tconst invitation = await adapter.findInvitationById(ctx.body.invitationId);\n\tif (!invitation) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND });\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: invitation.organizationId\n\t});\n\tif (!member) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tif (!await hasPermission({\n\t\trole: member.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { invitation: [\"cancel\"] },\n\t\torganizationId: invitation.organizationId\n\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION });\n\tconst organization$1 = await adapter.findOrganizationById(invitation.organizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (options?.organizationHooks?.beforeCancelInvitation) await options?.organizationHooks.beforeCancelInvitation({\n\t\tinvitation,\n\t\tcancelledBy: session.user,\n\t\torganization: organization$1\n\t});\n\tconst canceledI = await adapter.updateInvitation({\n\t\tinvitationId: ctx.body.invitationId,\n\t\tstatus: \"canceled\"\n\t});\n\tif (options?.organizationHooks?.afterCancelInvitation) await options?.organizationHooks.afterCancelInvitation({\n\t\tinvitation: canceledI || invitation,\n\t\tcancelledBy: session.user,\n\t\torganization: organization$1\n\t});\n\treturn ctx.json(canceledI);\n});\nconst getInvitation = (options) => createAuthEndpoint(\"/organization/get-invitation\", {\n\tmethod: \"GET\",\n\tuse: [orgMiddleware],\n\trequireHeaders: true,\n\tquery: z.object({ id: z.string().meta({ description: \"The ID of the invitation to get\" }) }),\n\tmetadata: { openapi: {\n\t\tdescription: \"Get an invitation by ID\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\trole: { type: \"string\" },\n\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\tinviterId: { type: \"string\" },\n\t\t\t\t\tstatus: { type: \"string\" },\n\t\t\t\t\texpiresAt: { type: \"string\" },\n\t\t\t\t\torganizationName: { type: \"string\" },\n\t\t\t\t\torganizationSlug: { type: \"string\" },\n\t\t\t\t\tinviterEmail: { type: \"string\" }\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"id\",\n\t\t\t\t\t\"email\",\n\t\t\t\t\t\"role\",\n\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\"inviterId\",\n\t\t\t\t\t\"status\",\n\t\t\t\t\t\"expiresAt\",\n\t\t\t\t\t\"organizationName\",\n\t\t\t\t\t\"organizationSlug\",\n\t\t\t\t\t\"inviterEmail\"\n\t\t\t\t]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session) throw new APIError(\"UNAUTHORIZED\", { message: \"Not authenticated\" });\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tconst invitation = await adapter.findInvitationById(ctx.query.id);\n\tif (!invitation || invitation.status !== \"pending\" || invitation.expiresAt < /* @__PURE__ */ new Date()) throw new APIError(\"BAD_REQUEST\", { message: \"Invitation not found!\" });\n\tif (invitation.email.toLowerCase() !== session.user.email.toLowerCase()) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION });\n\tconst organization$1 = await adapter.findOrganizationById(invitation.organizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: invitation.inviterId,\n\t\torganizationId: invitation.organizationId\n\t});\n\tif (!member) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION });\n\treturn ctx.json({\n\t\t...invitation,\n\t\torganizationName: organization$1.name,\n\t\torganizationSlug: organization$1.slug,\n\t\tinviterEmail: member.user.email\n\t});\n});\nconst listInvitations = (options) => createAuthEndpoint(\"/organization/list-invitations\", {\n\tmethod: \"GET\",\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\tquery: z.object({ organizationId: z.string().meta({ description: \"The ID of the organization to list invitations for\" }).optional() }).optional()\n}, async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session) throw new APIError(\"UNAUTHORIZED\", { message: \"Not authenticated\" });\n\tconst orgId = ctx.query?.organizationId || session.session.activeOrganizationId;\n\tif (!orgId) throw new APIError(\"BAD_REQUEST\", { message: \"Organization ID is required\" });\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: orgId\n\t})) throw new APIError(\"FORBIDDEN\", { message: \"You are not a member of this organization\" });\n\tconst invitations = await adapter.listInvitations({ organizationId: orgId });\n\treturn ctx.json(invitations);\n});\n/**\n* List all invitations a user has received\n*/\nconst listUserInvitations = (options) => createAuthEndpoint(\"/organization/list-user-invitations\", {\n\tmethod: \"GET\",\n\tuse: [orgMiddleware],\n\tquery: z.object({ email: z.string().meta({ description: \"The email of the user to list invitations for. This only works for server side API calls.\" }).optional() }).optional()\n}, async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (ctx.request && ctx.query?.email) throw new APIError(\"BAD_REQUEST\", { message: \"User email cannot be passed for client side API calls.\" });\n\tconst userEmail = session?.user.email || ctx.query?.email;\n\tif (!userEmail) throw new APIError(\"BAD_REQUEST\", { message: \"Missing session headers, or email query parameter.\" });\n\tconst invitations = await getOrgAdapter(ctx.context, options).listUserInvitations(userEmail);\n\treturn ctx.json(invitations);\n});\n\n//#endregion\n//#region src/plugins/organization/routes/crud-members.ts\nconst addMember = (option) => {\n\tconst additionalFieldsSchema = toZodSchema({\n\t\tfields: option?.schema?.member?.additionalFields || {},\n\t\tisClientSide: true\n\t});\n\tconst baseSchema = z.object({\n\t\tuserId: z.coerce.string().meta({ description: \"The user Id which represents the user to be added as a member. If `null` is provided, then it's expected to provide session headers. Eg: \\\"user-id\\\"\" }),\n\t\trole: z.union([z.string(), z.array(z.string())]).meta({ description: \"The role(s) to assign to the new member. Eg: [\\\"admin\\\", \\\"sale\\\"]\" }),\n\t\torganizationId: z.string().meta({ description: \"An optional organization ID to pass. If not provided, will default to the user's active organization. Eg: \\\"org-id\\\"\" }).optional(),\n\t\tteamId: z.string().meta({ description: \"An optional team ID to add the member to. Eg: \\\"team-id\\\"\" }).optional()\n\t});\n\treturn createAuthEndpoint(\"/organization/add-member\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({\n\t\t\t...baseSchema.shape,\n\t\t\t...additionalFieldsSchema.shape\n\t\t}),\n\t\tuse: [orgMiddleware],\n\t\tmetadata: {\n\t\t\tSERVER_ONLY: true,\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\toperationId: \"addOrganizationMember\",\n\t\t\t\tdescription: \"Add a member to an organization\"\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = ctx.body.userId ? await getSessionFromCtx(ctx).catch((e) => null) : null;\n\t\tconst orgId = ctx.body.organizationId || session?.session.activeOrganizationId;\n\t\tif (!orgId) return ctx.json(null, {\n\t\t\tstatus: 400,\n\t\t\tbody: { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t\t});\n\t\tconst teamId = \"teamId\" in ctx.body ? ctx.body.teamId : void 0;\n\t\tif (teamId && !ctx.context.orgOptions.teams?.enabled) {\n\t\t\tctx.context.logger.error(\"Teams are not enabled\");\n\t\t\tthrow new APIError(\"BAD_REQUEST\", { message: \"Teams are not enabled\" });\n\t\t}\n\t\tconst adapter = getOrgAdapter(ctx.context, option);\n\t\tconst user = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\t\tif (!user) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.USER_NOT_FOUND });\n\t\tif (await adapter.findMemberByEmail({\n\t\t\temail: user.email,\n\t\t\torganizationId: orgId\n\t\t})) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\tif (teamId) {\n\t\t\tconst team = await adapter.findTeamById({\n\t\t\t\tteamId,\n\t\t\t\torganizationId: orgId\n\t\t\t});\n\t\t\tif (!team || team.organizationId !== orgId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\t\t}\n\t\tconst membershipLimit = ctx.context.orgOptions?.membershipLimit || 100;\n\t\tif (await adapter.countMembers({ organizationId: orgId }) >= membershipLimit) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_MEMBERSHIP_LIMIT_REACHED });\n\t\tconst { role: _, userId: __, organizationId: ___, ...additionalFields } = ctx.body;\n\t\tconst organization$1 = await adapter.findOrganizationById(orgId);\n\t\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tlet memberData = {\n\t\t\torganizationId: orgId,\n\t\t\tuserId: user.id,\n\t\t\trole: parseRoles(ctx.body.role),\n\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t...additionalFields ? additionalFields : {}\n\t\t};\n\t\tif (option?.organizationHooks?.beforeAddMember) {\n\t\t\tconst response = await option?.organizationHooks.beforeAddMember({\n\t\t\t\tmember: {\n\t\t\t\t\tuserId: user.id,\n\t\t\t\t\torganizationId: orgId,\n\t\t\t\t\trole: parseRoles(ctx.body.role),\n\t\t\t\t\t...additionalFields\n\t\t\t\t},\n\t\t\t\tuser,\n\t\t\t\torganization: organization$1\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) memberData = {\n\t\t\t\t...memberData,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst createdMember = await adapter.createMember(memberData);\n\t\tif (teamId) await adapter.findOrCreateTeamMember({\n\t\t\tuserId: user.id,\n\t\t\tteamId\n\t\t});\n\t\tif (option?.organizationHooks?.afterAddMember) await option?.organizationHooks.afterAddMember({\n\t\t\tmember: createdMember,\n\t\t\tuser,\n\t\t\torganization: organization$1\n\t\t});\n\t\treturn ctx.json(createdMember);\n\t});\n};\nconst removeMember = (options) => createAuthEndpoint(\"/organization/remove-member\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\tmemberIdOrEmail: z.string().meta({ description: \"The ID or email of the member to remove\" }),\n\t\torganizationId: z.string().meta({ description: \"The ID of the organization to remove the member from. If not provided, the active organization will be used. Eg: \\\"org-id\\\"\" }).optional()\n\t}),\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Remove a member from an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { member: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\t\trole: { type: \"string\" }\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\"role\"\n\t\t\t\t\t]\n\t\t\t\t} },\n\t\t\t\trequired: [\"member\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n\tif (!organizationId) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t});\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t});\n\tif (!member) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tlet toBeRemovedMember = null;\n\tif (ctx.body.memberIdOrEmail.includes(\"@\")) toBeRemovedMember = await adapter.findMemberByEmail({\n\t\temail: ctx.body.memberIdOrEmail,\n\t\torganizationId\n\t});\n\telse {\n\t\tconst result = await adapter.findMemberById(ctx.body.memberIdOrEmail);\n\t\tif (!result) toBeRemovedMember = null;\n\t\telse {\n\t\t\tconst { user: _user, ...member$1 } = result;\n\t\t\ttoBeRemovedMember = member$1;\n\t\t}\n\t}\n\tif (!toBeRemovedMember) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tconst roles = toBeRemovedMember.role.split(\",\");\n\tconst creatorRole = ctx.context.orgOptions?.creatorRole || \"owner\";\n\tif (roles.includes(creatorRole)) {\n\t\tif (member.role !== creatorRole) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER });\n\t\tconst { members } = await adapter.listMembers({ organizationId });\n\t\tif (members.filter((member$1) => {\n\t\t\treturn member$1.role.split(\",\").includes(creatorRole);\n\t\t}).length <= 1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER });\n\t}\n\tif (!await hasPermission({\n\t\trole: member.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { member: [\"delete\"] },\n\t\torganizationId\n\t}, ctx)) throw new APIError(\"UNAUTHORIZED\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER });\n\tif (toBeRemovedMember?.organizationId !== organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tconst organization$1 = await adapter.findOrganizationById(organizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst userBeingRemoved = await ctx.context.internalAdapter.findUserById(toBeRemovedMember.userId);\n\tif (!userBeingRemoved) throw new APIError(\"BAD_REQUEST\", { message: \"User not found\" });\n\tif (options?.organizationHooks?.beforeRemoveMember) await options?.organizationHooks.beforeRemoveMember({\n\t\tmember: toBeRemovedMember,\n\t\tuser: userBeingRemoved,\n\t\torganization: organization$1\n\t});\n\tawait adapter.deleteMember({\n\t\tmemberId: toBeRemovedMember.id,\n\t\torganizationId,\n\t\tuserId: toBeRemovedMember.userId\n\t});\n\tif (session.user.id === toBeRemovedMember.userId && session.session.activeOrganizationId === toBeRemovedMember.organizationId) await adapter.setActiveOrganization(session.session.token, null, ctx);\n\tif (options?.organizationHooks?.afterRemoveMember) await options?.organizationHooks.afterRemoveMember({\n\t\tmember: toBeRemovedMember,\n\t\tuser: userBeingRemoved,\n\t\torganization: organization$1\n\t});\n\treturn ctx.json({ member: toBeRemovedMember });\n});\nconst updateMemberRole = (option) => createAuthEndpoint(\"/organization/update-member-role\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\trole: z.union([z.string(), z.array(z.string())]).meta({ description: \"The new role to be applied. This can be a string or array of strings representing the roles. Eg: [\\\"admin\\\", \\\"sale\\\"]\" }),\n\t\tmemberId: z.string().meta({ description: \"The member id to apply the role update to. Eg: \\\"member-id\\\"\" }),\n\t\torganizationId: z.string().meta({ description: \"An optional organization ID which the member is a part of to apply the role update. If not provided, you must provide session headers to get the active organization. Eg: \\\"organization-id\\\"\" }).optional()\n\t}),\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: {\n\t\t$Infer: { body: {} },\n\t\topenapi: {\n\t\t\toperationId: \"updateOrganizationMemberRole\",\n\t\t\tdescription: \"Update the role of a member in an organization\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { member: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\t\t\trole: { type: \"string\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\t\"role\"\n\t\t\t\t\t\t]\n\t\t\t\t\t} },\n\t\t\t\t\trequired: [\"member\"]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!ctx.body.role) throw new APIError(\"BAD_REQUEST\");\n\tconst organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n\tif (!organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n\tconst roleToSet = Array.isArray(ctx.body.role) ? ctx.body.role : ctx.body.role ? [ctx.body.role] : [];\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t});\n\tif (!member) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tconst toBeUpdatedMember = member.id !== ctx.body.memberId ? await adapter.findMemberById(ctx.body.memberId) : member;\n\tif (!toBeUpdatedMember) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tif (!(toBeUpdatedMember.organizationId === organizationId)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER });\n\tconst creatorRole = ctx.context.orgOptions?.creatorRole || \"owner\";\n\tconst updatingMemberRoles = member.role.split(\",\");\n\tconst isUpdatingCreator = toBeUpdatedMember.role.split(\",\").includes(creatorRole);\n\tconst updaterIsCreator = updatingMemberRoles.includes(creatorRole);\n\tconst isSettingCreatorRole = roleToSet.includes(creatorRole);\n\tconst memberIsUpdatingThemselves = member.id === toBeUpdatedMember.id;\n\tif (isUpdatingCreator && !updaterIsCreator || isSettingCreatorRole && !updaterIsCreator) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER });\n\tif (updaterIsCreator && memberIsUpdatingThemselves) {\n\t\tif ((await ctx.context.adapter.findMany({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId\n\t\t\t}]\n\t\t})).filter((member$1) => {\n\t\t\treturn member$1.role.split(\",\").includes(creatorRole);\n\t\t}).length <= 1 && !isSettingCreatorRole) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER });\n\t}\n\tif (!await hasPermission({\n\t\trole: member.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { member: [\"update\"] },\n\t\tallowCreatorAllPermissions: true,\n\t\torganizationId\n\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER });\n\tconst organization$1 = await adapter.findOrganizationById(organizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst userBeingUpdated = await ctx.context.internalAdapter.findUserById(toBeUpdatedMember.userId);\n\tif (!userBeingUpdated) throw new APIError(\"BAD_REQUEST\", { message: \"User not found\" });\n\tconst previousRole = toBeUpdatedMember.role;\n\tconst newRole = parseRoles(ctx.body.role);\n\tif (option?.organizationHooks?.beforeUpdateMemberRole) {\n\t\tconst response = await option?.organizationHooks.beforeUpdateMemberRole({\n\t\t\tmember: toBeUpdatedMember,\n\t\t\tnewRole,\n\t\t\tuser: userBeingUpdated,\n\t\t\torganization: organization$1\n\t\t});\n\t\tif (response && typeof response === \"object\" && \"data\" in response) {\n\t\t\tconst updatedMember$1 = await adapter.updateMember(ctx.body.memberId, response.data.role || newRole);\n\t\t\tif (!updatedMember$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\t\t\tif (option?.organizationHooks?.afterUpdateMemberRole) await option?.organizationHooks.afterUpdateMemberRole({\n\t\t\t\tmember: updatedMember$1,\n\t\t\t\tpreviousRole,\n\t\t\t\tuser: userBeingUpdated,\n\t\t\t\torganization: organization$1\n\t\t\t});\n\t\t\treturn ctx.json(updatedMember$1);\n\t\t}\n\t}\n\tconst updatedMember = await adapter.updateMember(ctx.body.memberId, newRole);\n\tif (!updatedMember) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tif (option?.organizationHooks?.afterUpdateMemberRole) await option?.organizationHooks.afterUpdateMemberRole({\n\t\tmember: updatedMember,\n\t\tpreviousRole,\n\t\tuser: userBeingUpdated,\n\t\torganization: organization$1\n\t});\n\treturn ctx.json(updatedMember);\n});\nconst getActiveMember = (options) => createAuthEndpoint(\"/organization/get-active-member\", {\n\tmethod: \"GET\",\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Get the member details of the active organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\trole: { type: \"string\" }\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"id\",\n\t\t\t\t\t\"userId\",\n\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\"role\"\n\t\t\t\t]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst organizationId = session.session.activeOrganizationId;\n\tif (!organizationId) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t});\n\tconst member = await getOrgAdapter(ctx.context, options).findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t});\n\tif (!member) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND }\n\t});\n\treturn ctx.json(member);\n});\nconst leaveOrganization = (options) => createAuthEndpoint(\"/organization/leave\", {\n\tmethod: \"POST\",\n\tbody: z.object({ organizationId: z.string().meta({ description: \"The organization Id for the member to leave. Eg: \\\"organization-id\\\"\" }) }),\n\trequireHeaders: true,\n\tuse: [sessionMiddleware, orgMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: ctx.body.organizationId\n\t});\n\tif (!member) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tconst creatorRole = ctx.context.orgOptions?.creatorRole || \"owner\";\n\tif (member.role.split(\",\").includes(creatorRole)) {\n\t\tif ((await ctx.context.adapter.findMany({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: ctx.body.organizationId\n\t\t\t}]\n\t\t})).filter((member$1) => member$1.role.split(\",\").includes(creatorRole)).length <= 1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER });\n\t}\n\tawait adapter.deleteMember({\n\t\tmemberId: member.id,\n\t\torganizationId: ctx.body.organizationId,\n\t\tuserId: session.user.id\n\t});\n\tif (session.session.activeOrganizationId === ctx.body.organizationId) await adapter.setActiveOrganization(session.session.token, null, ctx);\n\treturn ctx.json(member);\n});\nconst listMembers = (options) => createAuthEndpoint(\"/organization/list-members\", {\n\tmethod: \"GET\",\n\tquery: z.object({\n\t\tlimit: z.string().meta({ description: \"The number of users to return\" }).or(z.number()).optional(),\n\t\toffset: z.string().meta({ description: \"The offset to start from\" }).or(z.number()).optional(),\n\t\tsortBy: z.string().meta({ description: \"The field to sort by\" }).optional(),\n\t\tsortDirection: z.enum([\"asc\", \"desc\"]).meta({ description: \"The direction to sort by\" }).optional(),\n\t\tfilterField: z.string().meta({ description: \"The field to filter by\" }).optional(),\n\t\tfilterValue: z.string().meta({ description: \"The value to filter by\" }).or(z.number()).or(z.boolean()).optional(),\n\t\tfilterOperator: z.enum([\n\t\t\t\"eq\",\n\t\t\t\"ne\",\n\t\t\t\"lt\",\n\t\t\t\"lte\",\n\t\t\t\"gt\",\n\t\t\t\"gte\",\n\t\t\t\"contains\"\n\t\t]).meta({ description: \"The operator to use for the filter\" }).optional(),\n\t\torganizationId: z.string().meta({ description: \"The organization ID to list members for. If not provided, will default to the user's active organization. Eg: \\\"organization-id\\\"\" }).optional(),\n\t\torganizationSlug: z.string().meta({ description: \"The organization slug to list members for. If not provided, will default to the user's active organization. Eg: \\\"organization-slug\\\"\" }).optional()\n\t}).optional(),\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tlet organizationId = ctx.query?.organizationId || session.session.activeOrganizationId;\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tif (ctx.query?.organizationSlug) {\n\t\tconst organization$1 = await adapter.findOrganizationBySlug(ctx.query?.organizationSlug);\n\t\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\torganizationId = organization$1.id;\n\t}\n\tif (!organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t})) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\tconst { members, total } = await adapter.listMembers({\n\t\torganizationId,\n\t\tlimit: ctx.query?.limit ? Number(ctx.query.limit) : void 0,\n\t\toffset: ctx.query?.offset ? Number(ctx.query.offset) : void 0,\n\t\tsortBy: ctx.query?.sortBy,\n\t\tsortOrder: ctx.query?.sortDirection,\n\t\tfilter: ctx.query?.filterField ? {\n\t\t\tfield: ctx.query?.filterField,\n\t\t\toperator: ctx.query.filterOperator,\n\t\t\tvalue: ctx.query.filterValue\n\t\t} : void 0\n\t});\n\treturn ctx.json({\n\t\tmembers,\n\t\ttotal\n\t});\n});\nconst getActiveMemberRole = (options) => createAuthEndpoint(\"/organization/get-active-member-role\", {\n\tmethod: \"GET\",\n\tquery: z.object({\n\t\tuserId: z.string().meta({ description: \"The user ID to get the role for. If not provided, will default to the current user's\" }).optional(),\n\t\torganizationId: z.string().meta({ description: \"The organization ID to list members for. If not provided, will default to the user's active organization. Eg: \\\"organization-id\\\"\" }).optional(),\n\t\torganizationSlug: z.string().meta({ description: \"The organization slug to list members for. If not provided, will default to the user's active organization. Eg: \\\"organization-slug\\\"\" }).optional()\n\t}).optional(),\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tlet organizationId = ctx.query?.organizationId || session.session.activeOrganizationId;\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tif (ctx.query?.organizationSlug) {\n\t\tconst organization$1 = await adapter.findOrganizationBySlug(ctx.query?.organizationSlug);\n\t\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\torganizationId = organization$1.id;\n\t}\n\tif (!organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst isMember = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t});\n\tif (!isMember) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\tif (!ctx.query?.userId) return ctx.json({ role: isMember.role });\n\tconst userIdToGetRole = ctx.query?.userId;\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: userIdToGetRole,\n\t\torganizationId\n\t});\n\tif (!member) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\treturn ctx.json({ role: member?.role });\n});\n\n//#endregion\n//#region src/plugins/organization/routes/crud-org.ts\nconst createOrganization = (options) => {\n\tconst additionalFieldsSchema = toZodSchema({\n\t\tfields: options?.schema?.organization?.additionalFields || {},\n\t\tisClientSide: true\n\t});\n\tconst baseSchema = z.object({\n\t\tname: z.string().min(1).meta({ description: \"The name of the organization\" }),\n\t\tslug: z.string().min(1).meta({ description: \"The slug of the organization\" }),\n\t\tuserId: z.coerce.string().meta({ description: \"The user id of the organization creator. If not provided, the current user will be used. Should only be used by admins or when called by the server. server-only. Eg: \\\"user-id\\\"\" }).optional(),\n\t\tlogo: z.string().meta({ description: \"The logo of the organization\" }).optional(),\n\t\tmetadata: z.record(z.string(), z.any()).meta({ description: \"The metadata of the organization\" }).optional(),\n\t\tkeepCurrentActiveOrganization: z.boolean().meta({ description: \"Whether to keep the current active organization active after creating a new one. Eg: true\" }).optional()\n\t});\n\treturn createAuthEndpoint(\"/organization/create\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({\n\t\t\t...baseSchema.shape,\n\t\t\t...additionalFieldsSchema.shape\n\t\t}),\n\t\tuse: [orgMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Create an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"The organization that was created\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/Organization\"\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = await getSessionFromCtx(ctx);\n\t\tif (!session && (ctx.request || ctx.headers)) throw new APIError(\"UNAUTHORIZED\");\n\t\tlet user = session?.user || null;\n\t\tif (!user) {\n\t\t\tif (!ctx.body.userId) throw new APIError(\"UNAUTHORIZED\");\n\t\t\tuser = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\t\t}\n\t\tif (!user) return ctx.json(null, { status: 401 });\n\t\tconst options$1 = ctx.context.orgOptions;\n\t\tif (!(typeof options$1?.allowUserToCreateOrganization === \"function\" ? await options$1.allowUserToCreateOrganization(user) : options$1?.allowUserToCreateOrganization === void 0 ? true : options$1.allowUserToCreateOrganization)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION });\n\t\tconst adapter = getOrgAdapter(ctx.context, options$1);\n\t\tconst userOrganizations = await adapter.listOrganizations(user.id);\n\t\tif (typeof options$1.organizationLimit === \"number\" ? userOrganizations.length >= options$1.organizationLimit : typeof options$1.organizationLimit === \"function\" ? await options$1.organizationLimit(user) : false) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS });\n\t\tif (await adapter.findOrganizationBySlug(ctx.body.slug)) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_ALREADY_EXISTS });\n\t\tlet { keepCurrentActiveOrganization: _, userId: __, ...orgData } = ctx.body;\n\t\tif (options$1.organizationCreation?.beforeCreate) {\n\t\t\tconst response = await options$1.organizationCreation.beforeCreate({\n\t\t\t\torganization: {\n\t\t\t\t\t...orgData,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\tuser\n\t\t\t}, ctx.request);\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) orgData = {\n\t\t\t\t...ctx.body,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tif (options$1?.organizationHooks?.beforeCreateOrganization) {\n\t\t\tconst response = await options$1?.organizationHooks.beforeCreateOrganization({\n\t\t\t\torganization: orgData,\n\t\t\t\tuser\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) orgData = {\n\t\t\t\t...ctx.body,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst organization$1 = await adapter.createOrganization({ organization: {\n\t\t\t...orgData,\n\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t} });\n\t\tlet member;\n\t\tlet teamMember = null;\n\t\tlet data = {\n\t\t\tuserId: user.id,\n\t\t\torganizationId: organization$1.id,\n\t\t\trole: ctx.context.orgOptions.creatorRole || \"owner\"\n\t\t};\n\t\tif (options$1?.organizationHooks?.beforeAddMember) {\n\t\t\tconst response = await options$1?.organizationHooks.beforeAddMember({\n\t\t\t\tmember: {\n\t\t\t\t\tuserId: user.id,\n\t\t\t\t\torganizationId: organization$1.id,\n\t\t\t\t\trole: ctx.context.orgOptions.creatorRole || \"owner\"\n\t\t\t\t},\n\t\t\t\tuser,\n\t\t\t\torganization: organization$1\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) data = {\n\t\t\t\t...data,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tmember = await adapter.createMember(data);\n\t\tif (options$1?.organizationHooks?.afterAddMember) await options$1?.organizationHooks.afterAddMember({\n\t\t\tmember,\n\t\t\tuser,\n\t\t\torganization: organization$1\n\t\t});\n\t\tif (options$1?.teams?.enabled && options$1.teams.defaultTeam?.enabled !== false) {\n\t\t\tlet teamData = {\n\t\t\t\torganizationId: organization$1.id,\n\t\t\t\tname: `${organization$1.name}`,\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t};\n\t\t\tif (options$1?.organizationHooks?.beforeCreateTeam) {\n\t\t\t\tconst response = await options$1?.organizationHooks.beforeCreateTeam({\n\t\t\t\t\tteam: {\n\t\t\t\t\t\torganizationId: organization$1.id,\n\t\t\t\t\t\tname: `${organization$1.name}`\n\t\t\t\t\t},\n\t\t\t\t\tuser,\n\t\t\t\t\torganization: organization$1\n\t\t\t\t});\n\t\t\t\tif (response && typeof response === \"object\" && \"data\" in response) teamData = {\n\t\t\t\t\t...teamData,\n\t\t\t\t\t...response.data\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst defaultTeam = await options$1.teams.defaultTeam?.customCreateDefaultTeam?.(organization$1, ctx) || await adapter.createTeam(teamData);\n\t\t\tteamMember = await adapter.findOrCreateTeamMember({\n\t\t\t\tteamId: defaultTeam.id,\n\t\t\t\tuserId: user.id\n\t\t\t});\n\t\t\tif (options$1?.organizationHooks?.afterCreateTeam) await options$1?.organizationHooks.afterCreateTeam({\n\t\t\t\tteam: defaultTeam,\n\t\t\t\tuser,\n\t\t\t\torganization: organization$1\n\t\t\t});\n\t\t}\n\t\tif (options$1.organizationCreation?.afterCreate) await options$1.organizationCreation.afterCreate({\n\t\t\torganization: organization$1,\n\t\t\tuser,\n\t\t\tmember\n\t\t}, ctx.request);\n\t\tif (options$1?.organizationHooks?.afterCreateOrganization) await options$1?.organizationHooks.afterCreateOrganization({\n\t\t\torganization: organization$1,\n\t\t\tuser,\n\t\t\tmember\n\t\t});\n\t\tif (ctx.context.session && !ctx.body.keepCurrentActiveOrganization) await adapter.setActiveOrganization(ctx.context.session.session.token, organization$1.id, ctx);\n\t\tif (teamMember && ctx.context.session && !ctx.body.keepCurrentActiveOrganization) await adapter.setActiveTeam(ctx.context.session.session.token, teamMember.teamId, ctx);\n\t\treturn ctx.json({\n\t\t\t...organization$1,\n\t\t\tmetadata: organization$1.metadata && typeof organization$1.metadata === \"string\" ? JSON.parse(organization$1.metadata) : organization$1.metadata,\n\t\t\tmembers: [member]\n\t\t});\n\t});\n};\nconst checkOrganizationSlug = (options) => createAuthEndpoint(\"/organization/check-slug\", {\n\tmethod: \"POST\",\n\tbody: z.object({ slug: z.string().meta({ description: \"The organization slug to check. Eg: \\\"my-org\\\"\" }) }),\n\tuse: [requestOnlySessionMiddleware, orgMiddleware]\n}, async (ctx) => {\n\tif (!await getOrgAdapter(ctx.context, options).findOrganizationBySlug(ctx.body.slug)) return ctx.json({ status: true });\n\tthrow new APIError(\"BAD_REQUEST\", { message: \"slug is taken\" });\n});\nconst updateOrganization = (options) => {\n\tconst additionalFieldsSchema = toZodSchema({\n\t\tfields: options?.schema?.organization?.additionalFields || {},\n\t\tisClientSide: true\n\t});\n\treturn createAuthEndpoint(\"/organization/update\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({\n\t\t\tdata: z.object({\n\t\t\t\t...additionalFieldsSchema.shape,\n\t\t\t\tname: z.string().min(1).meta({ description: \"The name of the organization\" }).optional(),\n\t\t\t\tslug: z.string().min(1).meta({ description: \"The slug of the organization\" }).optional(),\n\t\t\t\tlogo: z.string().meta({ description: \"The logo of the organization\" }).optional(),\n\t\t\t\tmetadata: z.record(z.string(), z.any()).meta({ description: \"The metadata of the organization\" }).optional()\n\t\t\t}).partial(),\n\t\t\torganizationId: z.string().meta({ description: \"The organization ID. Eg: \\\"org-id\\\"\" }).optional()\n\t\t}),\n\t\trequireHeaders: true,\n\t\tuse: [orgMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Update an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"The updated organization\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/Organization\"\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = await ctx.context.getSession(ctx);\n\t\tif (!session) throw new APIError(\"UNAUTHORIZED\", { message: \"User not found\" });\n\t\tconst organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n\t\tif (!organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tconst adapter = getOrgAdapter(ctx.context, options);\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t\tif (!await hasPermission({\n\t\t\tpermissions: { organization: [\"update\"] },\n\t\t\trole: member.role,\n\t\t\toptions: ctx.context.orgOptions,\n\t\t\torganizationId\n\t\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION });\n\t\tif (typeof ctx.body.data.slug === \"string\") {\n\t\t\tconst existingOrganization = await adapter.findOrganizationBySlug(ctx.body.data.slug);\n\t\t\tif (existingOrganization && existingOrganization.id !== organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_SLUG_ALREADY_TAKEN });\n\t\t}\n\t\tif (options?.organizationHooks?.beforeUpdateOrganization) {\n\t\t\tconst response = await options.organizationHooks.beforeUpdateOrganization({\n\t\t\t\torganization: ctx.body.data,\n\t\t\t\tuser: session.user,\n\t\t\t\tmember\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) ctx.body.data = {\n\t\t\t\t...ctx.body.data,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst updatedOrg = await adapter.updateOrganization(organizationId, ctx.body.data);\n\t\tif (options?.organizationHooks?.afterUpdateOrganization) await options.organizationHooks.afterUpdateOrganization({\n\t\t\torganization: updatedOrg,\n\t\t\tuser: session.user,\n\t\t\tmember\n\t\t});\n\t\treturn ctx.json(updatedOrg);\n\t});\n};\nconst deleteOrganization = (options) => {\n\treturn createAuthEndpoint(\"/organization/delete\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({ organizationId: z.string().meta({ description: \"The organization id to delete\" }) }),\n\t\trequireHeaders: true,\n\t\tuse: [orgMiddleware],\n\t\tmetadata: { openapi: {\n\t\t\tdescription: \"Delete an organization\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The organization id that was deleted\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tif (ctx.context.orgOptions.organizationDeletion?.disabled || ctx.context.orgOptions.disableOrganizationDeletion) {\n\t\t\tif (ctx.context.orgOptions.organizationDeletion?.disabled) ctx.context.logger.info(\"`organizationDeletion.disabled` is deprecated. Use `disableOrganizationDeletion` instead\");\n\t\t\tthrow new APIError(\"NOT_FOUND\", { message: \"Organization deletion is disabled\" });\n\t\t}\n\t\tconst session = await ctx.context.getSession(ctx);\n\t\tif (!session) throw new APIError(\"UNAUTHORIZED\", { status: 401 });\n\t\tconst organizationId = ctx.body.organizationId;\n\t\tif (!organizationId) return ctx.json(null, {\n\t\t\tstatus: 400,\n\t\t\tbody: { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND }\n\t\t});\n\t\tconst adapter = getOrgAdapter(ctx.context, options);\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t\tif (!await hasPermission({\n\t\t\trole: member.role,\n\t\t\tpermissions: { organization: [\"delete\"] },\n\t\t\torganizationId,\n\t\t\toptions: ctx.context.orgOptions\n\t\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION });\n\t\tif (organizationId === session.session.activeOrganizationId)\n /**\n\t\t* If the organization is deleted, we set the active organization to null\n\t\t*/\n\t\tawait adapter.setActiveOrganization(session.session.token, null, ctx);\n\t\tconst org = await adapter.findOrganizationById(organizationId);\n\t\tif (!org) throw new APIError(\"BAD_REQUEST\");\n\t\tif (options?.organizationHooks?.beforeDeleteOrganization) await options.organizationHooks.beforeDeleteOrganization({\n\t\t\torganization: org,\n\t\t\tuser: session.user\n\t\t});\n\t\tawait adapter.deleteOrganization(organizationId);\n\t\tif (options?.organizationHooks?.afterDeleteOrganization) await options.organizationHooks.afterDeleteOrganization({\n\t\t\torganization: org,\n\t\t\tuser: session.user\n\t\t});\n\t\treturn ctx.json(org);\n\t});\n};\nconst getFullOrganization = (options) => createAuthEndpoint(\"/organization/get-full-organization\", {\n\tmethod: \"GET\",\n\tquery: z.optional(z.object({\n\t\torganizationId: z.string().meta({ description: \"The organization id to get\" }).optional(),\n\t\torganizationSlug: z.string().meta({ description: \"The organization slug to get\" }).optional(),\n\t\tmembersLimit: z.number().or(z.string().transform((val) => parseInt(val))).meta({ description: \"The limit of members to get. By default, it uses the membershipLimit option which defaults to 100.\" }).optional()\n\t})),\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"getOrganization\",\n\t\tdescription: \"Get the full organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tdescription: \"The organization\",\n\t\t\t\t$ref: \"#/components/schemas/Organization\"\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst organizationId = ctx.query?.organizationSlug || ctx.query?.organizationId || session.session.activeOrganizationId;\n\tif (!organizationId) return ctx.json(null, { status: 200 });\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tconst organization$1 = await adapter.findFullOrganization({\n\t\torganizationId,\n\t\tisSlug: !!ctx.query?.organizationSlug,\n\t\tincludeTeams: ctx.context.orgOptions.teams?.enabled,\n\t\tmembersLimit: ctx.query?.membersLimit\n\t});\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (!await adapter.checkMembership({\n\t\tuserId: session.user.id,\n\t\torganizationId: organization$1.id\n\t})) {\n\t\tawait adapter.setActiveOrganization(session.session.token, null, ctx);\n\t\tthrow new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t}\n\treturn ctx.json(organization$1);\n});\nconst setActiveOrganization = (options) => {\n\treturn createAuthEndpoint(\"/organization/set-active\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({\n\t\t\torganizationId: z.string().meta({ description: \"The organization id to set as active. It can be null to unset the active organization. Eg: \\\"org-id\\\"\" }).nullable().optional(),\n\t\t\torganizationSlug: z.string().meta({ description: \"The organization slug to set as active. It can be null to unset the active organization if organizationId is not provided. Eg: \\\"org-slug\\\"\" }).optional()\n\t\t}),\n\t\tuse: [orgSessionMiddleware, orgMiddleware],\n\t\trequireHeaders: true,\n\t\tmetadata: { openapi: {\n\t\t\toperationId: \"setActiveOrganization\",\n\t\t\tdescription: \"Set the active organization\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"The organization\",\n\t\t\t\t\t$ref: \"#/components/schemas/Organization\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tconst adapter = getOrgAdapter(ctx.context, options);\n\t\tconst session = ctx.context.session;\n\t\tlet organizationId = ctx.body.organizationId;\n\t\tlet organizationSlug = ctx.body.organizationSlug;\n\t\tif (organizationId === null) {\n\t\t\tif (!session.session.activeOrganizationId) return ctx.json(null);\n\t\t\tawait setSessionCookie(ctx, {\n\t\t\t\tsession: await adapter.setActiveOrganization(session.session.token, null, ctx),\n\t\t\t\tuser: session.user\n\t\t\t});\n\t\t\treturn ctx.json(null);\n\t\t}\n\t\tif (!organizationId && !organizationSlug) {\n\t\t\tconst sessionOrgId = session.session.activeOrganizationId;\n\t\t\tif (!sessionOrgId) return ctx.json(null);\n\t\t\torganizationId = sessionOrgId;\n\t\t}\n\t\tif (organizationSlug && !organizationId) {\n\t\t\tconst organization$2 = await adapter.findOrganizationBySlug(organizationSlug);\n\t\t\tif (!organization$2) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\t\torganizationId = organization$2.id;\n\t\t}\n\t\tif (!organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tif (!await adapter.checkMembership({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t})) {\n\t\t\tawait adapter.setActiveOrganization(session.session.token, null, ctx);\n\t\t\tthrow new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t\t}\n\t\tlet organization$1 = await adapter.findOrganizationById(organizationId);\n\t\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tawait setSessionCookie(ctx, {\n\t\t\tsession: await adapter.setActiveOrganization(session.session.token, organization$1.id, ctx),\n\t\t\tuser: session.user\n\t\t});\n\t\treturn ctx.json(organization$1);\n\t});\n};\nconst listOrganizations = (options) => createAuthEndpoint(\"/organization/list\", {\n\tmethod: \"GET\",\n\tuse: [orgMiddleware, orgSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"List all organizations\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: { $ref: \"#/components/schemas/Organization\" }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst organizations = await getOrgAdapter(ctx.context, options).listOrganizations(ctx.context.session.user.id);\n\treturn ctx.json(organizations);\n});\n\n//#endregion\n//#region src/plugins/organization/schema.ts\nconst roleSchema = z.string();\nconst invitationStatus = z.enum([\n\t\"pending\",\n\t\"accepted\",\n\t\"rejected\",\n\t\"canceled\"\n]).default(\"pending\");\nconst organizationSchema = z.object({\n\tid: z.string().default(generateId),\n\tname: z.string(),\n\tslug: z.string(),\n\tlogo: z.string().nullish().optional(),\n\tmetadata: z.record(z.string(), z.unknown()).or(z.string().transform((v) => JSON.parse(v))).optional(),\n\tcreatedAt: z.date()\n});\nconst memberSchema = z.object({\n\tid: z.string().default(generateId),\n\torganizationId: z.string(),\n\tuserId: z.coerce.string(),\n\trole: roleSchema,\n\tcreatedAt: z.date().default(() => /* @__PURE__ */ new Date())\n});\nconst invitationSchema = z.object({\n\tid: z.string().default(generateId),\n\torganizationId: z.string(),\n\temail: z.string(),\n\trole: roleSchema,\n\tstatus: invitationStatus,\n\tteamId: z.string().nullish(),\n\tinviterId: z.string(),\n\texpiresAt: z.date(),\n\tcreatedAt: z.date().default(() => /* @__PURE__ */ new Date())\n});\nconst teamSchema = z.object({\n\tid: z.string().default(generateId),\n\tname: z.string().min(1),\n\torganizationId: z.string(),\n\tcreatedAt: z.date(),\n\tupdatedAt: z.date().optional()\n});\nconst teamMemberSchema = z.object({\n\tid: z.string().default(generateId),\n\tteamId: z.string(),\n\tuserId: z.string(),\n\tcreatedAt: z.date().default(() => /* @__PURE__ */ new Date())\n});\nconst organizationRoleSchema = z.object({\n\tid: z.string().default(generateId),\n\torganizationId: z.string(),\n\trole: z.string(),\n\tpermission: z.record(z.string(), z.array(z.string())),\n\tcreatedAt: z.date().default(() => /* @__PURE__ */ new Date()),\n\tupdatedAt: z.date().optional()\n});\nconst defaultRoles$1 = [\n\t\"admin\",\n\t\"member\",\n\t\"owner\"\n];\nconst defaultRolesSchema = z.union([z.enum(defaultRoles$1), z.array(z.enum(defaultRoles$1))]);\n\n//#endregion\n//#region src/plugins/organization/routes/crud-team.ts\nconst createTeam = (options) => {\n\tconst additionalFieldsSchema = toZodSchema({\n\t\tfields: options?.schema?.team?.additionalFields ?? {},\n\t\tisClientSide: true\n\t});\n\tconst baseSchema = z.object({\n\t\tname: z.string().meta({ description: \"The name of the team. Eg: \\\"my-team\\\"\" }),\n\t\torganizationId: z.string().meta({ description: \"The organization ID which the team will be created in. Defaults to the active organization. Eg: \\\"organization-id\\\"\" }).optional()\n\t});\n\treturn createAuthEndpoint(\"/organization/create-team\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({\n\t\t\t...baseSchema.shape,\n\t\t\t...additionalFieldsSchema.shape\n\t\t}),\n\t\tuse: [orgMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Create a new team within an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Team created successfully\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Unique identifier of the created team\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Name of the team\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\torganizationId: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"ID of the organization the team belongs to\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"Timestamp when the team was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"Timestamp when the team was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = await getSessionFromCtx(ctx);\n\t\tconst organizationId = ctx.body.organizationId || session?.session.activeOrganizationId;\n\t\tif (!session && (ctx.request || ctx.headers)) throw new APIError(\"UNAUTHORIZED\");\n\t\tif (!organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\tconst adapter = getOrgAdapter(ctx.context, options);\n\t\tif (session) {\n\t\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\t\tuserId: session.user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tif (!member) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION });\n\t\t\tif (!await hasPermission({\n\t\t\t\trole: member.role,\n\t\t\t\toptions: ctx.context.orgOptions,\n\t\t\t\tpermissions: { team: [\"create\"] },\n\t\t\t\torganizationId\n\t\t\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION });\n\t\t}\n\t\tconst existingTeams = await adapter.listTeams(organizationId);\n\t\tconst maximum = typeof ctx.context.orgOptions.teams?.maximumTeams === \"function\" ? await ctx.context.orgOptions.teams?.maximumTeams({\n\t\t\torganizationId,\n\t\t\tsession\n\t\t}, ctx) : ctx.context.orgOptions.teams?.maximumTeams;\n\t\tif (maximum ? existingTeams.length >= maximum : false) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS });\n\t\tconst { name, organizationId: _, ...additionalFields } = ctx.body;\n\t\tconst organization$1 = await adapter.findOrganizationById(organizationId);\n\t\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tlet teamData = {\n\t\t\tname,\n\t\t\torganizationId,\n\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t...additionalFields\n\t\t};\n\t\tif (options?.organizationHooks?.beforeCreateTeam) {\n\t\t\tconst response = await options?.organizationHooks.beforeCreateTeam({\n\t\t\t\tteam: {\n\t\t\t\t\tname,\n\t\t\t\t\torganizationId,\n\t\t\t\t\t...additionalFields\n\t\t\t\t},\n\t\t\t\tuser: session?.user,\n\t\t\t\torganization: organization$1\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) teamData = {\n\t\t\t\t...teamData,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst createdTeam = await adapter.createTeam(teamData);\n\t\tif (options?.organizationHooks?.afterCreateTeam) await options?.organizationHooks.afterCreateTeam({\n\t\t\tteam: createdTeam,\n\t\t\tuser: session?.user,\n\t\t\torganization: organization$1\n\t\t});\n\t\treturn ctx.json(createdTeam);\n\t});\n};\nconst removeTeam = (options) => createAuthEndpoint(\"/organization/remove-team\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\tteamId: z.string().meta({ description: `The team ID of the team to remove. Eg: \"team-id\"` }),\n\t\torganizationId: z.string().meta({ description: `The organization ID which the team falls under. If not provided, it will default to the user's active organization. Eg: \"organization-id\"` }).optional()\n\t}),\n\tuse: [orgMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Remove a team from an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Team removed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"Confirmation message indicating successful removal\",\n\t\t\t\t\tenum: [\"Team removed successfully.\"]\n\t\t\t\t} },\n\t\t\t\trequired: [\"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tconst organizationId = ctx.body.organizationId || session?.session.activeOrganizationId;\n\tif (!organizationId) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t});\n\tif (!session && (ctx.request || ctx.headers)) throw new APIError(\"UNAUTHORIZED\");\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tif (session) {\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member || session.session?.activeTeamId === ctx.body.teamId) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM });\n\t\tif (!await hasPermission({\n\t\t\trole: member.role,\n\t\t\toptions: ctx.context.orgOptions,\n\t\t\tpermissions: { team: [\"delete\"] },\n\t\t\torganizationId\n\t\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION });\n\t}\n\tconst team = await adapter.findTeamById({\n\t\tteamId: ctx.body.teamId,\n\t\torganizationId\n\t});\n\tif (!team || team.organizationId !== organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\tif (!ctx.context.orgOptions.teams?.allowRemovingAllTeams) {\n\t\tif ((await adapter.listTeams(organizationId)).length <= 1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.UNABLE_TO_REMOVE_LAST_TEAM });\n\t}\n\tconst organization$1 = await adapter.findOrganizationById(organizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (options?.organizationHooks?.beforeDeleteTeam) await options?.organizationHooks.beforeDeleteTeam({\n\t\tteam,\n\t\tuser: session?.user,\n\t\torganization: organization$1\n\t});\n\tawait adapter.deleteTeam(team.id);\n\tif (options?.organizationHooks?.afterDeleteTeam) await options?.organizationHooks.afterDeleteTeam({\n\t\tteam,\n\t\tuser: session?.user,\n\t\torganization: organization$1\n\t});\n\treturn ctx.json({ message: \"Team removed successfully.\" });\n});\nconst updateTeam = (options) => {\n\tconst additionalFieldsSchema = toZodSchema({\n\t\tfields: options?.schema?.team?.additionalFields ?? {},\n\t\tisClientSide: true\n\t});\n\treturn createAuthEndpoint(\"/organization/update-team\", {\n\t\tmethod: \"POST\",\n\t\tbody: z.object({\n\t\t\tteamId: z.string().meta({ description: `The ID of the team to be updated. Eg: \"team-id\"` }),\n\t\t\tdata: z.object({\n\t\t\t\t...teamSchema.shape,\n\t\t\t\t...additionalFieldsSchema.shape\n\t\t\t}).partial()\n\t\t}),\n\t\trequireHeaders: true,\n\t\tuse: [orgMiddleware, orgSessionMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Update an existing team in an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Team updated successfully\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Unique identifier of the updated team\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Updated name of the team\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\torganizationId: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"ID of the organization the team belongs to\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"Timestamp when the team was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"Timestamp when the team was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = ctx.context.session;\n\t\tconst organizationId = ctx.body.data.organizationId || session.session.activeOrganizationId;\n\t\tif (!organizationId) return ctx.json(null, {\n\t\t\tstatus: 400,\n\t\t\tbody: { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t\t});\n\t\tconst adapter = getOrgAdapter(ctx.context, options);\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM });\n\t\tif (!await hasPermission({\n\t\t\trole: member.role,\n\t\t\toptions: ctx.context.orgOptions,\n\t\t\tpermissions: { team: [\"update\"] },\n\t\t\torganizationId\n\t\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM });\n\t\tconst team = await adapter.findTeamById({\n\t\t\tteamId: ctx.body.teamId,\n\t\t\torganizationId\n\t\t});\n\t\tif (!team || team.organizationId !== organizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\t\tconst { name, organizationId: __, ...additionalFields } = ctx.body.data;\n\t\tconst organization$1 = await adapter.findOrganizationById(organizationId);\n\t\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tconst updates = {\n\t\t\tname,\n\t\t\t...additionalFields\n\t\t};\n\t\tif (options?.organizationHooks?.beforeUpdateTeam) {\n\t\t\tconst response = await options?.organizationHooks.beforeUpdateTeam({\n\t\t\t\tteam,\n\t\t\t\tupdates,\n\t\t\t\tuser: session.user,\n\t\t\t\torganization: organization$1\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) {\n\t\t\t\tconst modifiedUpdates = response.data;\n\t\t\t\tconst updatedTeam$1 = await adapter.updateTeam(team.id, modifiedUpdates);\n\t\t\t\tif (options?.organizationHooks?.afterUpdateTeam) await options?.organizationHooks.afterUpdateTeam({\n\t\t\t\t\tteam: updatedTeam$1,\n\t\t\t\t\tuser: session.user,\n\t\t\t\t\torganization: organization$1\n\t\t\t\t});\n\t\t\t\treturn ctx.json(updatedTeam$1);\n\t\t\t}\n\t\t}\n\t\tconst updatedTeam = await adapter.updateTeam(team.id, updates);\n\t\tif (options?.organizationHooks?.afterUpdateTeam) await options?.organizationHooks.afterUpdateTeam({\n\t\t\tteam: updatedTeam,\n\t\t\tuser: session.user,\n\t\t\torganization: organization$1\n\t\t});\n\t\treturn ctx.json(updatedTeam);\n\t});\n};\nconst listOrganizationTeams = (options) => createAuthEndpoint(\"/organization/list-teams\", {\n\tmethod: \"GET\",\n\tquery: z.optional(z.object({ organizationId: z.string().meta({ description: `The organization ID which the teams are under to list. Defaults to the users active organization. Eg: \"organization-id\"` }).optional() })),\n\tmetadata: { openapi: {\n\t\tdescription: \"List all teams in an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Teams retrieved successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Unique identifier of the team\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Name of the team\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\torganizationId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"ID of the organization the team belongs to\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"Timestamp when the team was created\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"Timestamp when the team was last updated\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tdescription: \"Array of team objects within the organization\"\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst organizationId = ctx.query?.organizationId || session?.session.activeOrganizationId;\n\tif (!organizationId) throw ctx.error(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst adapter = getOrgAdapter(ctx.context, options);\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: organizationId || \"\"\n\t})) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION });\n\tconst teams = await adapter.listTeams(organizationId);\n\treturn ctx.json(teams);\n});\nconst setActiveTeam = (options) => createAuthEndpoint(\"/organization/set-active-team\", {\n\tmethod: \"POST\",\n\tbody: z.object({ teamId: z.string().meta({ description: \"The team id to set as active. It can be null to unset the active team\" }).nullable().optional() }),\n\trequireHeaders: true,\n\tuse: [orgSessionMiddleware, orgMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Set the active team\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tdescription: \"The team\",\n\t\t\t\t$ref: \"#/components/schemas/Team\"\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n\tconst session = ctx.context.session;\n\tif (ctx.body.teamId === null) {\n\t\tif (!session.session.activeTeamId) return ctx.json(null);\n\t\tawait setSessionCookie(ctx, {\n\t\t\tsession: await adapter.setActiveTeam(session.session.token, null, ctx),\n\t\t\tuser: session.user\n\t\t});\n\t\treturn ctx.json(null);\n\t}\n\tlet teamId;\n\tif (!ctx.body.teamId) {\n\t\tconst sessionTeamId = session.session.activeTeamId;\n\t\tif (!sessionTeamId) return ctx.json(null);\n\t\telse teamId = sessionTeamId;\n\t} else teamId = ctx.body.teamId;\n\tconst team = await adapter.findTeamById({ teamId });\n\tif (!team) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\tif (!await adapter.findTeamMember({\n\t\tteamId,\n\t\tuserId: session.user.id\n\t})) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_TEAM });\n\tawait setSessionCookie(ctx, {\n\t\tsession: await adapter.setActiveTeam(session.session.token, team.id, ctx),\n\t\tuser: session.user\n\t});\n\treturn ctx.json(team);\n});\nconst listUserTeams = (options) => createAuthEndpoint(\"/organization/list-user-teams\", {\n\tmethod: \"GET\",\n\tmetadata: { openapi: {\n\t\tdescription: \"List all teams that the current user is a part of.\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Teams retrieved successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"The team\",\n\t\t\t\t\t$ref: \"#/components/schemas/Team\"\n\t\t\t\t},\n\t\t\t\tdescription: \"Array of team objects within the organization\"\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst teams = await getOrgAdapter(ctx.context, ctx.context.orgOptions).listTeamsByUser({ userId: session.user.id });\n\treturn ctx.json(teams);\n});\nconst listTeamMembers = (options) => createAuthEndpoint(\"/organization/list-team-members\", {\n\tmethod: \"GET\",\n\tquery: z.optional(z.object({ teamId: z.string().optional().meta({ description: \"The team whose members we should return. If this is not provided the members of the current active team get returned.\" }) })),\n\tmetadata: { openapi: {\n\t\tdescription: \"List the members of the given team.\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Teams retrieved successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"The team member\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Unique identifier of the team member\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The user ID of the team member\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tteamId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The team ID of the team the team member is in\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"Timestamp when the team member was created\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"teamId\",\n\t\t\t\t\t\t\"createdAt\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tdescription: \"Array of team member objects within the team\"\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n\tlet teamId = ctx.query?.teamId || session?.session.activeTeamId;\n\tif (!teamId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.YOU_DO_NOT_HAVE_AN_ACTIVE_TEAM });\n\tif (!await adapter.findTeamMember({\n\t\tuserId: session.user.id,\n\t\tteamId\n\t})) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_TEAM });\n\tconst members = await adapter.listTeamMembers({ teamId });\n\treturn ctx.json(members);\n});\nconst addTeamMember = (options) => createAuthEndpoint(\"/organization/add-team-member\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\tteamId: z.string().meta({ description: \"The team the user should be a member of.\" }),\n\t\tuserId: z.coerce.string().meta({ description: \"The user Id which represents the user to be added as a member.\" })\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"The newly created member\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Team member created successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tdescription: \"The team member\",\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Unique identifier of the team member\"\n\t\t\t\t\t},\n\t\t\t\t\tuserId: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The user ID of the team member\"\n\t\t\t\t\t},\n\t\t\t\t\tteamId: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The team ID of the team the team member is in\"\n\t\t\t\t\t},\n\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\tdescription: \"Timestamp when the team member was created\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"id\",\n\t\t\t\t\t\"userId\",\n\t\t\t\t\t\"teamId\",\n\t\t\t\t\t\"createdAt\"\n\t\t\t\t]\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n\tif (!session.session.activeOrganizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst currentMember = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: session.session.activeOrganizationId\n\t});\n\tif (!currentMember) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\tif (!await hasPermission({\n\t\trole: currentMember.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { member: [\"update\"] },\n\t\torganizationId: session.session.activeOrganizationId\n\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER });\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: ctx.body.userId,\n\t\torganizationId: session.session.activeOrganizationId\n\t})) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\tconst team = await adapter.findTeamById({\n\t\tteamId: ctx.body.teamId,\n\t\torganizationId: session.session.activeOrganizationId\n\t});\n\tif (!team) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\tconst organization$1 = await adapter.findOrganizationById(session.session.activeOrganizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst userBeingAdded = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\tif (!userBeingAdded) throw new APIError(\"BAD_REQUEST\", { message: \"User not found\" });\n\tif (options?.organizationHooks?.beforeAddTeamMember) {\n\t\tconst response = await options?.organizationHooks.beforeAddTeamMember({\n\t\t\tteamMember: {\n\t\t\t\tteamId: ctx.body.teamId,\n\t\t\t\tuserId: ctx.body.userId\n\t\t\t},\n\t\t\tteam,\n\t\t\tuser: userBeingAdded,\n\t\t\torganization: organization$1\n\t\t});\n\t\tif (response && typeof response === \"object\" && \"data\" in response) {}\n\t}\n\tconst teamMember = await adapter.findOrCreateTeamMember({\n\t\tteamId: ctx.body.teamId,\n\t\tuserId: ctx.body.userId\n\t});\n\tif (options?.organizationHooks?.afterAddTeamMember) await options?.organizationHooks.afterAddTeamMember({\n\t\tteamMember,\n\t\tteam,\n\t\tuser: userBeingAdded,\n\t\torganization: organization$1\n\t});\n\treturn ctx.json(teamMember);\n});\nconst removeTeamMember = (options) => createAuthEndpoint(\"/organization/remove-team-member\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\tteamId: z.string().meta({ description: \"The team the user should be removed from.\" }),\n\t\tuserId: z.coerce.string().meta({ description: \"The user which should be removed from the team.\" })\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Remove a member from a team\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Team member removed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"Confirmation message indicating successful removal\",\n\t\t\t\t\tenum: [\"Team member removed successfully.\"]\n\t\t\t\t} },\n\t\t\t\trequired: [\"message\"]\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [orgMiddleware, orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = getOrgAdapter(ctx.context, ctx.context.orgOptions);\n\tif (!session.session.activeOrganizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst currentMember = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: session.session.activeOrganizationId\n\t});\n\tif (!currentMember) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\tif (!await hasPermission({\n\t\trole: currentMember.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { member: [\"delete\"] },\n\t\torganizationId: session.session.activeOrganizationId\n\t}, ctx)) throw new APIError(\"FORBIDDEN\", { message: ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER });\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: ctx.body.userId,\n\t\torganizationId: session.session.activeOrganizationId\n\t})) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\tconst team = await adapter.findTeamById({\n\t\tteamId: ctx.body.teamId,\n\t\torganizationId: session.session.activeOrganizationId\n\t});\n\tif (!team) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\tconst organization$1 = await adapter.findOrganizationById(session.session.activeOrganizationId);\n\tif (!organization$1) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst userBeingRemoved = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\tif (!userBeingRemoved) throw new APIError(\"BAD_REQUEST\", { message: \"User not found\" });\n\tconst teamMember = await adapter.findTeamMember({\n\t\tteamId: ctx.body.teamId,\n\t\tuserId: ctx.body.userId\n\t});\n\tif (!teamMember) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_TEAM });\n\tif (options?.organizationHooks?.beforeRemoveTeamMember) await options?.organizationHooks.beforeRemoveTeamMember({\n\t\tteamMember,\n\t\tteam,\n\t\tuser: userBeingRemoved,\n\t\torganization: organization$1\n\t});\n\tawait adapter.removeTeamMember({\n\t\tteamId: ctx.body.teamId,\n\t\tuserId: ctx.body.userId\n\t});\n\tif (options?.organizationHooks?.afterRemoveTeamMember) await options?.organizationHooks.afterRemoveTeamMember({\n\t\tteamMember,\n\t\tteam,\n\t\tuser: userBeingRemoved,\n\t\torganization: organization$1\n\t});\n\treturn ctx.json({ message: \"Team member removed successfully.\" });\n});\n\n//#endregion\n//#region src/plugins/organization/organization.ts\nfunction parseRoles(roles) {\n\treturn Array.isArray(roles) ? roles.join(\",\") : roles;\n}\nconst createHasPermission = (options) => {\n\treturn createAuthEndpoint(\"/organization/has-permission\", {\n\t\tmethod: \"POST\",\n\t\trequireHeaders: true,\n\t\tbody: z.object({ organizationId: z.string().optional() }).and(z.union([z.object({\n\t\t\tpermission: z.record(z.string(), z.array(z.string())),\n\t\t\tpermissions: z.undefined()\n\t\t}), z.object({\n\t\t\tpermission: z.undefined(),\n\t\t\tpermissions: z.record(z.string(), z.array(z.string()))\n\t\t})])),\n\t\tuse: [orgSessionMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Check if the user has permission\",\n\t\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tpermission: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"The permission to check\",\n\t\t\t\t\t\t\tdeprecated: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"The permission to check\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"permissions\"]\n\t\t\t\t} } } },\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\terror: { type: \"string\" },\n\t\t\t\t\t\t\tsuccess: { type: \"boolean\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"success\"]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst activeOrganizationId = ctx.body.organizationId || ctx.context.session.session.activeOrganizationId;\n\t\tif (!activeOrganizationId) throw new APIError(\"BAD_REQUEST\", { message: ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\tconst member = await getOrgAdapter(ctx.context, options).findMemberByOrgId({\n\t\t\tuserId: ctx.context.session.user.id,\n\t\t\torganizationId: activeOrganizationId\n\t\t});\n\t\tif (!member) throw new APIError(\"UNAUTHORIZED\", { message: ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t\tconst result = await hasPermission({\n\t\t\trole: member.role,\n\t\t\toptions: options || {},\n\t\t\tpermissions: ctx.body.permissions ?? ctx.body.permission,\n\t\t\torganizationId: activeOrganizationId\n\t\t}, ctx);\n\t\treturn ctx.json({\n\t\t\terror: null,\n\t\t\tsuccess: result\n\t\t});\n\t});\n};\nfunction organization(options) {\n\tlet endpoints = {\n\t\tcreateOrganization: createOrganization(options),\n\t\tupdateOrganization: updateOrganization(options),\n\t\tdeleteOrganization: deleteOrganization(options),\n\t\tsetActiveOrganization: setActiveOrganization(options),\n\t\tgetFullOrganization: getFullOrganization(options),\n\t\tlistOrganizations: listOrganizations(options),\n\t\tcreateInvitation: createInvitation(options),\n\t\tcancelInvitation: cancelInvitation(options),\n\t\tacceptInvitation: acceptInvitation(options),\n\t\tgetInvitation: getInvitation(options),\n\t\trejectInvitation: rejectInvitation(options),\n\t\tlistInvitations: listInvitations(options),\n\t\tgetActiveMember: getActiveMember(options),\n\t\tcheckOrganizationSlug: checkOrganizationSlug(options),\n\t\taddMember: addMember(options),\n\t\tremoveMember: removeMember(options),\n\t\tupdateMemberRole: updateMemberRole(options),\n\t\tleaveOrganization: leaveOrganization(options),\n\t\tlistUserInvitations: listUserInvitations(options),\n\t\tlistMembers: listMembers(options),\n\t\tgetActiveMemberRole: getActiveMemberRole(options)\n\t};\n\tconst teamSupport = options?.teams?.enabled;\n\tconst teamEndpoints = {\n\t\tcreateTeam: createTeam(options),\n\t\tlistOrganizationTeams: listOrganizationTeams(options),\n\t\tremoveTeam: removeTeam(options),\n\t\tupdateTeam: updateTeam(options),\n\t\tsetActiveTeam: setActiveTeam(options),\n\t\tlistUserTeams: listUserTeams(options),\n\t\tlistTeamMembers: listTeamMembers(options),\n\t\taddTeamMember: addTeamMember(options),\n\t\tremoveTeamMember: removeTeamMember(options)\n\t};\n\tif (teamSupport) endpoints = {\n\t\t...endpoints,\n\t\t...teamEndpoints\n\t};\n\tconst dynamicAccessControlEndpoints = {\n\t\tcreateOrgRole: createOrgRole(options),\n\t\tdeleteOrgRole: deleteOrgRole(options),\n\t\tlistOrgRoles: listOrgRoles(options),\n\t\tgetOrgRole: getOrgRole(options),\n\t\tupdateOrgRole: updateOrgRole(options)\n\t};\n\tif (options?.dynamicAccessControl?.enabled) endpoints = {\n\t\t...endpoints,\n\t\t...dynamicAccessControlEndpoints\n\t};\n\tconst roles = {\n\t\t...defaultRoles,\n\t\t...options?.roles\n\t};\n\tconst teamSchema$1 = teamSupport ? {\n\t\tteam: {\n\t\t\tmodelName: options?.schema?.team?.modelName,\n\t\t\tfields: {\n\t\t\t\tname: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options?.schema?.team?.fields?.name\n\t\t\t\t},\n\t\t\t\torganizationId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"organization\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: options?.schema?.team?.fields?.organizationId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options?.schema?.team?.fields?.createdAt\n\t\t\t\t},\n\t\t\t\tupdatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options?.schema?.team?.fields?.updatedAt,\n\t\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\t...options?.schema?.team?.additionalFields || {}\n\t\t\t}\n\t\t},\n\t\tteamMember: {\n\t\t\tmodelName: options?.schema?.teamMember?.modelName,\n\t\t\tfields: {\n\t\t\t\tteamId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"team\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: options?.schema?.teamMember?.fields?.teamId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tuserId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: options?.schema?.teamMember?.fields?.userId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options?.schema?.teamMember?.fields?.createdAt\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} : {};\n\tconst organizationRoleSchema$1 = options?.dynamicAccessControl?.enabled ? { organizationRole: {\n\t\tfields: {\n\t\t\torganizationId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: \"organization\",\n\t\t\t\t\tfield: \"id\"\n\t\t\t\t},\n\t\t\t\tfieldName: options?.schema?.organizationRole?.fields?.organizationId,\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\trole: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options?.schema?.organizationRole?.fields?.role,\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\tpermission: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: options?.schema?.organizationRole?.fields?.permission\n\t\t\t},\n\t\t\tcreatedAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: true,\n\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\tfieldName: options?.schema?.organizationRole?.fields?.createdAt\n\t\t\t},\n\t\t\tupdatedAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: false,\n\t\t\t\tfieldName: options?.schema?.organizationRole?.fields?.updatedAt,\n\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date()\n\t\t\t},\n\t\t\t...options?.schema?.organizationRole?.additionalFields || {}\n\t\t},\n\t\tmodelName: options?.schema?.organizationRole?.modelName\n\t} } : {};\n\tconst schema = {\n\t\torganization: {\n\t\t\tmodelName: options?.schema?.organization?.modelName,\n\t\t\tfields: {\n\t\t\t\tname: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: options?.schema?.organization?.fields?.name\n\t\t\t\t},\n\t\t\t\tslug: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tunique: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: options?.schema?.organization?.fields?.slug\n\t\t\t\t},\n\t\t\t\tlogo: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options?.schema?.organization?.fields?.logo\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options?.schema?.organization?.fields?.createdAt\n\t\t\t\t},\n\t\t\t\tmetadata: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options?.schema?.organization?.fields?.metadata\n\t\t\t\t},\n\t\t\t\t...options?.schema?.organization?.additionalFields || {}\n\t\t\t}\n\t\t},\n\t\t...organizationRoleSchema$1,\n\t\t...teamSchema$1,\n\t\tmember: {\n\t\t\tmodelName: options?.schema?.member?.modelName,\n\t\t\tfields: {\n\t\t\t\torganizationId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"organization\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: options?.schema?.member?.fields?.organizationId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tuserId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options?.schema?.member?.fields?.userId,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\trole: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tdefaultValue: \"member\",\n\t\t\t\t\tfieldName: options?.schema?.member?.fields?.role\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options?.schema?.member?.fields?.createdAt\n\t\t\t\t},\n\t\t\t\t...options?.schema?.member?.additionalFields || {}\n\t\t\t}\n\t\t},\n\t\tinvitation: {\n\t\t\tmodelName: options?.schema?.invitation?.modelName,\n\t\t\tfields: {\n\t\t\t\torganizationId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"organization\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: options?.schema?.invitation?.fields?.organizationId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: options?.schema?.invitation?.fields?.email,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\trole: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: options?.schema?.invitation?.fields?.role\n\t\t\t\t},\n\t\t\t\t...teamSupport ? { teamId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: options?.schema?.invitation?.fields?.teamId\n\t\t\t\t} } : {},\n\t\t\t\tstatus: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tdefaultValue: \"pending\",\n\t\t\t\t\tfieldName: options?.schema?.invitation?.fields?.status\n\t\t\t\t},\n\t\t\t\texpiresAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options?.schema?.invitation?.fields?.expiresAt\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: options?.schema?.invitation?.fields?.createdAt,\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\tinviterId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: options?.schema?.invitation?.fields?.inviterId,\n\t\t\t\t\trequired: true\n\t\t\t\t},\n\t\t\t\t...options?.schema?.invitation?.additionalFields || {}\n\t\t\t}\n\t\t}\n\t};\n\treturn {\n\t\tid: \"organization\",\n\t\tendpoints: {\n\t\t\t...shimContext(endpoints, {\n\t\t\t\torgOptions: options || {},\n\t\t\t\troles,\n\t\t\t\tgetSession: async (context) => {\n\t\t\t\t\treturn await getSessionFromCtx(context);\n\t\t\t\t}\n\t\t\t}),\n\t\t\thasPermission: createHasPermission(options)\n\t\t},\n\t\tschema: {\n\t\t\t...schema,\n\t\t\tsession: { fields: {\n\t\t\t\tactiveOrganizationId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options?.schema?.session?.fields?.activeOrganizationId\n\t\t\t\t},\n\t\t\t\t...teamSupport ? { activeTeamId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: options?.schema?.session?.fields?.activeTeamId\n\t\t\t\t} } : {}\n\t\t\t} }\n\t\t},\n\t\t$Infer: {\n\t\t\tOrganization: {},\n\t\t\tInvitation: {},\n\t\t\tMember: {},\n\t\t\tTeam: teamSupport ? {} : {},\n\t\t\tTeamMember: teamSupport ? {} : {},\n\t\t\tActiveOrganization: {}\n\t\t},\n\t\t$ERROR_CODES: ORGANIZATION_ERROR_CODES,\n\t\toptions\n\t};\n}\n\n//#endregion\nexport { parseRoles as n, organization as t };"],"names":[],"mappings":"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","ignoreList":[0]}}]
}