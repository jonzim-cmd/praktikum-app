{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/node_modules/better-auth/dist/api-CkmycQ2x.mjs"],"sourcesContent":["import { i as parseState, n as HIDE_METADATA, r as generateState, t as generateId } from \"./utils-db7gNqd-.mjs\";\nimport { n as symmetricEncrypt, o as signJWT, r as generateRandomString, t as symmetricDecrypt } from \"./crypto-CFUhAR9W.mjs\";\nimport { c as parseUserInput, l as parseUserOutput, u as getDate } from \"./schema-Bb7wzeK_.mjs\";\nimport { t as getIp } from \"./get-request-ip-D6st-mto.mjs\";\nimport { t as safeJSONParse } from \"./json-CnHxKYpj.mjs\";\nimport { i as getProtocol, n as getHost, r as getOrigin } from \"./url-CB8xCwz-.mjs\";\nimport { c as setSessionCookie, f as getAccountCookie, h as setAccountCookie, n as deleteSessionCookie } from \"./cookies-D72PbWdz.mjs\";\nimport { c as revokeSessions, i as listSessions, l as sensitiveSessionMiddleware, n as getSession, o as revokeOtherSessions, r as getSessionFromCtx, s as revokeSession, t as freshSessionMiddleware, u as sessionMiddleware } from \"./session-AaRl3_x-.mjs\";\nimport { hasRequestState, runWithEndpointContext, runWithRequestState, runWithTransaction } from \"@better-auth/core/context\";\nimport { isDevelopment, isProduction, logger, shouldPublishLog } from \"@better-auth/core/env\";\nimport { BASE_ERROR_CODES } from \"@better-auth/core/error\";\nimport { APIError, APIError as APIError$1, createRouter, toResponse } from \"better-call\";\nimport * as z from \"zod\";\nimport { jwtVerify } from \"jose\";\nimport { SocialProviderListEnum } from \"@better-auth/core/social-providers\";\nimport { createDefu } from \"defu\";\nimport { createAuthEndpoint, createAuthEndpoint as createAuthEndpoint$1, createAuthMiddleware, createAuthMiddleware as createAuthMiddleware$1, optionsMiddleware } from \"@better-auth/core/api\";\nimport { JWTExpired } from \"jose/errors\";\n\n//#region src/utils/wildcard.ts\n/**\n* Escapes a character if it has a special meaning in regular expressions\n* and returns the character as is if it doesn't\n*/\nfunction escapeRegExpChar(char) {\n\tif (char === \"-\" || char === \"^\" || char === \"$\" || char === \"+\" || char === \".\" || char === \"(\" || char === \")\" || char === \"|\" || char === \"[\" || char === \"]\" || char === \"{\" || char === \"}\" || char === \"*\" || char === \"?\" || char === \"\\\\\") return `\\\\${char}`;\n\telse return char;\n}\n/**\n* Escapes all characters in a given string that have a special meaning in regular expressions\n*/\nfunction escapeRegExpString(str) {\n\tlet result = \"\";\n\tfor (let i = 0; i < str.length; i++) result += escapeRegExpChar(str[i]);\n\treturn result;\n}\n/**\n* Transforms one or more glob patterns into a RegExp pattern\n*/\nfunction transform(pattern, separator = true) {\n\tif (Array.isArray(pattern)) return `(?:${pattern.map((p) => `^${transform(p, separator)}$`).join(\"|\")})`;\n\tlet separatorSplitter = \"\";\n\tlet separatorMatcher = \"\";\n\tlet wildcard = \".\";\n\tif (separator === true) {\n\t\tseparatorSplitter = \"/\";\n\t\tseparatorMatcher = \"[/\\\\\\\\]\";\n\t\twildcard = \"[^/\\\\\\\\]\";\n\t} else if (separator) {\n\t\tseparatorSplitter = separator;\n\t\tseparatorMatcher = escapeRegExpString(separatorSplitter);\n\t\tif (separatorMatcher.length > 1) {\n\t\t\tseparatorMatcher = `(?:${separatorMatcher})`;\n\t\t\twildcard = `((?!${separatorMatcher}).)`;\n\t\t} else wildcard = `[^${separatorMatcher}]`;\n\t}\n\tlet requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n\tlet optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n\tlet segments = separator ? pattern.split(separatorSplitter) : [pattern];\n\tlet result = \"\";\n\tfor (let s = 0; s < segments.length; s++) {\n\t\tlet segment = segments[s];\n\t\tlet nextSegment = segments[s + 1];\n\t\tlet currentSeparator = \"\";\n\t\tif (!segment && s > 0) continue;\n\t\tif (separator) if (s === segments.length - 1) currentSeparator = optionalSeparator;\n\t\telse if (nextSegment !== \"**\") currentSeparator = requiredSeparator;\n\t\telse currentSeparator = \"\";\n\t\tif (separator && segment === \"**\") {\n\t\t\tif (currentSeparator) {\n\t\t\t\tresult += s === 0 ? \"\" : currentSeparator;\n\t\t\t\tresult += `(?:${wildcard}*?${currentSeparator})*?`;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tfor (let c = 0; c < segment.length; c++) {\n\t\t\tlet char = segment[c];\n\t\t\tif (char === \"\\\\\") {\n\t\t\t\tif (c < segment.length - 1) {\n\t\t\t\t\tresult += escapeRegExpChar(segment[c + 1]);\n\t\t\t\t\tc++;\n\t\t\t\t}\n\t\t\t} else if (char === \"?\") result += wildcard;\n\t\t\telse if (char === \"*\") result += `${wildcard}*?`;\n\t\t\telse result += escapeRegExpChar(char);\n\t\t}\n\t\tresult += currentSeparator;\n\t}\n\treturn result;\n}\nfunction isMatch(regexp, sample) {\n\tif (typeof sample !== \"string\") throw new TypeError(`Sample must be a string, but ${typeof sample} given`);\n\treturn regexp.test(sample);\n}\n/**\n* Compiles one or more glob patterns into a RegExp and returns an isMatch function.\n* The isMatch function takes a sample string as its only argument and returns `true`\n* if the string matches the pattern(s).\n*\n* ```js\n* wildcardMatch('src/*.js')('src/index.js') //=> true\n* ```\n*\n* ```js\n* const isMatch = wildcardMatch('*.example.com', '.')\n* isMatch('foo.example.com') //=> true\n* isMatch('foo.bar.com') //=> false\n* ```\n*/\nfunction wildcardMatch(pattern, options) {\n\tif (typeof pattern !== \"string\" && !Array.isArray(pattern)) throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`);\n\tif (typeof options === \"string\" || typeof options === \"boolean\") options = { separator: options };\n\tif (arguments.length === 2 && !(typeof options === \"undefined\" || typeof options === \"object\" && options !== null && !Array.isArray(options))) throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof options} given`);\n\toptions = options || {};\n\tif (options.separator === \"\\\\\") throw new Error(\"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\");\n\tlet regexpPattern = transform(pattern, options.separator);\n\tlet regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n\tlet fn = isMatch.bind(null, regexp);\n\tfn.options = options;\n\tfn.pattern = pattern;\n\tfn.regexp = regexp;\n\treturn fn;\n}\n\n//#endregion\n//#region src/api/middlewares/origin-check.ts\n/**\n* A middleware to validate callbackURL and origin against\n* trustedOrigins.\n*/\nconst originCheckMiddleware = createAuthMiddleware(async (ctx) => {\n\tif (ctx.request?.method === \"GET\" || ctx.request?.method === \"OPTIONS\" || ctx.request?.method === \"HEAD\" || !ctx.request) return;\n\tconst headers = ctx.request?.headers;\n\tconst request = ctx.request;\n\tconst { body, query, context } = ctx;\n\tconst originHeader = headers?.get(\"origin\") || headers?.get(\"referer\") || \"\";\n\tconst callbackURL = body?.callbackURL || query?.callbackURL;\n\tconst redirectURL = body?.redirectTo;\n\tconst errorCallbackURL = body?.errorCallbackURL;\n\tconst newUserCallbackURL = body?.newUserCallbackURL;\n\tconst trustedOrigins = Array.isArray(context.options.trustedOrigins) ? context.trustedOrigins : [...context.trustedOrigins, ...await context.options.trustedOrigins?.(request) || []];\n\tconst useCookies = headers?.has(\"cookie\");\n\tconst matchesPattern = (url, pattern) => {\n\t\tif (url.startsWith(\"/\")) return false;\n\t\tif (pattern.includes(\"*\")) {\n\t\t\tif (pattern.includes(\"://\")) return wildcardMatch(pattern)(getOrigin(url) || url);\n\t\t\tconst host = getHost(url);\n\t\t\tif (!host) return false;\n\t\t\treturn wildcardMatch(pattern)(host);\n\t\t}\n\t\tconst protocol = getProtocol(url);\n\t\treturn protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === getOrigin(url) : url.startsWith(pattern);\n\t};\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!trustedOrigins.some((origin) => matchesPattern(url, origin) || url?.startsWith(\"/\") && label !== \"origin\" && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(url))) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${trustedOrigins}`);\n\t\t\tthrow new APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tif (useCookies && !ctx.context.skipCSRFCheck && !ctx.context.skipOriginCheck) {\n\t\tif (!originHeader || originHeader === \"null\") throw new APIError(\"FORBIDDEN\", { message: \"Missing or null Origin\" });\n\t\tvalidateURL(originHeader, \"origin\");\n\t}\n\tcallbackURL && validateURL(callbackURL, \"callbackURL\");\n\tredirectURL && validateURL(redirectURL, \"redirectURL\");\n\terrorCallbackURL && validateURL(errorCallbackURL, \"errorCallbackURL\");\n\tnewUserCallbackURL && validateURL(newUserCallbackURL, \"newUserCallbackURL\");\n});\nconst originCheck = (getValue) => createAuthMiddleware(async (ctx) => {\n\tif (!ctx.request) return;\n\tconst { context } = ctx;\n\tconst callbackURL = getValue(ctx);\n\tconst trustedOrigins = Array.isArray(context.options.trustedOrigins) ? context.trustedOrigins : [...context.trustedOrigins, ...await context.options.trustedOrigins?.(ctx.request) || []];\n\tconst matchesPattern = (url, pattern) => {\n\t\tif (url.startsWith(\"/\")) return false;\n\t\tif (pattern.includes(\"*\")) {\n\t\t\tif (pattern.includes(\"://\")) return wildcardMatch(pattern)(getOrigin(url) || url);\n\t\t\tconst host = getHost(url);\n\t\t\tif (!host) return false;\n\t\t\treturn wildcardMatch(pattern)(host);\n\t\t}\n\t\tconst protocol = getProtocol(url);\n\t\treturn protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === getOrigin(url) : url.startsWith(pattern);\n\t};\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!trustedOrigins.some((origin) => matchesPattern(url, origin) || url?.startsWith(\"/\") && label !== \"origin\" && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(url))) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${trustedOrigins}`);\n\t\t\tthrow new APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tconst callbacks = Array.isArray(callbackURL) ? callbackURL : [callbackURL];\n\tfor (const url of callbacks) validateURL(url, \"callbackURL\");\n});\n\n//#endregion\n//#region src/api/rate-limiter/index.ts\nfunction shouldRateLimit(max, window, rateLimitData) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn now - rateLimitData.lastRequest < windowInMs && rateLimitData.count >= max;\n}\nfunction rateLimitResponse(retryAfter) {\n\treturn new Response(JSON.stringify({ message: \"Too many requests. Please try again later.\" }), {\n\t\tstatus: 429,\n\t\tstatusText: \"Too Many Requests\",\n\t\theaders: { \"X-Retry-After\": retryAfter.toString() }\n\t});\n}\nfunction getRetryAfter(lastRequest, window) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn Math.ceil((lastRequest + windowInMs - now) / 1e3);\n}\nfunction createDBStorage(ctx) {\n\tconst model = \"rateLimit\";\n\tconst db = ctx.adapter;\n\treturn {\n\t\tget: async (key) => {\n\t\t\tconst data = (await db.findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"key\",\n\t\t\t\t\tvalue: key\n\t\t\t\t}]\n\t\t\t}))[0];\n\t\t\tif (typeof data?.lastRequest === \"bigint\") data.lastRequest = Number(data.lastRequest);\n\t\t\treturn data;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\ttry {\n\t\t\t\tif (_update) await db.updateMany({\n\t\t\t\t\tmodel,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"key\",\n\t\t\t\t\t\tvalue: key\n\t\t\t\t\t}],\n\t\t\t\t\tupdate: {\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\telse await db.create({\n\t\t\t\t\tmodel,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tctx.logger.error(\"Error setting rate limit\", e);\n\t\t\t}\n\t\t}\n\t};\n}\nconst memory = /* @__PURE__ */ new Map();\nfunction getRateLimitStorage(ctx, rateLimitSettings) {\n\tif (ctx.options.rateLimit?.customStorage) return ctx.options.rateLimit.customStorage;\n\tconst storage = ctx.rateLimit.storage;\n\tif (storage === \"secondary-storage\") return {\n\t\tget: async (key) => {\n\t\t\tconst data = await ctx.options.secondaryStorage?.get(key);\n\t\t\treturn data ? safeJSONParse(data) : void 0;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tawait ctx.options.secondaryStorage?.set?.(key, JSON.stringify(value), ttl);\n\t\t}\n\t};\n\telse if (storage === \"memory\") return {\n\t\tasync get(key) {\n\t\t\treturn memory.get(key);\n\t\t},\n\t\tasync set(key, value, _update) {\n\t\t\tmemory.set(key, value);\n\t\t}\n\t};\n\treturn createDBStorage(ctx);\n}\nasync function onRequestRateLimit(req, ctx) {\n\tif (!ctx.rateLimit.enabled) return;\n\tconst path = new URL(req.url).pathname.replace(ctx.options.basePath || \"/api/auth\", \"\");\n\tlet window = ctx.rateLimit.window;\n\tlet max = ctx.rateLimit.max;\n\tconst ip = getIp(req, ctx.options);\n\tif (!ip) return;\n\tconst key = ip + path;\n\tconst specialRule = getDefaultSpecialRules().find((rule) => rule.pathMatcher(path));\n\tif (specialRule) {\n\t\twindow = specialRule.window;\n\t\tmax = specialRule.max;\n\t}\n\tfor (const plugin of ctx.options.plugins || []) if (plugin.rateLimit) {\n\t\tconst matchedRule = plugin.rateLimit.find((rule) => rule.pathMatcher(path));\n\t\tif (matchedRule) {\n\t\t\twindow = matchedRule.window;\n\t\t\tmax = matchedRule.max;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (ctx.rateLimit.customRules) {\n\t\tconst _path = Object.keys(ctx.rateLimit.customRules).find((p) => {\n\t\t\tif (p.includes(\"*\")) return wildcardMatch(p)(path);\n\t\t\treturn p === path;\n\t\t});\n\t\tif (_path) {\n\t\t\tconst customRule = ctx.rateLimit.customRules[_path];\n\t\t\tconst resolved = typeof customRule === \"function\" ? await customRule(req) : customRule;\n\t\t\tif (resolved) {\n\t\t\t\twindow = resolved.window;\n\t\t\t\tmax = resolved.max;\n\t\t\t}\n\t\t\tif (resolved === false) return;\n\t\t}\n\t}\n\tconst storage = getRateLimitStorage(ctx, { window });\n\tconst data = await storage.get(key);\n\tconst now = Date.now();\n\tif (!data) await storage.set(key, {\n\t\tkey,\n\t\tcount: 1,\n\t\tlastRequest: now\n\t});\n\telse {\n\t\tconst timeSinceLastRequest = now - data.lastRequest;\n\t\tif (shouldRateLimit(max, window, data)) return rateLimitResponse(getRetryAfter(data.lastRequest, window));\n\t\telse if (timeSinceLastRequest > window * 1e3) await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t\telse await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: data.count + 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t}\n}\nfunction getDefaultSpecialRules() {\n\treturn [{\n\t\tpathMatcher(path) {\n\t\t\treturn path.startsWith(\"/sign-in\") || path.startsWith(\"/sign-up\") || path.startsWith(\"/change-password\") || path.startsWith(\"/change-email\");\n\t\t},\n\t\twindow: 10,\n\t\tmax: 3\n\t}];\n}\n\n//#endregion\n//#region src/oauth2/utils.ts\nfunction decryptOAuthToken(token, ctx) {\n\tif (!token) return token;\n\tif (ctx.options.account?.encryptOAuthTokens) return symmetricDecrypt({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\nfunction setTokenUtil(token, ctx) {\n\tif (ctx.options.account?.encryptOAuthTokens && token) return symmetricEncrypt({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\n\n//#endregion\n//#region src/api/routes/account.ts\nconst listUserAccounts = createAuthEndpoint(\"/list-accounts\", {\n\tmethod: \"GET\",\n\tuse: [sessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserAccounts\",\n\t\tdescription: \"List all accounts linked to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\tproviderId: { type: \"string\" },\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\taccountId: { type: \"string\" },\n\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\tscopes: {\n\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\titems: { type: \"string\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"providerId\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\",\n\t\t\t\t\t\t\"accountId\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"scopes\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst accounts = await c.context.internalAdapter.findAccounts(session.user.id);\n\treturn c.json(accounts.map((a) => ({\n\t\tid: a.id,\n\t\tproviderId: a.providerId,\n\t\tcreatedAt: a.createdAt,\n\t\tupdatedAt: a.updatedAt,\n\t\taccountId: a.accountId,\n\t\tuserId: a.userId,\n\t\tscopes: a.scope?.split(\",\") || []\n\t})));\n});\nconst linkSocialAccount = createAuthEndpoint(\"/link-social\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tbody: z.object({\n\t\tcallbackURL: z.string().meta({ description: \"The URL to redirect to after the user has signed in\" }).optional(),\n\t\tprovider: SocialProviderListEnum,\n\t\tidToken: z.object({\n\t\t\ttoken: z.string(),\n\t\t\tnonce: z.string().optional(),\n\t\t\taccessToken: z.string().optional(),\n\t\t\trefreshToken: z.string().optional(),\n\t\t\tscopes: z.array(z.string()).optional()\n\t\t}).optional(),\n\t\trequestSignUp: z.boolean().optional(),\n\t\tscopes: z.array(z.string()).meta({ description: \"Additional scopes to request from the provider\" }).optional(),\n\t\terrorCallbackURL: z.string().meta({ description: \"The URL to redirect to if there is an error during the link process\" }).optional(),\n\t\tdisableRedirect: z.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\t\tadditionalData: z.record(z.string(), z.any()).optional()\n\t}),\n\tuse: [sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Link a social account to the user\",\n\t\toperationId: \"linkSocialAccount\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\turl: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The authorization URL to redirect the user to\"\n\t\t\t\t\t},\n\t\t\t\t\tredirect: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the user should be redirected to the authorization URL\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: { type: \"boolean\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"redirect\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new APIError(\"NOT_FOUND\", { message: BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new APIError(\"NOT_FOUND\", { message: BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst linkingUserInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!linkingUserInfo || !linkingUserInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tconst linkingUserId = String(linkingUserInfo.user.id);\n\t\tif (!linkingUserInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tif ((await c.context.internalAdapter.findAccounts(session.user.id)).find((a) => a.providerId === provider.id && a.accountId === linkingUserId)) return c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !linkingUserInfo.user.emailVerified || c.context.options.account?.accountLinking?.enabled === false) throw new APIError(\"UNAUTHORIZED\", { message: \"Account not linked - linking not allowed\" });\n\t\tif (linkingUserInfo.user.email !== session.user.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) throw new APIError(\"UNAUTHORIZED\", { message: \"Account not linked - different emails not allowed\" });\n\t\ttry {\n\t\t\tawait c.context.internalAdapter.createAccount({\n\t\t\t\tuserId: session.user.id,\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: linkingUserId,\n\t\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\t\tidToken: token,\n\t\t\t\trefreshToken: c.body.idToken.refreshToken,\n\t\t\t\tscope: c.body.idToken.scopes?.join(\",\")\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tthrow new APIError(\"EXPECTATION_FAILED\", { message: \"Account not linked - unable to create account\" });\n\t\t}\n\t\tif (c.context.options.account?.accountLinking?.updateUserInfoOnLink === true) try {\n\t\t\tawait c.context.internalAdapter.updateUser(session.user.id, {\n\t\t\t\tname: linkingUserInfo.user?.name,\n\t\t\t\timage: linkingUserInfo.user?.image\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Could not update user - \" + e.toString());\n\t\t}\n\t\treturn c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t}\n\tconst state = await generateState(c, {\n\t\tuserId: session.user.id,\n\t\temail: session.user.email\n\t}, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate: state.state,\n\t\tcodeVerifier: state.codeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes\n\t});\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst unlinkAccount = createAuthEndpoint(\"/unlink-account\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\tproviderId: z.string(),\n\t\taccountId: z.string().optional()\n\t}),\n\tuse: [freshSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Unlink an account\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId } = ctx.body;\n\tconst accounts = await ctx.context.internalAdapter.findAccounts(ctx.context.session.user.id);\n\tif (accounts.length === 1 && !ctx.context.options.account?.accountLinking?.allowUnlinkingAll) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT });\n\tconst accountExist = accounts.find((account) => accountId ? account.accountId === accountId && account.providerId === providerId : account.providerId === providerId);\n\tif (!accountExist) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.ACCOUNT_NOT_FOUND });\n\tawait ctx.context.internalAdapter.deleteAccount(accountExist.id);\n\treturn ctx.json({ status: true });\n});\nconst getAccessToken = createAuthEndpoint(\"/get-access-token\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\tproviderId: z.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: z.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: z.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Get a valid access token, doing a refresh if needed\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"A Valid access token\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\trefreshToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefreshTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body || {};\n\tconst req = ctx.request;\n\tconst session = await getSessionFromCtx(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tlet resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw ctx.error(\"UNAUTHORIZED\");\n\tif (!ctx.context.socialProviders.find((p) => p.id === providerId)) throw new APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} is not supported.` });\n\tconst accountData = await getAccountCookie(ctx);\n\tlet account = void 0;\n\tif (accountData && providerId === accountData.providerId && (!accountId || accountData.id === accountId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\ttry {\n\t\tlet newTokens = null;\n\t\tconst accessTokenExpired = account.accessTokenExpiresAt && new Date(account.accessTokenExpiresAt).getTime() - Date.now() < 5e3;\n\t\tif (account.refreshToken && accessTokenExpired && provider.refreshAccessToken) {\n\t\t\tconst refreshToken$1 = await decryptOAuthToken(account.refreshToken, ctx.context);\n\t\t\tnewTokens = await provider.refreshAccessToken(refreshToken$1);\n\t\t\tconst updatedAccount = await ctx.context.internalAdapter.updateAccount(account.id, {\n\t\t\t\taccessToken: await setTokenUtil(newTokens.accessToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: newTokens.accessTokenExpiresAt,\n\t\t\t\trefreshToken: await setTokenUtil(newTokens.refreshToken, ctx.context),\n\t\t\t\trefreshTokenExpiresAt: newTokens.refreshTokenExpiresAt\n\t\t\t});\n\t\t\tif (ctx.context.options.account?.storeAccountCookie && updatedAccount) await setAccountCookie(ctx, updatedAccount);\n\t\t}\n\t\tconst tokens = {\n\t\t\taccessToken: newTokens?.accessToken ?? await decryptOAuthToken(account.accessToken ?? \"\", ctx.context),\n\t\t\taccessTokenExpiresAt: newTokens?.accessTokenExpiresAt ?? account.accessTokenExpiresAt ?? void 0,\n\t\t\tscopes: account.scope?.split(\",\") ?? [],\n\t\t\tidToken: newTokens?.idToken ?? account.idToken ?? void 0\n\t\t};\n\t\treturn ctx.json(tokens);\n\t} catch (error$1) {\n\t\tthrow new APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to get a valid access token\",\n\t\t\tcause: error$1\n\t\t});\n\t}\n});\nconst refreshToken = createAuthEndpoint(\"/refresh-token\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\tproviderId: z.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: z.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: z.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Refresh the access token using a refresh token\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"Access token refreshed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\trefreshToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefreshTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body;\n\tconst req = ctx.request;\n\tconst session = await getSessionFromCtx(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tlet resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw new APIError(\"BAD_REQUEST\", { message: `Either userId or session is required` });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\tif (!provider.refreshAccessToken) throw new APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} does not support token refreshing.` });\n\tlet account = void 0;\n\tconst accountData = await getAccountCookie(ctx);\n\tif (accountData && (!providerId || providerId === accountData?.providerId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tlet refreshToken$1 = void 0;\n\tif (accountData && providerId === accountData.providerId) refreshToken$1 = accountData.refreshToken ?? void 0;\n\telse refreshToken$1 = account.refreshToken ?? void 0;\n\tif (!refreshToken$1) throw new APIError(\"BAD_REQUEST\", { message: \"Refresh token not found\" });\n\ttry {\n\t\tconst decryptedRefreshToken = await decryptOAuthToken(refreshToken$1, ctx.context);\n\t\tconst tokens = await provider.refreshAccessToken(decryptedRefreshToken);\n\t\tif (account.id) {\n\t\t\tconst updateData = {\n\t\t\t\t...account || {},\n\t\t\t\taccessToken: await setTokenUtil(tokens.accessToken, ctx.context),\n\t\t\t\trefreshToken: await setTokenUtil(tokens.refreshToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\t\tidToken: tokens.idToken || account.idToken\n\t\t\t};\n\t\t\tawait ctx.context.internalAdapter.updateAccount(account.id, updateData);\n\t\t}\n\t\tif (accountData && providerId === accountData.providerId && ctx.context.options.account?.storeAccountCookie) await setAccountCookie(ctx, {\n\t\t\t...accountData,\n\t\t\taccessToken: await setTokenUtil(tokens.accessToken, ctx.context),\n\t\t\trefreshToken: await setTokenUtil(tokens.refreshToken, ctx.context),\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || accountData.scope,\n\t\t\tidToken: tokens.idToken || accountData.idToken\n\t\t});\n\t\treturn ctx.json({\n\t\t\taccessToken: tokens.accessToken,\n\t\t\trefreshToken: tokens.refreshToken,\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\tidToken: tokens.idToken || account.idToken,\n\t\t\tproviderId: account.providerId,\n\t\t\taccountId: account.accountId\n\t\t});\n\t} catch (error$1) {\n\t\tthrow new APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to refresh access token\",\n\t\t\tcause: error$1\n\t\t});\n\t}\n});\nconst accountInfoQuerySchema = z.optional(z.object({ accountId: z.string().meta({ description: \"The provider given account id for which to get the account info\" }).optional() }));\nconst accountInfo = createAuthEndpoint(\"/account-info\", {\n\tmethod: \"GET\",\n\tuse: [sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Get the account info provided by the provider\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\tname: { type: \"string\" },\n\t\t\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\t\t\timage: { type: \"string\" },\n\t\t\t\t\t\t\temailVerified: { type: \"boolean\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"id\", \"emailVerified\"]\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\tadditionalProperties: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"data\"],\n\t\t\t\tadditionalProperties: false\n\t\t\t} } }\n\t\t} }\n\t} },\n\tquery: accountInfoQuerySchema\n}, async (ctx) => {\n\tconst providedAccountId = ctx.query?.accountId;\n\tlet account = void 0;\n\tif (!providedAccountId) {\n\t\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\t\tconst accountData = await getAccountCookie(ctx);\n\t\t\tif (accountData) account = accountData;\n\t\t}\n\t} else {\n\t\tconst accountData = await ctx.context.internalAdapter.findAccount(providedAccountId);\n\t\tif (accountData) account = accountData;\n\t}\n\tif (!account || account.userId !== ctx.context.session.user.id) throw new APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === account.providerId);\n\tif (!provider) throw new APIError(\"INTERNAL_SERVER_ERROR\", { message: `Provider account provider is ${account.providerId} but it is not configured` });\n\tconst tokens = await getAccessToken({\n\t\t...ctx,\n\t\tmethod: \"POST\",\n\t\tbody: {\n\t\t\taccountId: account.id,\n\t\t\tproviderId: account.providerId\n\t\t},\n\t\treturnHeaders: false,\n\t\treturnStatus: false\n\t});\n\tif (!tokens.accessToken) throw new APIError(\"BAD_REQUEST\", { message: \"Access token not found\" });\n\tconst info = await provider.getUserInfo({\n\t\t...tokens,\n\t\taccessToken: tokens.accessToken\n\t});\n\treturn ctx.json(info);\n});\n\n//#endregion\n//#region src/oauth2/link-account.ts\nasync function handleOAuthUserInfo(c, { userInfo, account, callbackURL, disableSignUp, overrideUserInfo }) {\n\tconst dbUser = await c.context.internalAdapter.findOAuthUser(userInfo.email.toLowerCase(), account.accountId, account.providerId).catch((e) => {\n\t\tlogger.error(\"Better auth was unable to query your database.\\nError: \", e);\n\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\tthrow c.redirect(`${errorURL}?error=internal_server_error`);\n\t});\n\tlet user = dbUser?.user;\n\tlet isRegister = !user;\n\tif (dbUser) {\n\t\tconst hasBeenLinked = dbUser.accounts.find((a) => a.providerId === account.providerId && a.accountId === account.accountId);\n\t\tif (!hasBeenLinked) {\n\t\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(account.providerId) && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n\t\t\t\tif (isDevelopment()) logger.warn(`User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"account not linked\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait c.context.internalAdapter.linkAccount({\n\t\t\t\t\tproviderId: account.providerId,\n\t\t\t\t\taccountId: userInfo.id.toString(),\n\t\t\t\t\tuserId: dbUser.user.id,\n\t\t\t\t\taccessToken: await setTokenUtil(account.accessToken, c.context),\n\t\t\t\t\trefreshToken: await setTokenUtil(account.refreshToken, c.context),\n\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\tscope: account.scope\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tlogger.error(\"Unable to link account\", e);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"unable to link account\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t} else {\n\t\t\tif (c.context.options.account?.updateAccountOnSignIn !== false) {\n\t\t\t\tconst updateData = Object.fromEntries(Object.entries({\n\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\taccessToken: await setTokenUtil(account.accessToken, c.context),\n\t\t\t\t\trefreshToken: await setTokenUtil(account.refreshToken, c.context),\n\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\tscope: account.scope\n\t\t\t\t}).filter(([_, value]) => value !== void 0));\n\t\t\t\tif (c.context.options.account?.storeAccountCookie) await setAccountCookie(c, updateData);\n\t\t\t\tif (Object.keys(updateData).length > 0) await c.context.internalAdapter.updateAccount(hasBeenLinked.id, updateData);\n\t\t\t}\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t}\n\t\tif (overrideUserInfo) {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tuser = await c.context.internalAdapter.updateUser(dbUser.user.id, {\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase(),\n\t\t\t\temailVerified: userInfo.email.toLowerCase() === dbUser.user.email ? dbUser.user.emailVerified || userInfo.emailVerified : userInfo.emailVerified\n\t\t\t});\n\t\t}\n\t} else {\n\t\tif (disableSignUp) return {\n\t\t\terror: \"signup disabled\",\n\t\t\tdata: null,\n\t\t\tisRegister: false\n\t\t};\n\t\ttry {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tconst accountData = {\n\t\t\t\taccessToken: await setTokenUtil(account.accessToken, c.context),\n\t\t\t\trefreshToken: await setTokenUtil(account.refreshToken, c.context),\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope,\n\t\t\t\tproviderId: account.providerId,\n\t\t\t\taccountId: userInfo.id.toString()\n\t\t\t};\n\t\t\tconst { user: createdUser, account: createdAccount } = await c.context.internalAdapter.createOAuthUser({\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase()\n\t\t\t}, accountData);\n\t\t\tuser = createdUser;\n\t\t\tif (c.context.options.account?.storeAccountCookie) await setAccountCookie(c, createdAccount);\n\t\t\tif (!userInfo.emailVerified && user && c.context.options.emailVerification?.sendOnSignUp) {\n\t\t\t\tconst token = await createEmailVerificationToken(c.context.secret, user.email, void 0, c.context.options.emailVerification?.expiresIn);\n\t\t\t\tconst url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\t\tawait c.context.options.emailVerification?.sendVerificationEmail?.({\n\t\t\t\t\tuser,\n\t\t\t\t\turl,\n\t\t\t\t\ttoken\n\t\t\t\t}, c.request);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tlogger.error(e);\n\t\t\tif (e instanceof APIError$1) return {\n\t\t\t\terror: e.message,\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t\treturn {\n\t\t\t\terror: \"unable to create user\",\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t}\n\t}\n\tif (!user) return {\n\t\terror: \"unable to create user\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\tconst session = await c.context.internalAdapter.createSession(user.id);\n\tif (!session) return {\n\t\terror: \"unable to create session\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\treturn {\n\t\tdata: {\n\t\t\tsession,\n\t\t\tuser\n\t\t},\n\t\terror: null,\n\t\tisRegister\n\t};\n}\n\n//#endregion\n//#region src/api/routes/callback.ts\nconst schema = z.object({\n\tcode: z.string().optional(),\n\terror: z.string().optional(),\n\tdevice_id: z.string().optional(),\n\terror_description: z.string().optional(),\n\tstate: z.string().optional(),\n\tuser: z.string().optional()\n});\nconst callbackOAuth = createAuthEndpoint(\"/callback/:id\", {\n\tmethod: [\"GET\", \"POST\"],\n\toperationId: \"handleOAuthCallback\",\n\tbody: schema.optional(),\n\tquery: schema.optional(),\n\tmetadata: {\n\t\t...HIDE_METADATA,\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"]\n\t}\n}, async (c) => {\n\tlet queryOrBody;\n\tconst defaultErrorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tif (c.method === \"POST\") {\n\t\tconst postData = c.body ? schema.parse(c.body) : {};\n\t\tconst queryData = c.query ? schema.parse(c.query) : {};\n\t\tconst mergedData = schema.parse({\n\t\t\t...postData,\n\t\t\t...queryData\n\t\t});\n\t\tconst params = new URLSearchParams();\n\t\tfor (const [key, value] of Object.entries(mergedData)) if (value !== void 0 && value !== null) params.set(key, String(value));\n\t\tconst redirectURL = `${c.context.baseURL}/callback/${c.params.id}?${params.toString()}`;\n\t\tthrow c.redirect(redirectURL);\n\t}\n\ttry {\n\t\tif (c.method === \"GET\") queryOrBody = schema.parse(c.query);\n\t\telse if (c.method === \"POST\") queryOrBody = schema.parse(c.body);\n\t\telse throw new Error(\"Unsupported method\");\n\t} catch (e) {\n\t\tc.context.logger.error(\"INVALID_CALLBACK_REQUEST\", e);\n\t\tthrow c.redirect(`${defaultErrorURL}?error=invalid_callback_request`);\n\t}\n\tconst { code, error: error$1, state, error_description, device_id } = queryOrBody;\n\tif (!state) {\n\t\tc.context.logger.error(\"State not found\", error$1);\n\t\tconst url = `${defaultErrorURL}${defaultErrorURL.includes(\"?\") ? \"&\" : \"?\"}state=state_not_found`;\n\t\tthrow c.redirect(url);\n\t}\n\tconst { codeVerifier, callbackURL, link, errorURL, newUserURL, requestSignUp } = await parseState(c);\n\tfunction redirectOnError(error$2, description) {\n\t\tconst baseURL = errorURL ?? defaultErrorURL;\n\t\tconst params = new URLSearchParams({ error: error$2 });\n\t\tif (description) params.set(\"error_description\", description);\n\t\tconst url = `${baseURL}${baseURL.includes(\"?\") ? \"&\" : \"?\"}${params.toString()}`;\n\t\tthrow c.redirect(url);\n\t}\n\tif (error$1) redirectOnError(error$1, error_description);\n\tif (!code) {\n\t\tc.context.logger.error(\"Code not found\");\n\t\tthrow redirectOnError(\"no_code\");\n\t}\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.params.id);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Oauth provider with id\", c.params.id, \"not found\");\n\t\tthrow redirectOnError(\"oauth_provider_not_found\");\n\t}\n\tlet tokens;\n\ttry {\n\t\ttokens = await provider.validateAuthorizationCode({\n\t\t\tcode,\n\t\t\tcodeVerifier,\n\t\t\tdeviceId: device_id,\n\t\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`\n\t\t});\n\t} catch (e) {\n\t\tc.context.logger.error(\"\", e);\n\t\tthrow redirectOnError(\"invalid_code\");\n\t}\n\tconst userInfo = await provider.getUserInfo({\n\t\t...tokens,\n\t\tuser: c.body?.user ? safeJSONParse(c.body.user) : void 0\n\t}).then((res) => res?.user);\n\tif (!userInfo) {\n\t\tc.context.logger.error(\"Unable to get user info\");\n\t\treturn redirectOnError(\"unable_to_get_user_info\");\n\t}\n\tif (!callbackURL) {\n\t\tc.context.logger.error(\"No callback URL found\");\n\t\tthrow redirectOnError(\"no_callback_url\");\n\t}\n\tif (link) {\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n\t\t\tc.context.logger.error(\"Unable to link account - untrusted provider\");\n\t\t\treturn redirectOnError(\"unable_to_link_account\");\n\t\t}\n\t\tif (userInfo.email !== link.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) return redirectOnError(\"email_doesn't_match\");\n\t\tconst existingAccount = await c.context.internalAdapter.findAccount(String(userInfo.id));\n\t\tif (existingAccount) {\n\t\t\tif (existingAccount.userId.toString() !== link.userId.toString()) return redirectOnError(\"account_already_linked_to_different_user\");\n\t\t\tconst updateData = Object.fromEntries(Object.entries({\n\t\t\t\taccessToken: await setTokenUtil(tokens.accessToken, c.context),\n\t\t\t\trefreshToken: await setTokenUtil(tokens.refreshToken, c.context),\n\t\t\t\tidToken: tokens.idToken,\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t\t}).filter(([_, value]) => value !== void 0));\n\t\t\tawait c.context.internalAdapter.updateAccount(existingAccount.id, updateData);\n\t\t} else if (!await c.context.internalAdapter.createAccount({\n\t\t\tuserId: link.userId,\n\t\t\tproviderId: provider.id,\n\t\t\taccountId: String(userInfo.id),\n\t\t\t...tokens,\n\t\t\taccessToken: await setTokenUtil(tokens.accessToken, c.context),\n\t\t\trefreshToken: await setTokenUtil(tokens.refreshToken, c.context),\n\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t})) return redirectOnError(\"unable_to_link_account\");\n\t\tlet toRedirectTo$1;\n\t\ttry {\n\t\t\ttoRedirectTo$1 = callbackURL.toString();\n\t\t} catch {\n\t\t\ttoRedirectTo$1 = callbackURL;\n\t\t}\n\t\tthrow c.redirect(toRedirectTo$1);\n\t}\n\tif (!userInfo.email) {\n\t\tc.context.logger.error(\"Provider did not return email. This could be due to misconfiguration in the provider settings.\");\n\t\treturn redirectOnError(\"email_not_found\");\n\t}\n\tconst accountData = {\n\t\tproviderId: provider.id,\n\t\taccountId: String(userInfo.id),\n\t\t...tokens,\n\t\tscope: tokens.scopes?.join(\",\")\n\t};\n\tconst result = await handleOAuthUserInfo(c, {\n\t\tuserInfo: {\n\t\t\t...userInfo,\n\t\t\tid: String(userInfo.id),\n\t\t\temail: userInfo.email,\n\t\t\tname: userInfo.name || userInfo.email\n\t\t},\n\t\taccount: accountData,\n\t\tcallbackURL,\n\t\tdisableSignUp: provider.disableImplicitSignUp && !requestSignUp || provider.options?.disableSignUp,\n\t\toverrideUserInfo: provider.options?.overrideUserInfoOnSignIn\n\t});\n\tif (result.error) {\n\t\tc.context.logger.error(result.error.split(\" \").join(\"_\"));\n\t\treturn redirectOnError(result.error.split(\" \").join(\"_\"));\n\t}\n\tconst { session, user } = result.data;\n\tawait setSessionCookie(c, {\n\t\tsession,\n\t\tuser\n\t});\n\tlet toRedirectTo;\n\ttry {\n\t\ttoRedirectTo = (result.isRegister ? newUserURL || callbackURL : callbackURL).toString();\n\t} catch {\n\t\ttoRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n\t}\n\tthrow c.redirect(toRedirectTo);\n});\n\n//#endregion\n//#region src/api/routes/email-verification.ts\nasync function createEmailVerificationToken(secret, email, updateTo, expiresIn = 3600, extraPayload) {\n\treturn await signJWT({\n\t\temail: email.toLowerCase(),\n\t\tupdateTo,\n\t\t...extraPayload\n\t}, secret, expiresIn);\n}\n/**\n* A function to send a verification email to the user\n*/\nasync function sendVerificationEmailFn(ctx, user) {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await createEmailVerificationToken(ctx.context.secret, user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\tawait ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser,\n\t\turl,\n\t\ttoken\n\t}, ctx.request);\n}\nconst sendVerificationEmail = createAuthEndpoint(\"/send-verification-email\", {\n\tmethod: \"POST\",\n\toperationId: \"sendVerificationEmail\",\n\tbody: z.object({\n\t\temail: z.email().meta({ description: \"The email to send the verification email to\" }),\n\t\tcallbackURL: z.string().meta({ description: \"The URL to use for email verification callback\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"sendVerificationEmail\",\n\t\tdescription: \"Send a verification email to the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The email to send the verification email to\",\n\t\t\t\t\texample: \"user@example.com\"\n\t\t\t\t},\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The URL to use for email verification callback\",\n\t\t\t\t\texample: \"https://example.com/callback\",\n\t\t\t\t\tnullable: true\n\t\t\t\t}\n\t\t\t},\n\t\t\trequired: [\"email\"]\n\t\t} } } },\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was sent successfully\",\n\t\t\t\t\t\texample: true\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"400\": {\n\t\t\t\tdescription: \"Bad Request\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Error message\",\n\t\t\t\t\t\texample: \"Verification email isn't enabled\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst { email } = ctx.body;\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session) {\n\t\tconst user = await ctx.context.internalAdapter.findUserByEmail(email);\n\t\tif (!user) {\n\t\t\tawait createEmailVerificationToken(ctx.context.secret, email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\treturn ctx.json({ status: true });\n\t\t}\n\t\tawait sendVerificationEmailFn(ctx, user.user);\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (session?.user.emailVerified) throw new APIError(\"BAD_REQUEST\", { message: \"You can only send a verification email to an unverified email\" });\n\tif (session?.user.email !== email) throw new APIError(\"BAD_REQUEST\", { message: \"You can only send a verification email to your own email\" });\n\tawait sendVerificationEmailFn(ctx, session.user);\n\treturn ctx.json({ status: true });\n});\nconst verifyEmail = createAuthEndpoint(\"/verify-email\", {\n\tmethod: \"GET\",\n\toperationId: \"verifyEmail\",\n\tquery: z.object({\n\t\ttoken: z.string().meta({ description: \"The token to verify the email\" }),\n\t\tcallbackURL: z.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [originCheck((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Verify the email of the user\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The token to verify the email\",\n\t\t\trequired: true,\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The URL to redirect to after email verification\",\n\t\t\trequired: false,\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was verified successfully\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tfunction redirectOnError(error$1) {\n\t\tif (ctx.query.callbackURL) {\n\t\t\tif (ctx.query.callbackURL.includes(\"?\")) throw ctx.redirect(`${ctx.query.callbackURL}&error=${error$1}`);\n\t\t\tthrow ctx.redirect(`${ctx.query.callbackURL}?error=${error$1}`);\n\t\t}\n\t\tthrow new APIError(\"UNAUTHORIZED\", { message: error$1 });\n\t}\n\tconst { token } = ctx.query;\n\tlet jwt;\n\ttry {\n\t\tjwt = await jwtVerify(token, new TextEncoder().encode(ctx.context.secret), { algorithms: [\"HS256\"] });\n\t} catch (e) {\n\t\tif (e instanceof JWTExpired) return redirectOnError(\"token_expired\");\n\t\treturn redirectOnError(\"invalid_token\");\n\t}\n\tconst parsed = z.object({\n\t\temail: z.email(),\n\t\tupdateTo: z.string().optional(),\n\t\trequestType: z.string().optional()\n\t}).parse(jwt.payload);\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(parsed.email);\n\tif (!user) return redirectOnError(\"user_not_found\");\n\tif (parsed.updateTo) {\n\t\tlet session = await getSessionFromCtx(ctx);\n\t\tif (session && session.user.email !== parsed.email) return redirectOnError(\"unauthorized\");\n\t\tif (parsed.requestType === \"change-email-confirmation\") {\n\t\t\tconst newToken$1 = await createEmailVerificationToken(ctx.context.secret, parsed.email, parsed.updateTo, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\t\t\tconst updateCallbackURL$1 = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${newToken$1}&callbackURL=${updateCallbackURL$1}`;\n\t\t\tawait ctx.context.options.emailVerification?.sendVerificationEmail?.({\n\t\t\t\tuser: {\n\t\t\t\t\t...user.user,\n\t\t\t\t\temail: parsed.updateTo\n\t\t\t\t},\n\t\t\t\turl,\n\t\t\t\ttoken: newToken$1\n\t\t\t}, ctx.request);\n\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\treturn ctx.json({ status: true });\n\t\t}\n\t\tif (!session) {\n\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\tif (!newSession) throw new APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to create session\" });\n\t\t\tsession = {\n\t\t\t\tsession: newSession,\n\t\t\t\tuser: user.user\n\t\t\t};\n\t\t}\n\t\tif (parsed.requestType === \"change-email-verification\") {\n\t\t\tconst updatedUser$2 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\temail: parsed.updateTo,\n\t\t\t\temailVerified: true\n\t\t\t});\n\t\t\tawait setSessionCookie(ctx, {\n\t\t\t\tsession: session.session,\n\t\t\t\tuser: {\n\t\t\t\t\t...session.user,\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\treturn ctx.json({\n\t\t\t\tstatus: true,\n\t\t\t\tuser: updatedUser$2\n\t\t\t});\n\t\t}\n\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\temail: parsed.updateTo,\n\t\t\temailVerified: false\n\t\t});\n\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.updateTo);\n\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\tawait ctx.context.options.emailVerification?.sendVerificationEmail?.({\n\t\t\tuser: updatedUser$1,\n\t\t\turl: `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`,\n\t\t\ttoken: newToken\n\t\t}, ctx.request);\n\t\tawait setSessionCookie(ctx, {\n\t\t\tsession: session.session,\n\t\t\tuser: {\n\t\t\t\t...session.user,\n\t\t\t\temail: parsed.updateTo,\n\t\t\t\temailVerified: false\n\t\t\t}\n\t\t});\n\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tuser: {\n\t\t\t\tid: updatedUser$1.id,\n\t\t\t\temail: updatedUser$1.email,\n\t\t\t\tname: updatedUser$1.name,\n\t\t\t\timage: updatedUser$1.image,\n\t\t\t\temailVerified: updatedUser$1.emailVerified,\n\t\t\t\tcreatedAt: updatedUser$1.createdAt,\n\t\t\t\tupdatedAt: updatedUser$1.updatedAt\n\t\t\t}\n\t\t});\n\t}\n\tif (user.user.emailVerified) {\n\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tuser: null\n\t\t});\n\t}\n\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\tconst updatedUser = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, { emailVerified: true });\n\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser, ctx.request);\n\tif (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n\t\tconst currentSession = await getSessionFromCtx(ctx);\n\t\tif (!currentSession || currentSession.user.email !== parsed.email) {\n\t\t\tconst session = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\tif (!session) throw new APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to create session\" });\n\t\t\tawait setSessionCookie(ctx, {\n\t\t\t\tsession,\n\t\t\t\tuser: {\n\t\t\t\t\t...user.user,\n\t\t\t\t\temailVerified: true\n\t\t\t\t}\n\t\t\t});\n\t\t} else await setSessionCookie(ctx, {\n\t\t\tsession: currentSession.session,\n\t\t\tuser: {\n\t\t\t\t...currentSession.user,\n\t\t\t\temailVerified: true\n\t\t\t}\n\t\t});\n\t}\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tuser: null\n\t});\n});\n\n//#endregion\n//#region src/api/routes/error.ts\nfunction sanitize(input) {\n\treturn input.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g, \"&amp;\");\n}\nconst html = (options, code = \"Unknown\", description = null) => {\n\tconst custom = options.onAPIError?.customizeDefaultErrorPage;\n\treturn `<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Error</title>\n    <style>\n      * {\n        box-sizing: border-box;\n      }\n      body {\n        font-family: ${custom?.font?.defaultFamily || \"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif\"};\n        background: ${custom?.colors?.background || \"var(--background)\"};\n        color: var(--foreground);\n        margin: 0;\n      }\n      :root,\n      :host {\n        --spacing: 0.25rem;\n        --container-md: 28rem;\n        --text-sm: ${custom?.size?.textSm || \"0.875rem\"};\n        --text-sm--line-height: calc(1.25 / 0.875);\n        --text-2xl: ${custom?.size?.text2xl || \"1.5rem\"};\n        --text-2xl--line-height: calc(2 / 1.5);\n        --text-4xl: ${custom?.size?.text4xl || \"2.25rem\"};\n        --text-4xl--line-height: calc(2.5 / 2.25);\n        --text-6xl: ${custom?.size?.text6xl || \"3rem\"};\n        --text-6xl--line-height: 1;\n        --font-weight-medium: 500;\n        --font-weight-semibold: 600;\n        --font-weight-bold: 700;\n        --default-transition-duration: 150ms;\n        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n        --radius: ${custom?.size?.radiusSm || \"0.625rem\"};\n        --default-mono-font-family: ${custom?.font?.monoFamily || \"var(--font-geist-mono)\"};\n        --primary: ${custom?.colors?.primary || \"black\"};\n        --primary-foreground: ${custom?.colors?.primaryForeground || \"white\"};\n        --background: ${custom?.colors?.background || \"white\"};\n        --foreground: ${custom?.colors?.foreground || \"oklch(0.271 0 0)\"};\n        --border: ${custom?.colors?.border || \"oklch(0.89 0 0)\"};\n        --destructive: ${custom?.colors?.destructive || \"oklch(0.55 0.15 25.723)\"};\n        --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.545 0 0)\"};\n        --corner-border: ${custom?.colors?.cornerBorder || \"#404040\"};\n      }\n\n      button, .btn {\n        cursor: pointer;\n        background: none;\n        border: none;\n        color: inherit;\n        font: inherit;\n        transition: all var(--default-transition-duration)\n          var(--default-transition-timing-function);\n      }\n      button:hover, .btn:hover {\n        opacity: 0.8;\n      }\n\n      @media (prefers-color-scheme: dark) {\n        :root,\n        :host {\n          --primary: ${custom?.colors?.primary || \"white\"};\n          --primary-foreground: ${custom?.colors?.primaryForeground || \"black\"};\n          --background: ${custom?.colors?.background || \"oklch(0.15 0 0)\"};\n          --foreground: ${custom?.colors?.foreground || \"oklch(0.98 0 0)\"};\n          --border: ${custom?.colors?.border || \"oklch(0.27 0 0)\"};\n          --destructive: ${custom?.colors?.destructive || \"oklch(0.65 0.15 25.723)\"};\n          --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.65 0 0)\"};\n          --corner-border: ${custom?.colors?.cornerBorder || \"#a0a0a0\"};\n        }\n      }\n      @media (max-width: 640px) {\n        :root, :host {\n          --text-6xl: 2.5rem;\n          --text-2xl: 1.25rem;\n          --text-sm: 0.8125rem;\n        }\n      }\n      @media (max-width: 480px) {\n        :root, :host {\n          --text-6xl: 2rem;\n          --text-2xl: 1.125rem;\n        }\n      }\n    </style>\n  </head>\n  <body style=\"width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;\">\n    <div\n        style=\"\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            gap: 1.5rem;\n            position: relative;\n            width: 100%;\n            min-height: 100vh;\n            padding: 1rem;\n        \"\n        >\n${custom?.disableBackgroundGrid ? \"\" : `\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          background-image: linear-gradient(to right, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px),\n            linear-gradient(to bottom, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px);\n          background-size: 40px 40px;\n          opacity: 0.6;\n          pointer-events: none;\n          width: 100vw;\n          height: 100vh;\n        \"\n      ></div>\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: ${custom?.colors?.background || \"var(--background)\"};\n          mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          pointer-events: none;\n        \"\n      ></div>\n`}\n\n<div\n  style=\"\n    position: relative;\n    z-index: 10;\n    border: 2px solid var(--border);\n    background: ${custom?.colors?.cardBackground || \"var(--background)\"};\n    padding: 1.5rem;\n    max-width: 42rem;\n    width: 100%;\n  \"\n>\n    ${custom?.disableCornerDecorations ? \"\" : `\n        <!-- Corner decorations -->\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>\n  \n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>`}\n\n        <div style=\"text-align: center; margin-bottom: 1.5rem;\">\n          <div style=\"margin-bottom: 1.5rem;\">\n            <div\n              style=\"\n                display: inline-block;\n                border: 2px solid ${custom?.disableTitleBorder ? \"transparent\" : custom?.colors?.titleBorder || \"var(--destructive)\"};\n                padding: 0.375rem 1rem;\n              \"\n            >\n              <h1\n                style=\"\n                  font-size: var(--text-6xl);\n                  font-weight: var(--font-weight-semibold);\n                  color: ${custom?.colors?.titleColor || \"var(--foreground)\"};\n                  letter-spacing: -0.02em;\n                  margin: 0;\n                \"\n              >\n                ERROR\n              </h1>\n            </div>\n            <div\n              style=\"\n                height: 2px;\n                background-color: var(--border);\n                width: calc(100% + 3rem);\n                margin-left: -1.5rem;\n                margin-top: 1.5rem;\n              \"\n            ></div>\n          </div>\n\n          <h2\n            style=\"\n              font-size: var(--text-2xl);\n              font-weight: var(--font-weight-semibold);\n              color: var(--foreground);\n              margin: 0 0 1rem;\n            \"\n          >\n            Something went wrong\n          </h2>\n\n          <div\n            style=\"\n                display: inline-flex;\n                align-items: center;\n                gap: 0.5rem;\n                border: 2px solid var(--border);\n                background-color: var(--muted);\n                padding: 0.375rem 0.75rem;\n                margin: 0 0 1rem;\n                flex-wrap: wrap;\n                justify-content: center;\n            \"\n            >\n            <span\n                style=\"\n                font-size: 0.75rem;\n                color: var(--muted-foreground);\n                font-weight: var(--font-weight-semibold);\n                \"\n            >\n                CODE:\n            </span>\n            <span\n                style=\"\n                font-size: var(--text-sm);\n                font-family: var(--default-mono-font-family, monospace);\n                color: var(--foreground);\n                word-break: break-all;\n                \"\n            >\n                ${sanitize(code)}\n            </span>\n            </div>\n\n          <p\n            style=\"\n              color: var(--muted-foreground);\n              max-width: 28rem;\n              margin: 0 auto;\n              font-size: var(--text-sm);\n              line-height: 1.5;\n              text-wrap: pretty;\n            \"\n          >\n            ${!description ? `We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(code)}' target='_blank' rel=\"noopener noreferrer\" style='color: var(--foreground); text-decoration: underline;'>here</a>.` : description}\n          </p>\n        </div>\n\n        <div\n          style=\"\n            display: flex;\n            gap: 0.75rem;\n            margin-top: 1.5rem;\n            justify-content: center;\n            flex-wrap: wrap;\n          \"\n        >\n          <a\n            href=\"/\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: var(--primary);\n                color: var(--primary-foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Go Home\n            </div>\n          </a>\n          <a\n            href=\"https://better-auth.com/docs/errors/${encodeURIComponent(code)}?askai=${encodeURIComponent(`What does the error code ${code} mean?`)}\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: transparent;\n                color: var(--foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Ask AI\n            </div>\n          </a>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>`;\n};\nconst error = createAuthEndpoint(\"/error\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t...HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Displays an error page\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"text/html\": { schema: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The HTML content of the error page\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst url = new URL(c.request?.url || \"\");\n\tconst unsanitizedCode = url.searchParams.get(\"error\") || \"UNKNOWN\";\n\tconst unsanitizedDescription = url.searchParams.get(\"error_description\") || null;\n\tconst safeCode = /^[\\'A-Za-z0-9_-]+$/.test(unsanitizedCode || \"\") ? unsanitizedCode : \"UNKNOWN\";\n\tconst safeDescription = unsanitizedDescription ? sanitize(unsanitizedDescription) : null;\n\tconst queryParams = new URLSearchParams();\n\tqueryParams.set(\"error\", safeCode);\n\tif (unsanitizedDescription) queryParams.set(\"error_description\", unsanitizedDescription);\n\tconst options = c.context.options;\n\tconst errorURL = options.onAPIError?.errorURL;\n\tif (errorURL) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `${errorURL}${errorURL.includes(\"?\") ? \"&\" : \"?\"}${queryParams.toString()}` }\n\t});\n\tif (isProduction && !options.onAPIError?.customizeDefaultErrorPage) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `/?${queryParams.toString()}` }\n\t});\n\treturn new Response(html(c.context.options, safeCode, safeDescription), { headers: { \"Content-Type\": \"text/html\" } });\n});\n\n//#endregion\n//#region src/api/routes/ok.ts\nconst ok = createAuthEndpoint(\"/ok\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t...HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Check if the API is working\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API is working\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { ok: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the API is working\"\n\t\t\t\t\t} },\n\t\t\t\t\trequired: [\"ok\"]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn ctx.json({ ok: true });\n});\n\n//#endregion\n//#region src/api/routes/reset-password.ts\nfunction redirectError(ctx, callbackURL, query) {\n\tconst url = callbackURL ? new URL(callbackURL, ctx.baseURL) : new URL(`${ctx.baseURL}/error`);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nfunction redirectCallback(ctx, callbackURL, query) {\n\tconst url = new URL(callbackURL, ctx.baseURL);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nconst requestPasswordReset = createAuthEndpoint(\"/request-password-reset\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\temail: z.email().meta({ description: \"The email address of the user to send a password reset email to\" }),\n\t\tredirectTo: z.string().meta({ description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"requestPasswordReset\",\n\t\tdescription: \"Send a password reset email to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tstatus: { type: \"boolean\" },\n\t\t\t\t\tmessage: { type: \"string\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n\t\tctx.context.logger.error(\"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: \"Reset password isn't enabled\" });\n\t}\n\tconst { email, redirectTo } = ctx.body;\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\t/**\n\t\t* We simulate the verification token generation and the database lookup\n\t\t* to mitigate timing attacks.\n\t\t*/\n\t\tgenerateId(24);\n\t\tawait ctx.context.internalAdapter.findVerificationValue(\"dummy-verification-token\");\n\t\tctx.context.logger.error(\"Reset Password: User not found\", { email });\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t\t});\n\t}\n\tconst expiresAt = getDate(ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || 3600 * 1, \"sec\");\n\tconst verificationToken = generateId(24);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: user.user.id,\n\t\tidentifier: `reset-password:${verificationToken}`,\n\t\texpiresAt\n\t});\n\tconst callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n\tconst url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n\tawait ctx.context.options.emailAndPassword.sendResetPassword({\n\t\tuser: user.user,\n\t\turl,\n\t\ttoken: verificationToken\n\t}, ctx.request).catch((e) => {\n\t\tctx.context.logger.error(\"Failed to send reset password email\", e);\n\t});\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t});\n});\nconst requestPasswordResetCallback = createAuthEndpoint(\"/reset-password/:token\", {\n\tmethod: \"GET\",\n\toperationId: \"forgetPasswordCallback\",\n\tquery: z.object({ callbackURL: z.string().meta({ description: \"The URL to redirect the user to reset their password\" }) }),\n\tuse: [originCheck((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPasswordCallback\",\n\t\tdescription: \"Redirects the user to the callback URL with the token\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"path\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The token to reset the password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The URL to redirect the user to reset their password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { token: { type: \"string\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { token } = ctx.params;\n\tconst { callbackURL } = ctx.query;\n\tif (!token || !callbackURL) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(`reset-password:${token}`);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tthrow ctx.redirect(redirectCallback(ctx.context, callbackURL, { token }));\n});\nconst resetPassword = createAuthEndpoint(\"/reset-password\", {\n\tmethod: \"POST\",\n\toperationId: \"resetPassword\",\n\tquery: z.object({ token: z.string().optional() }).optional(),\n\tbody: z.object({\n\t\tnewPassword: z.string().meta({ description: \"The new password to set\" }),\n\t\ttoken: z.string().meta({ description: \"The token to reset the password\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPassword\",\n\t\tdescription: \"Reset the password for a user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token || ctx.query?.token;\n\tif (!token) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst { newPassword } = ctx.body;\n\tconst minLength = ctx.context.password?.config.minPasswordLength;\n\tconst maxLength = ctx.context.password?.config.maxPasswordLength;\n\tif (newPassword.length < minLength) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\tif (newPassword.length > maxLength) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\tconst id = `reset-password:${token}`;\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(id);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst userId = verification.value;\n\tconst hashedPassword = await ctx.context.password.hash(newPassword);\n\tif (!(await ctx.context.internalAdapter.findAccounts(userId)).find((ac) => ac.providerId === \"credential\")) await ctx.context.internalAdapter.createAccount({\n\t\tuserId,\n\t\tproviderId: \"credential\",\n\t\tpassword: hashedPassword,\n\t\taccountId: userId\n\t});\n\telse await ctx.context.internalAdapter.updatePassword(userId, hashedPassword);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\tif (ctx.context.options.emailAndPassword?.onPasswordReset) {\n\t\tconst user = await ctx.context.internalAdapter.findUserById(userId);\n\t\tif (user) await ctx.context.options.emailAndPassword.onPasswordReset({ user }, ctx.request);\n\t}\n\tif (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) await ctx.context.internalAdapter.deleteSessions(userId);\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n//#region src/api/routes/sign-in.ts\nconst socialSignInBodySchema = z.object({\n\tcallbackURL: z.string().meta({ description: \"Callback URL to redirect to after the user has signed in\" }).optional(),\n\tnewUserCallbackURL: z.string().optional(),\n\terrorCallbackURL: z.string().meta({ description: \"Callback URL to redirect to if an error happens\" }).optional(),\n\tprovider: SocialProviderListEnum,\n\tdisableRedirect: z.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\tidToken: z.optional(z.object({\n\t\ttoken: z.string().meta({ description: \"ID token from the provider\" }),\n\t\tnonce: z.string().meta({ description: \"Nonce used to generate the token\" }).optional(),\n\t\taccessToken: z.string().meta({ description: \"Access token from the provider\" }).optional(),\n\t\trefreshToken: z.string().meta({ description: \"Refresh token from the provider\" }).optional(),\n\t\texpiresAt: z.number().meta({ description: \"Expiry date of the token\" }).optional()\n\t})),\n\tscopes: z.array(z.string()).meta({ description: \"Array of scopes to request from the provider. This will override the default scopes passed.\" }).optional(),\n\trequestSignUp: z.boolean().meta({ description: \"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider\" }).optional(),\n\tloginHint: z.string().meta({ description: \"The login hint to use for the authorization code request\" }).optional(),\n\tadditionalData: z.record(z.string(), z.any()).optional().meta({ description: \"Additional data to be passed through the OAuth flow\" })\n});\nconst signInSocial = () => createAuthEndpoint(\"/sign-in/social\", {\n\tmethod: \"POST\",\n\toperationId: \"socialSignIn\",\n\tbody: socialSignInBodySchema,\n\tmetadata: {\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\tdescription: \"Sign in with a social provider\",\n\t\t\toperationId: \"socialSignIn\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttoken: { type: \"string\" },\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: { type: \"string\" },\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new APIError(\"NOT_FOUND\", { message: BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new APIError(\"NOT_FOUND\", { message: BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst userInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!userInfo || !userInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tif (!userInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tconst data = await handleOAuthUserInfo(c, {\n\t\t\tuserInfo: {\n\t\t\t\t...userInfo.user,\n\t\t\t\temail: userInfo.user.email,\n\t\t\t\tid: String(userInfo.user.id),\n\t\t\t\tname: userInfo.user.name || \"\",\n\t\t\t\timage: userInfo.user.image,\n\t\t\t\temailVerified: userInfo.user.emailVerified || false\n\t\t\t},\n\t\t\taccount: {\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: String(userInfo.user.id),\n\t\t\t\taccessToken: c.body.idToken.accessToken\n\t\t\t},\n\t\t\tcallbackURL: c.body.callbackURL,\n\t\t\tdisableSignUp: provider.disableImplicitSignUp && !c.body.requestSignUp || provider.disableSignUp\n\t\t});\n\t\tif (data.error) throw new APIError(\"UNAUTHORIZED\", { message: data.error });\n\t\tawait setSessionCookie(c, data.data);\n\t\treturn c.json({\n\t\t\tredirect: false,\n\t\t\ttoken: data.data.session.token,\n\t\t\turl: void 0,\n\t\t\tuser: parseUserOutput(c.context.options, data.data.user)\n\t\t});\n\t}\n\tconst { codeVerifier, state } = await generateState(c, void 0, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate,\n\t\tcodeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes,\n\t\tloginHint: c.body.loginHint\n\t});\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst signInEmail = () => createAuthEndpoint(\"/sign-in/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signInEmail\",\n\tbody: z.object({\n\t\temail: z.string().meta({ description: \"Email of the user\" }),\n\t\tpassword: z.string().meta({ description: \"Password of the user\" }),\n\t\tcallbackURL: z.string().meta({ description: \"Callback URL to use as a redirect for email verification\" }).optional(),\n\t\trememberMe: z.boolean().meta({ description: \"If this is false, the session will not be remembered. Default is `true`.\" }).default(true).optional()\n\t}),\n\tmetadata: {\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signInEmail\",\n\t\t\tdescription: \"Sign in with email and password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Session token\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tif (!ctx.context.options?.emailAndPassword?.enabled) {\n\t\tctx.context.logger.error(\"Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: \"Email and password is not enabled\" });\n\t}\n\tconst { email, password } = ctx.body;\n\tif (!z.email().safeParse(email).success) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.INVALID_EMAIL });\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"User not found\", { email });\n\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst credentialAccount = user.accounts.find((a) => a.providerId === \"credential\");\n\tif (!credentialAccount) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Credential account not found\", { email });\n\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst currentPassword = credentialAccount?.password;\n\tif (!currentPassword) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Password not found\", { email });\n\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (!await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword\n\t})) {\n\t\tctx.context.logger.error(\"Invalid password\");\n\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.user.emailVerified) {\n\t\tif (!ctx.context.options?.emailVerification?.sendVerificationEmail) throw new APIError(\"FORBIDDEN\", { message: BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t\tif (ctx.context.options?.emailVerification?.sendOnSignIn) {\n\t\t\tconst token = await createEmailVerificationToken(ctx.context.secret, user.user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tawait ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: user.user,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request);\n\t\t}\n\t\tthrow new APIError(\"FORBIDDEN\", { message: BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t}\n\tconst session = await ctx.context.internalAdapter.createSession(user.user.id, ctx.body.rememberMe === false);\n\tif (!session) {\n\t\tctx.context.logger.error(\"Failed to create session\");\n\t\tthrow new APIError(\"UNAUTHORIZED\", { message: BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t}\n\tawait setSessionCookie(ctx, {\n\t\tsession,\n\t\tuser: user.user\n\t}, ctx.body.rememberMe === false);\n\treturn ctx.json({\n\t\tredirect: !!ctx.body.callbackURL,\n\t\ttoken: session.token,\n\t\turl: ctx.body.callbackURL,\n\t\tuser: parseUserOutput(ctx.context.options, user.user)\n\t});\n});\n\n//#endregion\n//#region src/api/routes/sign-out.ts\nconst signOut = createAuthEndpoint(\"/sign-out\", {\n\tmethod: \"POST\",\n\toperationId: \"signOut\",\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"signOut\",\n\t\tdescription: \"Sign out the current user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\tif (sessionCookieToken) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n\t} catch (e) {\n\t\tctx.context.logger.error(\"Failed to delete session from database\", e);\n\t}\n\tdeleteSessionCookie(ctx);\n\treturn ctx.json({ success: true });\n});\n\n//#endregion\n//#region src/api/routes/sign-up.ts\nconst signUpEmail = () => createAuthEndpoint(\"/sign-up/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signUpWithEmailAndPassword\",\n\tbody: z.record(z.string(), z.any()),\n\tmetadata: {\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signUpWithEmailAndPassword\",\n\t\t\tdescription: \"Sign up a user using email and password\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\temail: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The email of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tpassword: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The password of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tcallbackURL: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The URL to use for email verification callback\"\n\t\t\t\t\t},\n\t\t\t\t\trememberMe: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"If this is false, the session will not be remembered. Default is `true`.\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"email\",\n\t\t\t\t\t\"password\"\n\t\t\t\t]\n\t\t\t} } } },\n\t\t\tresponses: {\n\t\t\t\t\"200\": {\n\t\t\t\t\tdescription: \"Successfully created user\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Authentication token for the session\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"user\"]\n\t\t\t\t\t} } }\n\t\t\t\t},\n\t\t\t\t\"422\": {\n\t\t\t\t\tdescription: \"Unprocessable Entity. User already exists or failed to create user.\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t\t} } }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn runWithTransaction(ctx.context.adapter, async () => {\n\t\tif (!ctx.context.options.emailAndPassword?.enabled || ctx.context.options.emailAndPassword?.disableSignUp) throw new APIError(\"BAD_REQUEST\", { message: \"Email and password sign up is not enabled\" });\n\t\tconst body = ctx.body;\n\t\tconst { name, email, password, image, callbackURL, rememberMe, ...rest } = body;\n\t\tif (!z.email().safeParse(email).success) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.INVALID_EMAIL });\n\t\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\t\tif (password.length < minPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too short\");\n\t\t\tthrow new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t\t}\n\t\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\t\tif (password.length > maxPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too long\");\n\t\t\tthrow new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t\t}\n\t\tif ((await ctx.context.internalAdapter.findUserByEmail(email))?.user) {\n\t\t\tctx.context.logger.info(`Sign-up attempt for existing email: ${email}`);\n\t\t\tthrow new APIError(\"UNPROCESSABLE_ENTITY\", { message: BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t\t}\n\t\t/**\n\t\t* Hash the password\n\t\t*\n\t\t* This is done prior to creating the user\n\t\t* to ensure that any plugin that\n\t\t* may break the hashing should break\n\t\t* before the user is created.\n\t\t*/\n\t\tconst hash = await ctx.context.password.hash(password);\n\t\tlet createdUser;\n\t\ttry {\n\t\t\tconst data = parseUserInput(ctx.context.options, rest, \"create\");\n\t\t\tcreatedUser = await ctx.context.internalAdapter.createUser({\n\t\t\t\temail: email.toLowerCase(),\n\t\t\t\tname,\n\t\t\t\timage,\n\t\t\t\t...data,\n\t\t\t\temailVerified: false\n\t\t\t});\n\t\t\tif (!createdUser) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t} catch (e) {\n\t\t\tif (isDevelopment()) ctx.context.logger.error(\"Failed to create user\", e);\n\t\t\tif (e instanceof APIError) throw e;\n\t\t\tctx.context.logger?.error(\"Failed to create user\", e);\n\t\t\tthrow new APIError(\"UNPROCESSABLE_ENTITY\", {\n\t\t\t\tmessage: BASE_ERROR_CODES.FAILED_TO_CREATE_USER,\n\t\t\t\tdetails: e\n\t\t\t});\n\t\t}\n\t\tif (!createdUser) throw new APIError(\"UNPROCESSABLE_ENTITY\", { message: BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: createdUser.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: createdUser.id,\n\t\t\tpassword: hash\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendOnSignUp || ctx.context.options.emailAndPassword.requireEmailVerification) {\n\t\t\tconst token = await createEmailVerificationToken(ctx.context.secret, createdUser.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL$1 = body.callbackURL ? encodeURIComponent(body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL$1}`;\n\t\t\tconst args = ctx.request ? [{\n\t\t\t\tuser: createdUser,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request] : [{\n\t\t\t\tuser: createdUser,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}];\n\t\t\tawait ctx.context.options.emailVerification?.sendVerificationEmail?.(...args);\n\t\t}\n\t\tif (ctx.context.options.emailAndPassword.autoSignIn === false || ctx.context.options.emailAndPassword.requireEmailVerification) return ctx.json({\n\t\t\ttoken: null,\n\t\t\tuser: parseUserOutput(ctx.context.options, createdUser)\n\t\t});\n\t\tconst session = await ctx.context.internalAdapter.createSession(createdUser.id, rememberMe === false);\n\t\tif (!session) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\tawait setSessionCookie(ctx, {\n\t\t\tsession,\n\t\t\tuser: createdUser\n\t\t}, rememberMe === false);\n\t\treturn ctx.json({\n\t\t\ttoken: session.token,\n\t\t\tuser: parseUserOutput(ctx.context.options, createdUser)\n\t\t});\n\t});\n});\n\n//#endregion\n//#region src/api/routes/update-user.ts\nconst updateUser = () => createAuthEndpoint(\"/update-user\", {\n\tmethod: \"POST\",\n\toperationId: \"updateUser\",\n\tbody: z.record(z.string().meta({ description: \"Field name must be a string\" }), z.any()),\n\tuse: [sessionMiddleware],\n\tmetadata: {\n\t\t$Infer: { body: {} },\n\t\topenapi: {\n\t\t\toperationId: \"updateUser\",\n\t\t\tdescription: \"Update the current user\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The image of the user\",\n\t\t\t\t\t\tnullable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} } } },\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { user: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tconst body = ctx.body;\n\tif (body.email) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED });\n\tconst { name, image, ...rest } = body;\n\tconst session = ctx.context.session;\n\tconst additionalFields = parseUserInput(ctx.context.options, rest, \"update\");\n\tif (image === void 0 && name === void 0 && Object.keys(additionalFields).length === 0) throw new APIError(\"BAD_REQUEST\", { message: \"No fields to update\" });\n\tconst user = await ctx.context.internalAdapter.updateUser(session.user.id, {\n\t\tname,\n\t\timage,\n\t\t...additionalFields\n\t});\n\t/**\n\t* Update the session cookie with the new user data\n\t*/\n\tawait setSessionCookie(ctx, {\n\t\tsession: session.session,\n\t\tuser\n\t});\n\treturn ctx.json({ status: true });\n});\nconst changePassword = createAuthEndpoint(\"/change-password\", {\n\tmethod: \"POST\",\n\toperationId: \"changePassword\",\n\tbody: z.object({\n\t\tnewPassword: z.string().meta({ description: \"The new password to set\" }),\n\t\tcurrentPassword: z.string().meta({ description: \"The current password is required\" }),\n\t\trevokeOtherSessions: z.boolean().meta({ description: \"Must be a boolean value\" }).optional()\n\t}),\n\tuse: [sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changePassword\",\n\t\tdescription: \"Change the password of the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Password successfully changed\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\ttoken: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\tdescription: \"New session token if other sessions were revoked\"\n\t\t\t\t\t},\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { newPassword, currentPassword, revokeOtherSessions: revokeOtherSessions$1 } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tif (!account || !account.password) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!await ctx.context.password.verify({\n\t\thash: account.password,\n\t\tpassword: currentPassword\n\t})) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.INVALID_PASSWORD });\n\tawait ctx.context.internalAdapter.updateAccount(account.id, { password: passwordHash });\n\tlet token = null;\n\tif (revokeOtherSessions$1) {\n\t\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t\tconst newSession = await ctx.context.internalAdapter.createSession(session.user.id);\n\t\tif (!newSession) throw new APIError(\"INTERNAL_SERVER_ERROR\", { message: BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t\tawait setSessionCookie(ctx, {\n\t\t\tsession: newSession,\n\t\t\tuser: session.user\n\t\t});\n\t\ttoken = newSession.token;\n\t}\n\treturn ctx.json({\n\t\ttoken,\n\t\tuser: {\n\t\t\tid: session.user.id,\n\t\t\temail: session.user.email,\n\t\t\tname: session.user.name,\n\t\t\timage: session.user.image,\n\t\t\temailVerified: session.user.emailVerified,\n\t\t\tcreatedAt: session.user.createdAt,\n\t\t\tupdatedAt: session.user.updatedAt\n\t\t}\n\t});\n});\nconst setPassword = createAuthEndpoint(\"/set-password\", {\n\tmethod: \"POST\",\n\tbody: z.object({ newPassword: z.string().meta({ description: \"The new password to set is required\" }) }),\n\tmetadata: { SERVER_ONLY: true },\n\tuse: [sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { newPassword } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!account) {\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: session.user.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: session.user.id,\n\t\t\tpassword: passwordHash\n\t\t});\n\t\treturn ctx.json({ status: true });\n\t}\n\tthrow new APIError(\"BAD_REQUEST\", { message: \"user already has a password\" });\n});\nconst deleteUser = createAuthEndpoint(\"/delete-user\", {\n\tmethod: \"POST\",\n\tuse: [sensitiveSessionMiddleware],\n\tbody: z.object({\n\t\tcallbackURL: z.string().meta({ description: \"The callback URL to redirect to after the user is deleted\" }).optional(),\n\t\tpassword: z.string().meta({ description: \"The password of the user is required to delete the user\" }).optional(),\n\t\ttoken: z.string().meta({ description: \"The token to delete the user is required\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"deleteUser\",\n\t\tdescription: \"Delete the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The callback URL to redirect to after the user is deleted\"\n\t\t\t\t},\n\t\t\t\tpassword: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The user's password. Required if session is not fresh\"\n\t\t\t\t},\n\t\t\t\ttoken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The deletion verification token\"\n\t\t\t\t}\n\t\t\t}\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User deletion processed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the operation was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\", \"Verification email sent\"],\n\t\t\t\t\t\tdescription: \"Status message of the deletion process\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new APIError(\"NOT_FOUND\");\n\t}\n\tconst session = ctx.context.session;\n\tif (ctx.body.password) {\n\t\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\t\tif (!account || !account.password) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\t\tif (!await ctx.context.password.verify({\n\t\t\thash: account.password,\n\t\t\tpassword: ctx.body.password\n\t\t})) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.INVALID_PASSWORD });\n\t}\n\tif (ctx.body.token) {\n\t\tawait deleteUserCallback({\n\t\t\t...ctx,\n\t\t\tquery: { token: ctx.body.token }\n\t\t});\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"User deleted\"\n\t\t});\n\t}\n\tif (ctx.context.options.user.deleteUser?.sendDeleteAccountVerification) {\n\t\tconst token = generateRandomString(32, \"0-9\", \"a-z\");\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: session.user.id,\n\t\t\tidentifier: `delete-account-${token}`,\n\t\t\texpiresAt: new Date(Date.now() + (ctx.context.options.user.deleteUser?.deleteTokenExpiresIn || 3600 * 24) * 1e3)\n\t\t});\n\t\tconst url = `${ctx.context.baseURL}/delete-user/callback?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tawait ctx.context.options.user.deleteUser.sendDeleteAccountVerification({\n\t\t\tuser: session.user,\n\t\t\turl,\n\t\t\ttoken\n\t\t}, ctx.request);\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Verification email sent\"\n\t\t});\n\t}\n\tif (!ctx.body.password && ctx.context.sessionConfig.freshAge !== 0) {\n\t\tconst currentAge = new Date(session.session.createdAt).getTime();\n\t\tconst freshAge = ctx.context.sessionConfig.freshAge * 1e3;\n\t\tif (Date.now() - currentAge > freshAge * 1e3) throw new APIError(\"BAD_REQUEST\", { message: BASE_ERROR_CODES.SESSION_EXPIRED });\n\t}\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\tdeleteSessionCookie(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst deleteUserCallback = createAuthEndpoint(\"/delete-user/callback\", {\n\tmethod: \"GET\",\n\tquery: z.object({\n\t\ttoken: z.string().meta({ description: \"The token to verify the deletion request\" }),\n\t\tcallbackURL: z.string().meta({ description: \"The URL to redirect to after deletion\" }).optional()\n\t}),\n\tuse: [originCheck((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Callback to complete user deletion with verification token\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User successfully deleted\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the deletion was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\"],\n\t\t\t\t\t\tdescription: \"Confirmation message\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new APIError(\"NOT_FOUND\");\n\t}\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session) throw new APIError(\"NOT_FOUND\", { message: BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\tconst token = await ctx.context.internalAdapter.findVerificationValue(`delete-account-${ctx.query.token}`);\n\tif (!token || token.expiresAt < /* @__PURE__ */ new Date()) throw new APIError(\"NOT_FOUND\", { message: BASE_ERROR_CODES.INVALID_TOKEN });\n\tif (token.value !== session.user.id) throw new APIError(\"NOT_FOUND\", { message: BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\tawait ctx.context.internalAdapter.deleteAccounts(session.user.id);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(token.id);\n\tdeleteSessionCookie(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL || \"/\");\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst changeEmail = createAuthEndpoint(\"/change-email\", {\n\tmethod: \"POST\",\n\tbody: z.object({\n\t\tnewEmail: z.email().meta({ description: \"The new email address to set must be a valid email address\" }),\n\t\tcallbackURL: z.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changeEmail\",\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Email change request processed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Indicates if the request was successful\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tenum: [\"Email updated\", \"Verification email sent\"],\n\t\t\t\t\t\t\tdescription: \"Status message of the email change process\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"status\"]\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"422\": {\n\t\t\t\tdescription: \"Unprocessable Entity. Email already exists\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.changeEmail?.enabled) {\n\t\tctx.context.logger.error(\"Change email is disabled.\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: \"Change email is disabled\" });\n\t}\n\tconst newEmail = ctx.body.newEmail.toLowerCase();\n\tif (newEmail === ctx.context.session.user.email) {\n\t\tctx.context.logger.error(\"Email is the same\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: \"Email is the same\" });\n\t}\n\tif (await ctx.context.internalAdapter.findUserByEmail(newEmail)) {\n\t\tctx.context.logger.error(\"Email already exists\");\n\t\tthrow new APIError(\"UNPROCESSABLE_ENTITY\", { message: BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t}\n\t/**\n\t* If the email is not verified, we can update the email if the option is enabled\n\t*/\n\tif (ctx.context.session.user.emailVerified !== true && ctx.context.options.user.changeEmail.updateEmailWithoutVerification) {\n\t\tawait ctx.context.internalAdapter.updateUserByEmail(ctx.context.session.user.email, { email: newEmail });\n\t\tawait setSessionCookie(ctx, {\n\t\t\tsession: ctx.context.session.session,\n\t\t\tuser: {\n\t\t\t\t...ctx.context.session.user,\n\t\t\t\temail: newEmail\n\t\t\t}\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\tconst token$1 = await createEmailVerificationToken(ctx.context.secret, newEmail, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\t\tawait ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: {\n\t\t\t\t\t...ctx.context.session.user,\n\t\t\t\t\temail: newEmail\n\t\t\t\t},\n\t\t\t\turl: url$1,\n\t\t\t\ttoken: token$1\n\t\t\t}, ctx.request);\n\t\t}\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (ctx.context.session.user.emailVerified && (ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification)) {\n\t\tconst token$1 = await createEmailVerificationToken(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-confirmation\" });\n\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tconst sendFn = ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification;\n\t\tif (sendFn) await sendFn({\n\t\t\tuser: ctx.context.session.user,\n\t\t\tnewEmail,\n\t\t\turl: url$1,\n\t\t\ttoken: token$1\n\t\t}, ctx.request);\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await createEmailVerificationToken(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\tawait ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser: {\n\t\t\t...ctx.context.session.user,\n\t\t\temail: newEmail\n\t\t},\n\t\turl,\n\t\ttoken\n\t}, ctx.request);\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n//#region src/api/to-auth-endpoints.ts\nconst defuReplaceArrays = createDefu((obj, key, value) => {\n\tif (Array.isArray(obj[key]) && Array.isArray(value)) {\n\t\tobj[key] = value;\n\t\treturn true;\n\t}\n});\nfunction toAuthEndpoints(endpoints, ctx) {\n\tconst api = {};\n\tfor (const [key, endpoint] of Object.entries(endpoints)) {\n\t\tapi[key] = async (context) => {\n\t\t\tconst run = async () => {\n\t\t\t\tconst authContext = await ctx;\n\t\t\t\tlet internalContext = {\n\t\t\t\t\t...context,\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\t...authContext,\n\t\t\t\t\t\treturned: void 0,\n\t\t\t\t\t\tresponseHeaders: void 0,\n\t\t\t\t\t\tsession: null\n\t\t\t\t\t},\n\t\t\t\t\tpath: endpoint.path,\n\t\t\t\t\theaders: context?.headers ? new Headers(context?.headers) : void 0\n\t\t\t\t};\n\t\t\t\treturn runWithEndpointContext(internalContext, async () => {\n\t\t\t\t\tconst { beforeHooks, afterHooks } = getHooks(authContext);\n\t\t\t\t\tconst before = await runBeforeHooks(internalContext, beforeHooks);\n\t\t\t\t\t/**\n\t\t\t\t\t* If `before.context` is returned, it should\n\t\t\t\t\t* get merged with the original context\n\t\t\t\t\t*/\n\t\t\t\t\tif (\"context\" in before && before.context && typeof before.context === \"object\") {\n\t\t\t\t\t\tconst { headers, ...rest } = before.context;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* Headers should be merged differently\n\t\t\t\t\t\t* so the hook doesn't override the whole\n\t\t\t\t\t\t* header\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tif (headers) headers.forEach((value, key$1) => {\n\t\t\t\t\t\t\tinternalContext.headers.set(key$1, value);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinternalContext = defuReplaceArrays(rest, internalContext);\n\t\t\t\t\t} else if (before) return context?.asResponse ? toResponse(before, { headers: context?.headers }) : context?.returnHeaders ? {\n\t\t\t\t\t\theaders: context?.headers,\n\t\t\t\t\t\tresponse: before\n\t\t\t\t\t} : before;\n\t\t\t\t\tinternalContext.asResponse = false;\n\t\t\t\t\tinternalContext.returnHeaders = true;\n\t\t\t\t\tinternalContext.returnStatus = true;\n\t\t\t\t\tconst result = await runWithEndpointContext(internalContext, () => endpoint(internalContext)).catch((e) => {\n\t\t\t\t\t\tif (e instanceof APIError)\n /**\n\t\t\t\t\t\t* API Errors from response are caught\n\t\t\t\t\t\t* and returned to hooks\n\t\t\t\t\t\t*/\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tresponse: e,\n\t\t\t\t\t\t\tstatus: e.statusCode,\n\t\t\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t});\n\t\t\t\t\tif (result && result instanceof Response) return result;\n\t\t\t\t\tinternalContext.context.returned = result.response;\n\t\t\t\t\tinternalContext.context.responseHeaders = result.headers;\n\t\t\t\t\tconst after = await runAfterHooks(internalContext, afterHooks);\n\t\t\t\t\tif (after.response) result.response = after.response;\n\t\t\t\t\tif (result.response instanceof APIError && shouldPublishLog(authContext.logger.level, \"debug\")) result.response.stack = result.response.errorStack;\n\t\t\t\t\tif (result.response instanceof APIError && !context?.asResponse) throw result.response;\n\t\t\t\t\treturn context?.asResponse ? toResponse(result.response, {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t}) : context?.returnHeaders ? context?.returnStatus ? {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response\n\t\t\t\t\t} : context?.returnStatus ? {\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : result.response;\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (await hasRequestState()) return run();\n\t\t\telse return runWithRequestState(/* @__PURE__ */ new WeakMap(), run);\n\t\t};\n\t\tapi[key].path = endpoint.path;\n\t\tapi[key].options = endpoint.options;\n\t}\n\treturn api;\n}\nasync function runBeforeHooks(context, hooks) {\n\tlet modifiedContext = {};\n\tfor (const hook of hooks) if (hook.matcher(context)) {\n\t\tconst result = await hook.handler({\n\t\t\t...context,\n\t\t\treturnHeaders: false\n\t\t}).catch((e) => {\n\t\t\tif (e instanceof APIError && shouldPublishLog(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\tthrow e;\n\t\t});\n\t\tif (result && typeof result === \"object\") {\n\t\t\tif (\"context\" in result && typeof result.context === \"object\") {\n\t\t\t\tconst { headers, ...rest } = result.context;\n\t\t\t\tif (headers instanceof Headers) if (modifiedContext.headers) headers.forEach((value, key) => {\n\t\t\t\t\tmodifiedContext.headers?.set(key, value);\n\t\t\t\t});\n\t\t\t\telse modifiedContext.headers = headers;\n\t\t\t\tmodifiedContext = defuReplaceArrays(rest, modifiedContext);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\treturn { context: modifiedContext };\n}\nasync function runAfterHooks(context, hooks) {\n\tfor (const hook of hooks) if (hook.matcher(context)) {\n\t\tconst result = await hook.handler(context).catch((e) => {\n\t\t\tif (e instanceof APIError) {\n\t\t\t\tif (shouldPublishLog(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\treturn {\n\t\t\t\t\tresponse: e,\n\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tthrow e;\n\t\t});\n\t\tif (result.headers) result.headers.forEach((value, key) => {\n\t\t\tif (!context.context.responseHeaders) context.context.responseHeaders = new Headers({ [key]: value });\n\t\t\telse if (key.toLowerCase() === \"set-cookie\") context.context.responseHeaders.append(key, value);\n\t\t\telse context.context.responseHeaders.set(key, value);\n\t\t});\n\t\tif (result.response) context.context.returned = result.response;\n\t}\n\treturn {\n\t\tresponse: context.context.returned,\n\t\theaders: context.context.responseHeaders\n\t};\n}\nfunction getHooks(authContext) {\n\tconst plugins = authContext.options.plugins || [];\n\tconst beforeHooks = [];\n\tconst afterHooks = [];\n\tif (authContext.options.hooks?.before) beforeHooks.push({\n\t\tmatcher: () => true,\n\t\thandler: authContext.options.hooks.before\n\t});\n\tif (authContext.options.hooks?.after) afterHooks.push({\n\t\tmatcher: () => true,\n\t\thandler: authContext.options.hooks.after\n\t});\n\tconst pluginBeforeHooks = plugins.map((plugin) => {\n\t\tif (plugin.hooks?.before) return plugin.hooks.before;\n\t}).filter((plugin) => plugin !== void 0).flat();\n\tconst pluginAfterHooks = plugins.map((plugin) => {\n\t\tif (plugin.hooks?.after) return plugin.hooks.after;\n\t}).filter((plugin) => plugin !== void 0).flat();\n\t/**\n\t* Add plugin added hooks at last\n\t*/\n\tif (pluginBeforeHooks.length) beforeHooks.push(...pluginBeforeHooks);\n\tif (pluginAfterHooks.length) afterHooks.push(...pluginAfterHooks);\n\treturn {\n\t\tbeforeHooks,\n\t\tafterHooks\n\t};\n}\n\n//#endregion\n//#region src/api/index.ts\nfunction checkEndpointConflicts(options, logger$1) {\n\tconst endpointRegistry = /* @__PURE__ */ new Map();\n\toptions.plugins?.forEach((plugin) => {\n\t\tif (plugin.endpoints) {\n\t\t\tfor (const [key, endpoint] of Object.entries(plugin.endpoints)) if (endpoint && \"path\" in endpoint) {\n\t\t\t\tconst path = endpoint.path;\n\t\t\t\tlet methods = [];\n\t\t\t\tif (endpoint.options && \"method\" in endpoint.options) {\n\t\t\t\t\tif (Array.isArray(endpoint.options.method)) methods = endpoint.options.method;\n\t\t\t\t\telse if (typeof endpoint.options.method === \"string\") methods = [endpoint.options.method];\n\t\t\t\t}\n\t\t\t\tif (methods.length === 0) methods = [\"*\"];\n\t\t\t\tif (!endpointRegistry.has(path)) endpointRegistry.set(path, []);\n\t\t\t\tendpointRegistry.get(path).push({\n\t\t\t\t\tpluginId: plugin.id,\n\t\t\t\t\tendpointKey: key,\n\t\t\t\t\tmethods\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\tconst conflicts = [];\n\tfor (const [path, entries] of endpointRegistry.entries()) if (entries.length > 1) {\n\t\tconst methodMap = /* @__PURE__ */ new Map();\n\t\tlet hasConflict = false;\n\t\tfor (const entry of entries) for (const method of entry.methods) {\n\t\t\tif (!methodMap.has(method)) methodMap.set(method, []);\n\t\t\tmethodMap.get(method).push(entry.pluginId);\n\t\t\tif (methodMap.get(method).length > 1) hasConflict = true;\n\t\t\tif (method === \"*\" && entries.length > 1) hasConflict = true;\n\t\t\telse if (method !== \"*\" && methodMap.has(\"*\")) hasConflict = true;\n\t\t}\n\t\tif (hasConflict) {\n\t\t\tconst uniquePlugins = [...new Set(entries.map((e) => e.pluginId))];\n\t\t\tconst conflictingMethods = [];\n\t\t\tfor (const [method, plugins] of methodMap.entries()) if (plugins.length > 1 || method === \"*\" && entries.length > 1 || method !== \"*\" && methodMap.has(\"*\")) conflictingMethods.push(method);\n\t\t\tconflicts.push({\n\t\t\t\tpath,\n\t\t\t\tplugins: uniquePlugins,\n\t\t\t\tconflictingMethods\n\t\t\t});\n\t\t}\n\t}\n\tif (conflicts.length > 0) {\n\t\tconst conflictMessages = conflicts.map((conflict) => `  - \"${conflict.path}\" [${conflict.conflictingMethods.join(\", \")}] used by plugins: ${conflict.plugins.join(\", \")}`).join(\"\\n\");\n\t\tlogger$1.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:\n${conflictMessages}\n\nTo resolve this, you can:\n\t1. Use only one of the conflicting plugins\n\t2. Configure the plugins to use different paths (if supported)\n\t3. Ensure plugins use different HTTP methods for the same path\n`);\n\t}\n}\nfunction getEndpoints(ctx, options) {\n\tconst pluginEndpoints = options.plugins?.reduce((acc, plugin) => {\n\t\treturn {\n\t\t\t...acc,\n\t\t\t...plugin.endpoints\n\t\t};\n\t}, {}) ?? {};\n\tconst middlewares = options.plugins?.map((plugin) => plugin.middlewares?.map((m) => {\n\t\tconst middleware = (async (context) => {\n\t\t\tconst authContext = await ctx;\n\t\t\treturn m.middleware({\n\t\t\t\t...context,\n\t\t\t\tcontext: {\n\t\t\t\t\t...authContext,\n\t\t\t\t\t...context.context\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tmiddleware.options = m.middleware.options;\n\t\treturn {\n\t\t\tpath: m.path,\n\t\t\tmiddleware\n\t\t};\n\t})).filter((plugin) => plugin !== void 0).flat() || [];\n\treturn {\n\t\tapi: toAuthEndpoints({\n\t\t\tsignInSocial: signInSocial(),\n\t\t\tcallbackOAuth,\n\t\t\tgetSession: getSession(),\n\t\t\tsignOut,\n\t\t\tsignUpEmail: signUpEmail(),\n\t\t\tsignInEmail: signInEmail(),\n\t\t\tresetPassword,\n\t\t\tverifyEmail,\n\t\t\tsendVerificationEmail,\n\t\t\tchangeEmail,\n\t\t\tchangePassword,\n\t\t\tsetPassword,\n\t\t\tupdateUser: updateUser(),\n\t\t\tdeleteUser,\n\t\t\trequestPasswordReset,\n\t\t\trequestPasswordResetCallback,\n\t\t\tlistSessions: listSessions(),\n\t\t\trevokeSession,\n\t\t\trevokeSessions,\n\t\t\trevokeOtherSessions,\n\t\t\tlinkSocialAccount,\n\t\t\tlistUserAccounts,\n\t\t\tdeleteUserCallback,\n\t\t\tunlinkAccount,\n\t\t\trefreshToken,\n\t\t\tgetAccessToken,\n\t\t\taccountInfo,\n\t\t\t...pluginEndpoints,\n\t\t\tok,\n\t\t\terror\n\t\t}, ctx),\n\t\tmiddlewares\n\t};\n}\nconst router = (ctx, options) => {\n\tconst { api, middlewares } = getEndpoints(ctx, options);\n\tconst basePath = new URL(ctx.baseURL).pathname;\n\treturn createRouter(api, {\n\t\trouterContext: ctx,\n\t\topenapi: { disabled: true },\n\t\tbasePath,\n\t\trouterMiddleware: [{\n\t\t\tpath: \"/**\",\n\t\t\tmiddleware: originCheckMiddleware\n\t\t}, ...middlewares],\n\t\tallowedMediaTypes: [\"application/json\"],\n\t\tasync onRequest(req) {\n\t\t\tconst disabledPaths = ctx.options.disabledPaths || [];\n\t\t\tconst path = new URL(req.url).pathname.replace(basePath, \"\");\n\t\t\tif (disabledPaths.includes(path)) return new Response(\"Not Found\", { status: 404 });\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onRequest) {\n\t\t\t\tconst response = await plugin.onRequest(req, ctx);\n\t\t\t\tif (response && \"response\" in response) return response.response;\n\t\t\t\tif (response && \"request\" in response) {\n\t\t\t\t\tconst rateLimitResponse$1 = await onRequestRateLimit(response.request, ctx);\n\t\t\t\t\tif (rateLimitResponse$1) return rateLimitResponse$1;\n\t\t\t\t\treturn response.request;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn onRequestRateLimit(req, ctx);\n\t\t},\n\t\tasync onResponse(res) {\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onResponse) {\n\t\t\t\tconst response = await plugin.onResponse(res, ctx);\n\t\t\t\tif (response) return response.response;\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t\tonError(e) {\n\t\t\tif (e instanceof APIError && e.status === \"FOUND\") return;\n\t\t\tif (options.onAPIError?.throw) throw e;\n\t\t\tif (options.onAPIError?.onError) {\n\t\t\t\toptions.onAPIError.onError(e, ctx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst optLogLevel = options.logger?.level;\n\t\t\tconst log = optLogLevel === \"error\" || optLogLevel === \"warn\" || optLogLevel === \"debug\" ? logger : void 0;\n\t\t\tif (options.logger?.disabled !== true) {\n\t\t\t\tif (e && typeof e === \"object\" && \"message\" in e && typeof e.message === \"string\") {\n\t\t\t\t\tif (e.message.includes(\"no column\") || e.message.includes(\"column\") || e.message.includes(\"relation\") || e.message.includes(\"table\") || e.message.includes(\"does not exist\")) {\n\t\t\t\t\t\tctx.logger?.error(e.message);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof APIError) {\n\t\t\t\t\tif (e.status === \"INTERNAL_SERVER_ERROR\") ctx.logger.error(e.status, e);\n\t\t\t\t\tlog?.error(e.message);\n\t\t\t\t} else ctx.logger?.error(e && typeof e === \"object\" && \"name\" in e ? e.name : \"\", e);\n\t\t\t}\n\t\t}\n\t});\n};\n\n//#endregion\nexport { getAccessToken as A, createEmailVerificationToken as C, callbackOAuth as D, verifyEmail as E, decryptOAuthToken as F, setTokenUtil as I, originCheck as L, listUserAccounts as M, refreshToken as N, handleOAuthUserInfo as O, unlinkAccount as P, originCheckMiddleware as R, error as S, sendVerificationEmailFn as T, signInSocial as _, getEndpoints as a, resetPassword as b, changeEmail as c, deleteUserCallback as d, setPassword as f, signInEmail as g, signOut as h, createAuthMiddleware$1 as i, linkSocialAccount as j, accountInfo as k, changePassword as l, signUpEmail as m, checkEndpointConflicts as n, optionsMiddleware as o, updateUser as p, createAuthEndpoint$1 as r, router as s, APIError$1 as t, deleteUser as u, requestPasswordReset as v, sendVerificationEmail as w, ok as x, requestPasswordResetCallback as y };"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AAEA,+BAA+B;AAC/B;;;AAGA,GACA,SAAS,iBAAiB,IAAI;IAC7B,IAAI,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,OAAO,SAAS,MAAM,OAAO,CAAC,EAAE,EAAE,MAAM;SAChQ,OAAO;AACb;AACA;;AAEA,GACA,SAAS,mBAAmB,GAAG;IAC9B,IAAI,SAAS;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK,UAAU,iBAAiB,GAAG,CAAC,EAAE;IACtE,OAAO;AACR;AACA;;AAEA,GACA,SAAS,UAAU,OAAO,EAAE,YAAY,IAAI;IAC3C,IAAI,MAAM,OAAO,CAAC,UAAU,OAAO,CAAC,GAAG,EAAE,QAAQ,GAAG,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,UAAU,GAAG,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IACxG,IAAI,oBAAoB;IACxB,IAAI,mBAAmB;IACvB,IAAI,WAAW;IACf,IAAI,cAAc,MAAM;QACvB,oBAAoB;QACpB,mBAAmB;QACnB,WAAW;IACZ,OAAO,IAAI,WAAW;QACrB,oBAAoB;QACpB,mBAAmB,mBAAmB;QACtC,IAAI,iBAAiB,MAAM,GAAG,GAAG;YAChC,mBAAmB,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC;YAC5C,WAAW,CAAC,IAAI,EAAE,iBAAiB,GAAG,CAAC;QACxC,OAAO,WAAW,CAAC,EAAE,EAAE,iBAAiB,CAAC,CAAC;IAC3C;IACA,IAAI,oBAAoB,YAAY,GAAG,iBAAiB,EAAE,CAAC,GAAG;IAC9D,IAAI,oBAAoB,YAAY,GAAG,iBAAiB,EAAE,CAAC,GAAG;IAC9D,IAAI,WAAW,YAAY,QAAQ,KAAK,CAAC,qBAAqB;QAAC;KAAQ;IACvE,IAAI,SAAS;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,IAAK;QACzC,IAAI,UAAU,QAAQ,CAAC,EAAE;QACzB,IAAI,cAAc,QAAQ,CAAC,IAAI,EAAE;QACjC,IAAI,mBAAmB;QACvB,IAAI,CAAC,WAAW,IAAI,GAAG;QACvB,IAAI,WAAW,IAAI,MAAM,SAAS,MAAM,GAAG,GAAG,mBAAmB;aAC5D,IAAI,gBAAgB,MAAM,mBAAmB;aAC7C,mBAAmB;QACxB,IAAI,aAAa,YAAY,MAAM;YAClC,IAAI,kBAAkB;gBACrB,UAAU,MAAM,IAAI,KAAK;gBACzB,UAAU,CAAC,GAAG,EAAE,SAAS,EAAE,EAAE,iBAAiB,GAAG,CAAC;YACnD;YACA;QACD;QACA,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;YACxC,IAAI,OAAO,OAAO,CAAC,EAAE;YACrB,IAAI,SAAS,MAAM;gBAClB,IAAI,IAAI,QAAQ,MAAM,GAAG,GAAG;oBAC3B,UAAU,iBAAiB,OAAO,CAAC,IAAI,EAAE;oBACzC;gBACD;YACD,OAAO,IAAI,SAAS,KAAK,UAAU;iBAC9B,IAAI,SAAS,KAAK,UAAU,GAAG,SAAS,EAAE,CAAC;iBAC3C,UAAU,iBAAiB;QACjC;QACA,UAAU;IACX;IACA,OAAO;AACR;AACA,SAAS,QAAQ,MAAM,EAAE,MAAM;IAC9B,IAAI,OAAO,WAAW,UAAU,MAAM,IAAI,UAAU,CAAC,6BAA6B,EAAE,OAAO,OAAO,MAAM,CAAC;IACzG,OAAO,OAAO,IAAI,CAAC;AACpB;AACA;;;;;;;;;;;;;;AAcA,GACA,SAAS,cAAc,OAAO,EAAE,OAAO;IACtC,IAAI,OAAO,YAAY,YAAY,CAAC,MAAM,OAAO,CAAC,UAAU,MAAM,IAAI,UAAU,CAAC,gFAAgF,EAAE,OAAO,QAAQ,MAAM,CAAC;IACzL,IAAI,OAAO,YAAY,YAAY,OAAO,YAAY,WAAW,UAAU;QAAE,WAAW;IAAQ;IAChG,IAAI,UAAU,MAAM,KAAK,KAAK,CAAC,CAAC,OAAO,YAAY,eAAe,OAAO,YAAY,YAAY,YAAY,QAAQ,CAAC,MAAM,OAAO,CAAC,QAAQ,GAAG,MAAM,IAAI,UAAU,CAAC,iFAAiF,EAAE,OAAO,QAAQ,MAAM,CAAC;IAC7Q,UAAU,WAAW,CAAC;IACtB,IAAI,QAAQ,SAAS,KAAK,MAAM,MAAM,IAAI,MAAM;IAChD,IAAI,gBAAgB,UAAU,SAAS,QAAQ,SAAS;IACxD,IAAI,SAAS,IAAI,OAAO,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,EAAE,QAAQ,KAAK;IAC3D,IAAI,KAAK,QAAQ,IAAI,CAAC,MAAM;IAC5B,GAAG,OAAO,GAAG;IACb,GAAG,OAAO,GAAG;IACb,GAAG,MAAM,GAAG;IACZ,OAAO;AACR;AAEA,YAAY;AACZ,6CAA6C;AAC7C;;;AAGA,GACA,MAAM,wBAAwB,IAAA,2LAAoB,EAAC,OAAO;IACzD,IAAI,IAAI,OAAO,EAAE,WAAW,SAAS,IAAI,OAAO,EAAE,WAAW,aAAa,IAAI,OAAO,EAAE,WAAW,UAAU,CAAC,IAAI,OAAO,EAAE;IAC1H,MAAM,UAAU,IAAI,OAAO,EAAE;IAC7B,MAAM,UAAU,IAAI,OAAO;IAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IACjC,MAAM,eAAe,SAAS,IAAI,aAAa,SAAS,IAAI,cAAc;IAC1E,MAAM,cAAc,MAAM,eAAe,OAAO;IAChD,MAAM,cAAc,MAAM;IAC1B,MAAM,mBAAmB,MAAM;IAC/B,MAAM,qBAAqB,MAAM;IACjC,MAAM,iBAAiB,MAAM,OAAO,CAAC,QAAQ,OAAO,CAAC,cAAc,IAAI,QAAQ,cAAc,GAAG;WAAI,QAAQ,cAAc;WAAK,MAAM,QAAQ,OAAO,CAAC,cAAc,GAAG,YAAY,EAAE;KAAC;IACrL,MAAM,aAAa,SAAS,IAAI;IAChC,MAAM,iBAAiB,CAAC,KAAK;QAC5B,IAAI,IAAI,UAAU,CAAC,MAAM,OAAO;QAChC,IAAI,QAAQ,QAAQ,CAAC,MAAM;YAC1B,IAAI,QAAQ,QAAQ,CAAC,QAAQ,OAAO,cAAc,SAAS,IAAA,kKAAS,EAAC,QAAQ;YAC7E,MAAM,OAAO,IAAA,kKAAO,EAAC;YACrB,IAAI,CAAC,MAAM,OAAO;YAClB,OAAO,cAAc,SAAS;QAC/B;QACA,MAAM,WAAW,IAAA,kKAAW,EAAC;QAC7B,OAAO,aAAa,WAAW,aAAa,YAAY,CAAC,WAAW,YAAY,IAAA,kKAAS,EAAC,OAAO,IAAI,UAAU,CAAC;IACjH;IACA,MAAM,cAAc,CAAC,KAAK;QACzB,IAAI,CAAC,KAAK;QACV,IAAI,CAAC,eAAe,IAAI,CAAC,CAAC,SAAW,eAAe,KAAK,WAAW,KAAK,WAAW,QAAQ,UAAU,YAAY,0DAA0D,IAAI,CAAC,OAAO;YACvL,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE,KAAK;YACnD,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,gCAAgC,EAAE,IAAI,wCAAwC,CAAC,EAAE,CAAC,gCAAgC,EAAE,gBAAgB;YAC7J,MAAM,IAAI,6JAAQ,CAAC,aAAa;gBAAE,SAAS,CAAC,QAAQ,EAAE,OAAO;YAAC;QAC/D;IACD;IACA,IAAI,cAAc,CAAC,IAAI,OAAO,CAAC,aAAa,IAAI,CAAC,IAAI,OAAO,CAAC,eAAe,EAAE;QAC7E,IAAI,CAAC,gBAAgB,iBAAiB,QAAQ,MAAM,IAAI,6JAAQ,CAAC,aAAa;YAAE,SAAS;QAAyB;QAClH,YAAY,cAAc;IAC3B;IACA,eAAe,YAAY,aAAa;IACxC,eAAe,YAAY,aAAa;IACxC,oBAAoB,YAAY,kBAAkB;IAClD,sBAAsB,YAAY,oBAAoB;AACvD;AACA,MAAM,cAAc,CAAC,WAAa,IAAA,2LAAoB,EAAC,OAAO;QAC7D,IAAI,CAAC,IAAI,OAAO,EAAE;QAClB,MAAM,EAAE,OAAO,EAAE,GAAG;QACpB,MAAM,cAAc,SAAS;QAC7B,MAAM,iBAAiB,MAAM,OAAO,CAAC,QAAQ,OAAO,CAAC,cAAc,IAAI,QAAQ,cAAc,GAAG;eAAI,QAAQ,cAAc;eAAK,MAAM,QAAQ,OAAO,CAAC,cAAc,GAAG,IAAI,OAAO,KAAK,EAAE;SAAC;QACzL,MAAM,iBAAiB,CAAC,KAAK;YAC5B,IAAI,IAAI,UAAU,CAAC,MAAM,OAAO;YAChC,IAAI,QAAQ,QAAQ,CAAC,MAAM;gBAC1B,IAAI,QAAQ,QAAQ,CAAC,QAAQ,OAAO,cAAc,SAAS,IAAA,kKAAS,EAAC,QAAQ;gBAC7E,MAAM,OAAO,IAAA,kKAAO,EAAC;gBACrB,IAAI,CAAC,MAAM,OAAO;gBAClB,OAAO,cAAc,SAAS;YAC/B;YACA,MAAM,WAAW,IAAA,kKAAW,EAAC;YAC7B,OAAO,aAAa,WAAW,aAAa,YAAY,CAAC,WAAW,YAAY,IAAA,kKAAS,EAAC,OAAO,IAAI,UAAU,CAAC;QACjH;QACA,MAAM,cAAc,CAAC,KAAK;YACzB,IAAI,CAAC,KAAK;YACV,IAAI,CAAC,eAAe,IAAI,CAAC,CAAC,SAAW,eAAe,KAAK,WAAW,KAAK,WAAW,QAAQ,UAAU,YAAY,0DAA0D,IAAI,CAAC,OAAO;gBACvL,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE,KAAK;gBACnD,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,gCAAgC,EAAE,IAAI,wCAAwC,CAAC,EAAE,CAAC,gCAAgC,EAAE,gBAAgB;gBAC7J,MAAM,IAAI,6JAAQ,CAAC,aAAa;oBAAE,SAAS,CAAC,QAAQ,EAAE,OAAO;gBAAC;YAC/D;QACD;QACA,MAAM,YAAY,MAAM,OAAO,CAAC,eAAe,cAAc;YAAC;SAAY;QAC1E,KAAK,MAAM,OAAO,UAAW,YAAY,KAAK;IAC/C;AAEA,YAAY;AACZ,uCAAuC;AACvC,SAAS,gBAAgB,GAAG,EAAE,MAAM,EAAE,aAAa;IAClD,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,aAAa,SAAS;IAC5B,OAAO,MAAM,cAAc,WAAW,GAAG,cAAc,cAAc,KAAK,IAAI;AAC/E;AACA,SAAS,kBAAkB,UAAU;IACpC,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;QAAE,SAAS;IAA6C,IAAI;QAC9F,QAAQ;QACR,YAAY;QACZ,SAAS;YAAE,iBAAiB,WAAW,QAAQ;QAAG;IACnD;AACD;AACA,SAAS,cAAc,WAAW,EAAE,MAAM;IACzC,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,aAAa,SAAS;IAC5B,OAAO,KAAK,IAAI,CAAC,CAAC,cAAc,aAAa,GAAG,IAAI;AACrD;AACA,SAAS,gBAAgB,GAAG;IAC3B,MAAM,QAAQ;IACd,MAAM,KAAK,IAAI,OAAO;IACtB,OAAO;QACN,KAAK,OAAO;YACX,MAAM,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC;gBAC/B;gBACA,OAAO;oBAAC;wBACP,OAAO;wBACP,OAAO;oBACR;iBAAE;YACH,EAAE,CAAC,CAAC,EAAE;YACN,IAAI,OAAO,MAAM,gBAAgB,UAAU,KAAK,WAAW,GAAG,OAAO,KAAK,WAAW;YACrF,OAAO;QACR;QACA,KAAK,OAAO,KAAK,OAAO;YACvB,IAAI;gBACH,IAAI,SAAS,MAAM,GAAG,UAAU,CAAC;oBAChC;oBACA,OAAO;wBAAC;4BACP,OAAO;4BACP,OAAO;wBACR;qBAAE;oBACF,QAAQ;wBACP,OAAO,MAAM,KAAK;wBAClB,aAAa,MAAM,WAAW;oBAC/B;gBACD;qBACK,MAAM,GAAG,MAAM,CAAC;oBACpB;oBACA,MAAM;wBACL;wBACA,OAAO,MAAM,KAAK;wBAClB,aAAa,MAAM,WAAW;oBAC/B;gBACD;YACD,EAAE,OAAO,GAAG;gBACX,IAAI,MAAM,CAAC,KAAK,CAAC,4BAA4B;YAC9C;QACD;IACD;AACD;AACA,MAAM,SAAS,aAAa,GAAG,IAAI;AACnC,SAAS,oBAAoB,GAAG,EAAE,iBAAiB;IAClD,IAAI,IAAI,OAAO,CAAC,SAAS,EAAE,eAAe,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,aAAa;IACpF,MAAM,UAAU,IAAI,SAAS,CAAC,OAAO;IACrC,IAAI,YAAY,qBAAqB,OAAO;QAC3C,KAAK,OAAO;YACX,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,gBAAgB,EAAE,IAAI;YACrD,OAAO,OAAO,IAAA,kKAAa,EAAC,QAAQ,KAAK;QAC1C;QACA,KAAK,OAAO,KAAK,OAAO;YACvB,MAAM,MAAM,mBAAmB,UAAU,IAAI,OAAO,CAAC,SAAS,EAAE,UAAU;YAC1E,MAAM,IAAI,OAAO,CAAC,gBAAgB,EAAE,MAAM,KAAK,KAAK,SAAS,CAAC,QAAQ;QACvE;IACD;SACK,IAAI,YAAY,UAAU,OAAO;QACrC,MAAM,KAAI,GAAG;YACZ,OAAO,OAAO,GAAG,CAAC;QACnB;QACA,MAAM,KAAI,GAAG,EAAE,KAAK,EAAE,OAAO;YAC5B,OAAO,GAAG,CAAC,KAAK;QACjB;IACD;IACA,OAAO,gBAAgB;AACxB;AACA,eAAe,mBAAmB,GAAG,EAAE,GAAG;IACzC,IAAI,CAAC,IAAI,SAAS,CAAC,OAAO,EAAE;IAC5B,MAAM,OAAO,IAAI,IAAI,IAAI,GAAG,EAAE,QAAQ,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,QAAQ,IAAI,aAAa;IACpF,IAAI,SAAS,IAAI,SAAS,CAAC,MAAM;IACjC,IAAI,MAAM,IAAI,SAAS,CAAC,GAAG;IAC3B,MAAM,KAAK,IAAA,qLAAK,EAAC,KAAK,IAAI,OAAO;IACjC,IAAI,CAAC,IAAI;IACT,MAAM,MAAM,KAAK;IACjB,MAAM,cAAc,yBAAyB,IAAI,CAAC,CAAC,OAAS,KAAK,WAAW,CAAC;IAC7E,IAAI,aAAa;QAChB,SAAS,YAAY,MAAM;QAC3B,MAAM,YAAY,GAAG;IACtB;IACA,KAAK,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO,IAAI,EAAE,CAAE,IAAI,OAAO,SAAS,EAAE;QACrE,MAAM,cAAc,OAAO,SAAS,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,WAAW,CAAC;QACrE,IAAI,aAAa;YAChB,SAAS,YAAY,MAAM;YAC3B,MAAM,YAAY,GAAG;YACrB;QACD;IACD;IACA,IAAI,IAAI,SAAS,CAAC,WAAW,EAAE;QAC9B,MAAM,QAAQ,OAAO,IAAI,CAAC,IAAI,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;YAC1D,IAAI,EAAE,QAAQ,CAAC,MAAM,OAAO,cAAc,GAAG;YAC7C,OAAO,MAAM;QACd;QACA,IAAI,OAAO;YACV,MAAM,aAAa,IAAI,SAAS,CAAC,WAAW,CAAC,MAAM;YACnD,MAAM,WAAW,OAAO,eAAe,aAAa,MAAM,WAAW,OAAO;YAC5E,IAAI,UAAU;gBACb,SAAS,SAAS,MAAM;gBACxB,MAAM,SAAS,GAAG;YACnB;YACA,IAAI,aAAa,OAAO;QACzB;IACD;IACA,MAAM,UAAU,oBAAoB,KAAK;QAAE;IAAO;IAClD,MAAM,OAAO,MAAM,QAAQ,GAAG,CAAC;IAC/B,MAAM,MAAM,KAAK,GAAG;IACpB,IAAI,CAAC,MAAM,MAAM,QAAQ,GAAG,CAAC,KAAK;QACjC;QACA,OAAO;QACP,aAAa;IACd;SACK;QACJ,MAAM,uBAAuB,MAAM,KAAK,WAAW;QACnD,IAAI,gBAAgB,KAAK,QAAQ,OAAO,OAAO,kBAAkB,cAAc,KAAK,WAAW,EAAE;aAC5F,IAAI,uBAAuB,SAAS,KAAK,MAAM,QAAQ,GAAG,CAAC,KAAK;YACpE,GAAG,IAAI;YACP,OAAO;YACP,aAAa;QACd,GAAG;aACE,MAAM,QAAQ,GAAG,CAAC,KAAK;YAC3B,GAAG,IAAI;YACP,OAAO,KAAK,KAAK,GAAG;YACpB,aAAa;QACd,GAAG;IACJ;AACD;AACA,SAAS;IACR,OAAO;QAAC;YACP,aAAY,IAAI;gBACf,OAAO,KAAK,UAAU,CAAC,eAAe,KAAK,UAAU,CAAC,eAAe,KAAK,UAAU,CAAC,uBAAuB,KAAK,UAAU,CAAC;YAC7H;YACA,QAAQ;YACR,KAAK;QACN;KAAE;AACH;AAEA,YAAY;AACZ,6BAA6B;AAC7B,SAAS,kBAAkB,KAAK,EAAE,GAAG;IACpC,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI,IAAI,OAAO,CAAC,OAAO,EAAE,oBAAoB,OAAO,IAAA,oKAAgB,EAAC;QACpE,KAAK,IAAI,MAAM;QACf,MAAM;IACP;IACA,OAAO;AACR;AACA,SAAS,aAAa,KAAK,EAAE,GAAG;IAC/B,IAAI,IAAI,OAAO,CAAC,OAAO,EAAE,sBAAsB,OAAO,OAAO,IAAA,oKAAgB,EAAC;QAC7E,KAAK,IAAI,MAAM;QACf,MAAM;IACP;IACA,OAAO;AACR;AAEA,YAAY;AACZ,mCAAmC;AACnC,MAAM,mBAAmB,IAAA,yLAAkB,EAAC,kBAAkB;IAC7D,QAAQ;IACR,KAAK;QAAC,sKAAiB;KAAC;IACxB,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,OAAO;oCACN,MAAM;oCACN,YAAY;wCACX,IAAI;4CAAE,MAAM;wCAAS;wCACrB,YAAY;4CAAE,MAAM;wCAAS;wCAC7B,WAAW;4CACV,MAAM;4CACN,QAAQ;wCACT;wCACA,WAAW;4CACV,MAAM;4CACN,QAAQ;wCACT;wCACA,WAAW;4CAAE,MAAM;wCAAS;wCAC5B,QAAQ;4CAAE,MAAM;wCAAS;wCACzB,QAAQ;4CACP,MAAM;4CACN,OAAO;gDAAE,MAAM;4CAAS;wCACzB;oCACD;oCACA,UAAU;wCACT;wCACA;wCACA;wCACA;wCACA;wCACA;wCACA;qCACA;gCACF;4BACD;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,MAAM,UAAU,EAAE,OAAO,CAAC,OAAO;IACjC,MAAM,WAAW,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,QAAQ,IAAI,CAAC,EAAE;IAC7E,OAAO,EAAE,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,IAAM,CAAC;YAClC,IAAI,EAAE,EAAE;YACR,YAAY,EAAE,UAAU;YACxB,WAAW,EAAE,SAAS;YACtB,WAAW,EAAE,SAAS;YACtB,WAAW,EAAE,SAAS;YACtB,QAAQ,EAAE,MAAM;YAChB,QAAQ,EAAE,KAAK,EAAE,MAAM,QAAQ,EAAE;QAClC,CAAC;AACF;AACA,MAAM,oBAAoB,IAAA,yLAAkB,EAAC,gBAAgB;IAC5D,QAAQ;IACR,gBAAgB;IAChB,MAAM,2JAAQ,CAAC;QACd,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAsD,GAAG,QAAQ;QAC7G,UAAU,6MAAsB;QAChC,SAAS,2JAAQ,CAAC;YACjB,OAAO,2JAAQ;YACf,OAAO,2JAAQ,GAAG,QAAQ;YAC1B,aAAa,2JAAQ,GAAG,QAAQ;YAChC,cAAc,2JAAQ,GAAG,QAAQ;YACjC,QAAQ,0JAAO,CAAC,2JAAQ,IAAI,QAAQ;QACrC,GAAG,QAAQ;QACX,eAAe,4JAAS,GAAG,QAAQ;QACnC,QAAQ,0JAAO,CAAC,2JAAQ,IAAI,IAAI,CAAC;YAAE,aAAa;QAAiD,GAAG,QAAQ;QAC5G,kBAAkB,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAsE,GAAG,QAAQ;QAClI,iBAAiB,4JAAS,GAAG,IAAI,CAAC;YAAE,aAAa;QAA8F,GAAG,QAAQ;QAC1J,gBAAgB,2JAAQ,CAAC,2JAAQ,IAAI,wJAAK,IAAI,QAAQ;IACvD;IACA,KAAK;QAAC,sKAAiB;KAAC;IACxB,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,KAAK;wCACJ,MAAM;wCACN,aAAa;oCACd;oCACA,UAAU;wCACT,MAAM;wCACN,aAAa;oCACd;oCACA,QAAQ;wCAAE,MAAM;oCAAU;gCAC3B;gCACA,UAAU;oCAAC;iCAAW;4BACvB;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,MAAM,UAAU,EAAE,OAAO,CAAC,OAAO;IACjC,MAAM,WAAW,EAAE,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ;IAC/E,IAAI,CAAC,UAAU;QACd,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,yEAAyE;YAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;QAAC;QAC5H,MAAM,IAAI,6JAAQ,CAAC,aAAa;YAAE,SAAS,qOAAgB,CAAC,kBAAkB;QAAC;IAChF;IACA,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE;QACnB,IAAI,CAAC,SAAS,aAAa,EAAE;YAC5B,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,mDAAmD;gBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;YAAC;YACtG,MAAM,IAAI,6JAAQ,CAAC,aAAa;gBAAE,SAAS,qOAAgB,CAAC,sBAAsB;YAAC;QACpF;QACA,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,OAAO;QACvC,IAAI,CAAC,MAAM,SAAS,aAAa,CAAC,OAAO,QAAQ;YAChD,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,oBAAoB;gBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;YAAC;YACvE,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,qOAAgB,CAAC,aAAa;YAAC;QAC9E;QACA,MAAM,kBAAkB,MAAM,SAAS,WAAW,CAAC;YAClD,SAAS;YACT,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;YACvC,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY;QAC1C;QACA,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,MAAM;YAC/C,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B;gBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;YAAC;YAC9E,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,qOAAgB,CAAC,uBAAuB;YAAC;QACxF;QACA,MAAM,gBAAgB,OAAO,gBAAgB,IAAI,CAAC,EAAE;QACpD,IAAI,CAAC,gBAAgB,IAAI,CAAC,KAAK,EAAE;YAChC,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,wBAAwB;gBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;YAAC;YAC3E,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,qOAAgB,CAAC,oBAAoB;YAAC;QACrF;QACA,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,QAAQ,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK,SAAS,EAAE,IAAI,EAAE,SAAS,KAAK,gBAAgB,OAAO,EAAE,IAAI,CAAC;YAC7J,KAAK;YACL,QAAQ;YACR,UAAU;QACX;QACA,IAAI,CAAE,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,kBAAmB,SAAS,SAAS,EAAE,KAAK,CAAC,gBAAgB,IAAI,CAAC,aAAa,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,YAAY,OAAO,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;YAAE,SAAS;QAA2C;QAC3R,IAAI,gBAAgB,IAAI,CAAC,KAAK,KAAK,QAAQ,IAAI,CAAC,KAAK,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,yBAAyB,MAAM,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;YAAE,SAAS;QAAoD;QACrO,IAAI;YACH,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC;gBAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;gBACvB,YAAY,SAAS,EAAE;gBACvB,WAAW;gBACX,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;gBACvC,SAAS;gBACT,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY;gBACzC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK;YACpC;QACD,EAAE,OAAO,GAAG;YACX,MAAM,IAAI,6JAAQ,CAAC,sBAAsB;gBAAE,SAAS;YAAgD;QACrG;QACA,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,yBAAyB,MAAM,IAAI;YACjF,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,IAAI,CAAC,EAAE,EAAE;gBAC3D,MAAM,gBAAgB,IAAI,EAAE;gBAC5B,OAAO,gBAAgB,IAAI,EAAE;YAC9B;QACD,EAAE,OAAO,GAAG;YACX,QAAQ,IAAI,CAAC,6BAA6B,EAAE,QAAQ;QACrD;QACA,OAAO,EAAE,IAAI,CAAC;YACb,KAAK;YACL,QAAQ;YACR,UAAU;QACX;IACD;IACA,MAAM,QAAQ,MAAM,IAAA,oKAAa,EAAC,GAAG;QACpC,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACvB,OAAO,QAAQ,IAAI,CAAC,KAAK;IAC1B,GAAG,EAAE,IAAI,CAAC,cAAc;IACxB,MAAM,MAAM,MAAM,SAAS,sBAAsB,CAAC;QACjD,OAAO,MAAM,KAAK;QAClB,cAAc,MAAM,YAAY;QAChC,aAAa,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,SAAS,EAAE,EAAE;QAC3D,QAAQ,EAAE,IAAI,CAAC,MAAM;IACtB;IACA,OAAO,EAAE,IAAI,CAAC;QACb,KAAK,IAAI,QAAQ;QACjB,UAAU,CAAC,EAAE,IAAI,CAAC,eAAe;IAClC;AACD;AACA,MAAM,gBAAgB,IAAA,yLAAkB,EAAC,mBAAmB;IAC3D,QAAQ;IACR,MAAM,2JAAQ,CAAC;QACd,YAAY,2JAAQ;QACpB,WAAW,2JAAQ,GAAG,QAAQ;IAC/B;IACA,KAAK;QAAC,sKAAsB;KAAC;IAC7B,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCAAE,QAAQ;wCAAE,MAAM;oCAAU;gCAAE;4BAC3C;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,IAAI,IAAI;IAC1C,MAAM,WAAW,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IAC3F,IAAI,SAAS,MAAM,KAAK,KAAK,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,mBAAmB,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,qOAAgB,CAAC,6BAA6B;IAAC;IAC1L,MAAM,eAAe,SAAS,IAAI,CAAC,CAAC,UAAY,YAAY,QAAQ,SAAS,KAAK,aAAa,QAAQ,UAAU,KAAK,aAAa,QAAQ,UAAU,KAAK;IAC1J,IAAI,CAAC,cAAc,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,qOAAgB,CAAC,iBAAiB;IAAC;IACnG,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,aAAa,EAAE;IAC/D,OAAO,IAAI,IAAI,CAAC;QAAE,QAAQ;IAAK;AAChC;AACA,MAAM,iBAAiB,IAAA,yLAAkB,EAAC,qBAAqB;IAC9D,QAAQ;IACR,MAAM,2JAAQ,CAAC;QACd,YAAY,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAyC;QACpF,WAAW,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAmD,GAAG,QAAQ;QACxG,QAAQ,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA0C,GAAG,QAAQ;IAC7F;IACA,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,WAAW;gBACV,KAAK;oBACJ,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,WAAW;wCAAE,MAAM;oCAAS;oCAC5B,SAAS;wCAAE,MAAM;oCAAS;oCAC1B,aAAa;wCAAE,MAAM;oCAAS;oCAC9B,cAAc;wCAAE,MAAM;oCAAS;oCAC/B,sBAAsB;wCACrB,MAAM;wCACN,QAAQ;oCACT;oCACA,uBAAuB;wCACtB,MAAM;wCACN,QAAQ;oCACT;gCACD;4BACD;wBAAE;oBAAE;gBACL;gBACA,KAAK;oBAAE,aAAa;gBAAkD;YACvE;QACD;IAAE;AACH,GAAG,OAAO;IACT,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,IAAI,IAAI,IAAI,CAAC;IACvD,MAAM,MAAM,IAAI,OAAO;IACvB,MAAM,UAAU,MAAM,IAAA,sKAAiB,EAAC;IACxC,IAAI,OAAO,CAAC,SAAS,MAAM,IAAI,KAAK,CAAC;IACrC,IAAI,iBAAiB,SAAS,MAAM,MAAM;IAC1C,IAAI,CAAC,gBAAgB,MAAM,IAAI,KAAK,CAAC;IACrC,IAAI,CAAC,IAAI,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,aAAa,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,CAAC,SAAS,EAAE,WAAW,kBAAkB,CAAC;IAAC;IAC3J,MAAM,cAAc,MAAM,IAAA,qKAAgB,EAAC;IAC3C,IAAI,UAAU,KAAK;IACnB,IAAI,eAAe,eAAe,YAAY,UAAU,IAAI,CAAC,CAAC,aAAa,YAAY,EAAE,KAAK,SAAS,GAAG,UAAU;SAC/G,UAAU,CAAC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC,MAAQ,YAAY,IAAI,EAAE,KAAK,aAAa,IAAI,UAAU,KAAK,aAAa,IAAI,UAAU,KAAK;IACrL,IAAI,CAAC,SAAS,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS;IAAoB;IAC/E,MAAM,WAAW,IAAI,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAClE,IAAI,CAAC,UAAU,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,CAAC,SAAS,EAAE,WAAW,WAAW,CAAC;IAAC;IAChG,IAAI;QACH,IAAI,YAAY;QAChB,MAAM,qBAAqB,QAAQ,oBAAoB,IAAI,IAAI,KAAK,QAAQ,oBAAoB,EAAE,OAAO,KAAK,KAAK,GAAG,KAAK;QAC3H,IAAI,QAAQ,YAAY,IAAI,sBAAsB,SAAS,kBAAkB,EAAE;YAC9E,MAAM,iBAAiB,MAAM,kBAAkB,QAAQ,YAAY,EAAE,IAAI,OAAO;YAChF,YAAY,MAAM,SAAS,kBAAkB,CAAC;YAC9C,MAAM,iBAAiB,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAE;gBAClF,aAAa,MAAM,aAAa,UAAU,WAAW,EAAE,IAAI,OAAO;gBAClE,sBAAsB,UAAU,oBAAoB;gBACpD,cAAc,MAAM,aAAa,UAAU,YAAY,EAAE,IAAI,OAAO;gBACpE,uBAAuB,UAAU,qBAAqB;YACvD;YACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,sBAAsB,gBAAgB,MAAM,IAAA,qKAAgB,EAAC,KAAK;QACpG;QACA,MAAM,SAAS;YACd,aAAa,WAAW,eAAe,MAAM,kBAAkB,QAAQ,WAAW,IAAI,IAAI,IAAI,OAAO;YACrG,sBAAsB,WAAW,wBAAwB,QAAQ,oBAAoB,IAAI,KAAK;YAC9F,QAAQ,QAAQ,KAAK,EAAE,MAAM,QAAQ,EAAE;YACvC,SAAS,WAAW,WAAW,QAAQ,OAAO,IAAI,KAAK;QACxD;QACA,OAAO,IAAI,IAAI,CAAC;IACjB,EAAE,OAAO,SAAS;QACjB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YACjC,SAAS;YACT,OAAO;QACR;IACD;AACD;AACA,MAAM,eAAe,IAAA,yLAAkB,EAAC,kBAAkB;IACzD,QAAQ;IACR,MAAM,2JAAQ,CAAC;QACd,YAAY,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAyC;QACpF,WAAW,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAmD,GAAG,QAAQ;QACxG,QAAQ,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA0C,GAAG,QAAQ;IAC7F;IACA,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,WAAW;gBACV,KAAK;oBACJ,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,WAAW;wCAAE,MAAM;oCAAS;oCAC5B,SAAS;wCAAE,MAAM;oCAAS;oCAC1B,aAAa;wCAAE,MAAM;oCAAS;oCAC9B,cAAc;wCAAE,MAAM;oCAAS;oCAC/B,sBAAsB;wCACrB,MAAM;wCACN,QAAQ;oCACT;oCACA,uBAAuB;wCACtB,MAAM;wCACN,QAAQ;oCACT;gCACD;4BACD;wBAAE;oBAAE;gBACL;gBACA,KAAK;oBAAE,aAAa;gBAAkD;YACvE;QACD;IAAE;AACH,GAAG,OAAO;IACT,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,IAAI,IAAI;IAClD,MAAM,MAAM,IAAI,OAAO;IACvB,MAAM,UAAU,MAAM,IAAA,sKAAiB,EAAC;IACxC,IAAI,OAAO,CAAC,SAAS,MAAM,IAAI,KAAK,CAAC;IACrC,IAAI,iBAAiB,SAAS,MAAM,MAAM;IAC1C,IAAI,CAAC,gBAAgB,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,CAAC,oCAAoC,CAAC;IAAC;IACzG,MAAM,WAAW,IAAI,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAClE,IAAI,CAAC,UAAU,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,CAAC,SAAS,EAAE,WAAW,WAAW,CAAC;IAAC;IAChG,IAAI,CAAC,SAAS,kBAAkB,EAAE,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,CAAC,SAAS,EAAE,WAAW,mCAAmC,CAAC;IAAC;IAC3I,IAAI,UAAU,KAAK;IACnB,MAAM,cAAc,MAAM,IAAA,qKAAgB,EAAC;IAC3C,IAAI,eAAe,CAAC,CAAC,cAAc,eAAe,aAAa,UAAU,GAAG,UAAU;SACjF,UAAU,CAAC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC,MAAQ,YAAY,IAAI,EAAE,KAAK,aAAa,IAAI,UAAU,KAAK,aAAa,IAAI,UAAU,KAAK;IACrL,IAAI,CAAC,SAAS,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS;IAAoB;IAC/E,IAAI,iBAAiB,KAAK;IAC1B,IAAI,eAAe,eAAe,YAAY,UAAU,EAAE,iBAAiB,YAAY,YAAY,IAAI,KAAK;SACvG,iBAAiB,QAAQ,YAAY,IAAI,KAAK;IACnD,IAAI,CAAC,gBAAgB,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS;IAA0B;IAC5F,IAAI;QACH,MAAM,wBAAwB,MAAM,kBAAkB,gBAAgB,IAAI,OAAO;QACjF,MAAM,SAAS,MAAM,SAAS,kBAAkB,CAAC;QACjD,IAAI,QAAQ,EAAE,EAAE;YACf,MAAM,aAAa;gBAClB,GAAG,WAAW,CAAC,CAAC;gBAChB,aAAa,MAAM,aAAa,OAAO,WAAW,EAAE,IAAI,OAAO;gBAC/D,cAAc,MAAM,aAAa,OAAO,YAAY,EAAE,IAAI,OAAO;gBACjE,sBAAsB,OAAO,oBAAoB;gBACjD,uBAAuB,OAAO,qBAAqB;gBACnD,OAAO,OAAO,MAAM,EAAE,KAAK,QAAQ,QAAQ,KAAK;gBAChD,SAAS,OAAO,OAAO,IAAI,QAAQ,OAAO;YAC3C;YACA,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAE;QAC7D;QACA,IAAI,eAAe,eAAe,YAAY,UAAU,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,oBAAoB,MAAM,IAAA,qKAAgB,EAAC,KAAK;YACxI,GAAG,WAAW;YACd,aAAa,MAAM,aAAa,OAAO,WAAW,EAAE,IAAI,OAAO;YAC/D,cAAc,MAAM,aAAa,OAAO,YAAY,EAAE,IAAI,OAAO;YACjE,sBAAsB,OAAO,oBAAoB;YACjD,uBAAuB,OAAO,qBAAqB;YACnD,OAAO,OAAO,MAAM,EAAE,KAAK,QAAQ,YAAY,KAAK;YACpD,SAAS,OAAO,OAAO,IAAI,YAAY,OAAO;QAC/C;QACA,OAAO,IAAI,IAAI,CAAC;YACf,aAAa,OAAO,WAAW;YAC/B,cAAc,OAAO,YAAY;YACjC,sBAAsB,OAAO,oBAAoB;YACjD,uBAAuB,OAAO,qBAAqB;YACnD,OAAO,OAAO,MAAM,EAAE,KAAK,QAAQ,QAAQ,KAAK;YAChD,SAAS,OAAO,OAAO,IAAI,QAAQ,OAAO;YAC1C,YAAY,QAAQ,UAAU;YAC9B,WAAW,QAAQ,SAAS;QAC7B;IACD,EAAE,OAAO,SAAS;QACjB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YACjC,SAAS;YACT,OAAO;QACR;IACD;AACD;AACA,MAAM,yBAAyB,6JAAU,CAAC,2JAAQ,CAAC;IAAE,WAAW,2JAAQ,GAAG,IAAI,CAAC;QAAE,aAAa;IAAkE,GAAG,QAAQ;AAAG;AAC/K,MAAM,cAAc,IAAA,yLAAkB,EAAC,iBAAiB;IACvD,QAAQ;IACR,KAAK;QAAC,sKAAiB;KAAC;IACxB,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,MAAM;wCACL,MAAM;wCACN,YAAY;4CACX,IAAI;gDAAE,MAAM;4CAAS;4CACrB,MAAM;gDAAE,MAAM;4CAAS;4CACvB,OAAO;gDAAE,MAAM;4CAAS;4CACxB,OAAO;gDAAE,MAAM;4CAAS;4CACxB,eAAe;gDAAE,MAAM;4CAAU;wCAClC;wCACA,UAAU;4CAAC;4CAAM;yCAAgB;oCAClC;oCACA,MAAM;wCACL,MAAM;wCACN,YAAY,CAAC;wCACb,sBAAsB;oCACvB;gCACD;gCACA,UAAU;oCAAC;oCAAQ;iCAAO;gCAC1B,sBAAsB;4BACvB;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;IACF,OAAO;AACR,GAAG,OAAO;IACT,MAAM,oBAAoB,IAAI,KAAK,EAAE;IACrC,IAAI,UAAU,KAAK;IACnB,IAAI,CAAC,mBAAmB;QACvB,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,oBAAoB;YACpD,MAAM,cAAc,MAAM,IAAA,qKAAgB,EAAC;YAC3C,IAAI,aAAa,UAAU;QAC5B;IACD,OAAO;QACN,MAAM,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;QAClE,IAAI,aAAa,UAAU;IAC5B;IACA,IAAI,CAAC,WAAW,QAAQ,MAAM,KAAK,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS;IAAoB;IACjI,MAAM,WAAW,IAAI,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,QAAQ,UAAU;IACpF,IAAI,CAAC,UAAU,MAAM,IAAI,6JAAQ,CAAC,yBAAyB;QAAE,SAAS,CAAC,6BAA6B,EAAE,QAAQ,UAAU,CAAC,yBAAyB,CAAC;IAAC;IACpJ,MAAM,SAAS,MAAM,eAAe;QACnC,GAAG,GAAG;QACN,QAAQ;QACR,MAAM;YACL,WAAW,QAAQ,EAAE;YACrB,YAAY,QAAQ,UAAU;QAC/B;QACA,eAAe;QACf,cAAc;IACf;IACA,IAAI,CAAC,OAAO,WAAW,EAAE,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS;IAAyB;IAC/F,MAAM,OAAO,MAAM,SAAS,WAAW,CAAC;QACvC,GAAG,MAAM;QACT,aAAa,OAAO,WAAW;IAChC;IACA,OAAO,IAAI,IAAI,CAAC;AACjB;AAEA,YAAY;AACZ,oCAAoC;AACpC,eAAe,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,OAAO,EAAE,WAAW,EAAE,aAAa,EAAE,gBAAgB,EAAE;IACxG,MAAM,SAAS,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,SAAS,KAAK,CAAC,WAAW,IAAI,QAAQ,SAAS,EAAE,QAAQ,UAAU,EAAE,KAAK,CAAC,CAAC;QACxI,+MAAM,CAAC,KAAK,CAAC,2DAA2D;QACxE,MAAM,WAAW,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,YAAY,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;QACvF,MAAM,EAAE,QAAQ,CAAC,GAAG,SAAS,4BAA4B,CAAC;IAC3D;IACA,IAAI,OAAO,QAAQ;IACnB,IAAI,aAAa,CAAC;IAClB,IAAI,QAAQ;QACX,MAAM,gBAAgB,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK,QAAQ,UAAU,IAAI,EAAE,SAAS,KAAK,QAAQ,SAAS;QAC1H,IAAI,CAAC,eAAe;YACnB,IAAI,CAAE,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,kBAAmB,SAAS,QAAQ,UAAU,KAAK,CAAC,SAAS,aAAa,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,YAAY,OAAO;gBAC5L,IAAI,IAAA,6NAAa,KAAI,+MAAM,CAAC,IAAI,CAAC,CAAC,+CAA+C,EAAE,QAAQ,UAAU,CAAC,2IAA2I,CAAC;gBAClP,OAAO;oBACN,OAAO;oBACP,MAAM;gBACP;YACD;YACA,IAAI;gBACH,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;oBAC3C,YAAY,QAAQ,UAAU;oBAC9B,WAAW,SAAS,EAAE,CAAC,QAAQ;oBAC/B,QAAQ,OAAO,IAAI,CAAC,EAAE;oBACtB,aAAa,MAAM,aAAa,QAAQ,WAAW,EAAE,EAAE,OAAO;oBAC9D,cAAc,MAAM,aAAa,QAAQ,YAAY,EAAE,EAAE,OAAO;oBAChE,SAAS,QAAQ,OAAO;oBACxB,sBAAsB,QAAQ,oBAAoB;oBAClD,uBAAuB,QAAQ,qBAAqB;oBACpD,OAAO,QAAQ,KAAK;gBACrB;YACD,EAAE,OAAO,GAAG;gBACX,+MAAM,CAAC,KAAK,CAAC,0BAA0B;gBACvC,OAAO;oBACN,OAAO;oBACP,MAAM;gBACP;YACD;YACA,IAAI,SAAS,aAAa,IAAI,CAAC,OAAO,IAAI,CAAC,aAAa,IAAI,SAAS,KAAK,CAAC,WAAW,OAAO,OAAO,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,OAAO,IAAI,CAAC,EAAE,EAAE;gBAAE,eAAe;YAAK;QAClM,OAAO;YACN,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,0BAA0B,OAAO;gBAC/D,MAAM,aAAa,OAAO,WAAW,CAAC,OAAO,OAAO,CAAC;oBACpD,SAAS,QAAQ,OAAO;oBACxB,aAAa,MAAM,aAAa,QAAQ,WAAW,EAAE,EAAE,OAAO;oBAC9D,cAAc,MAAM,aAAa,QAAQ,YAAY,EAAE,EAAE,OAAO;oBAChE,sBAAsB,QAAQ,oBAAoB;oBAClD,uBAAuB,QAAQ,qBAAqB;oBACpD,OAAO,QAAQ,KAAK;gBACrB,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,GAAK,UAAU,KAAK;gBACzC,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,oBAAoB,MAAM,IAAA,qKAAgB,EAAC,GAAG;gBAC7E,IAAI,OAAO,IAAI,CAAC,YAAY,MAAM,GAAG,GAAG,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,cAAc,EAAE,EAAE;YACzG;YACA,IAAI,SAAS,aAAa,IAAI,CAAC,OAAO,IAAI,CAAC,aAAa,IAAI,SAAS,KAAK,CAAC,WAAW,OAAO,OAAO,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,OAAO,IAAI,CAAC,EAAE,EAAE;gBAAE,eAAe;YAAK;QAClM;QACA,IAAI,kBAAkB;YACrB,MAAM,EAAE,IAAI,CAAC,EAAE,GAAG,cAAc,GAAG;YACnC,OAAO,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,OAAO,IAAI,CAAC,EAAE,EAAE;gBACjE,GAAG,YAAY;gBACf,OAAO,SAAS,KAAK,CAAC,WAAW;gBACjC,eAAe,SAAS,KAAK,CAAC,WAAW,OAAO,OAAO,IAAI,CAAC,KAAK,GAAG,OAAO,IAAI,CAAC,aAAa,IAAI,SAAS,aAAa,GAAG,SAAS,aAAa;YACjJ;QACD;IACD,OAAO;QACN,IAAI,eAAe,OAAO;YACzB,OAAO;YACP,MAAM;YACN,YAAY;QACb;QACA,IAAI;YACH,MAAM,EAAE,IAAI,CAAC,EAAE,GAAG,cAAc,GAAG;YACnC,MAAM,cAAc;gBACnB,aAAa,MAAM,aAAa,QAAQ,WAAW,EAAE,EAAE,OAAO;gBAC9D,cAAc,MAAM,aAAa,QAAQ,YAAY,EAAE,EAAE,OAAO;gBAChE,SAAS,QAAQ,OAAO;gBACxB,sBAAsB,QAAQ,oBAAoB;gBAClD,uBAAuB,QAAQ,qBAAqB;gBACpD,OAAO,QAAQ,KAAK;gBACpB,YAAY,QAAQ,UAAU;gBAC9B,WAAW,SAAS,EAAE,CAAC,QAAQ;YAChC;YACA,MAAM,EAAE,MAAM,WAAW,EAAE,SAAS,cAAc,EAAE,GAAG,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC;gBACtG,GAAG,YAAY;gBACf,OAAO,SAAS,KAAK,CAAC,WAAW;YAClC,GAAG;YACH,OAAO;YACP,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,oBAAoB,MAAM,IAAA,qKAAgB,EAAC,GAAG;YAC7E,IAAI,CAAC,SAAS,aAAa,IAAI,QAAQ,EAAE,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,cAAc;gBACzF,MAAM,QAAQ,MAAM,6BAA6B,EAAE,OAAO,CAAC,MAAM,EAAE,KAAK,KAAK,EAAE,KAAK,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;gBAC5H,MAAM,MAAM,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,aAAa;gBACzF,MAAM,EAAE,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,wBAAwB;oBAClE;oBACA;oBACA;gBACD,GAAG,EAAE,OAAO;YACb;QACD,EAAE,OAAO,GAAG;YACX,+MAAM,CAAC,KAAK,CAAC;YACb,IAAI,aAAa,6JAAU,EAAE,OAAO;gBACnC,OAAO,EAAE,OAAO;gBAChB,MAAM;gBACN,YAAY;YACb;YACA,OAAO;gBACN,OAAO;gBACP,MAAM;gBACN,YAAY;YACb;QACD;IACD;IACA,IAAI,CAAC,MAAM,OAAO;QACjB,OAAO;QACP,MAAM;QACN,YAAY;IACb;IACA,MAAM,UAAU,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,KAAK,EAAE;IACrE,IAAI,CAAC,SAAS,OAAO;QACpB,OAAO;QACP,MAAM;QACN,YAAY;IACb;IACA,OAAO;QACN,MAAM;YACL;YACA;QACD;QACA,OAAO;QACP;IACD;AACD;AAEA,YAAY;AACZ,oCAAoC;AACpC,MAAM,SAAS,2JAAQ,CAAC;IACvB,MAAM,2JAAQ,GAAG,QAAQ;IACzB,OAAO,2JAAQ,GAAG,QAAQ;IAC1B,WAAW,2JAAQ,GAAG,QAAQ;IAC9B,mBAAmB,2JAAQ,GAAG,QAAQ;IACtC,OAAO,2JAAQ,GAAG,QAAQ;IAC1B,MAAM,2JAAQ,GAAG,QAAQ;AAC1B;AACA,MAAM,gBAAgB,IAAA,yLAAkB,EAAC,iBAAiB;IACzD,QAAQ;QAAC;QAAO;KAAO;IACvB,aAAa;IACb,MAAM,OAAO,QAAQ;IACrB,OAAO,OAAO,QAAQ;IACtB,UAAU;QACT,GAAG,oKAAa;QAChB,mBAAmB;YAAC;YAAqC;SAAmB;IAC7E;AACD,GAAG,OAAO;IACT,IAAI;IACJ,MAAM,kBAAkB,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,YAAY,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;IAC9F,IAAI,EAAE,MAAM,KAAK,QAAQ;QACxB,MAAM,WAAW,EAAE,IAAI,GAAG,OAAO,KAAK,CAAC,EAAE,IAAI,IAAI,CAAC;QAClD,MAAM,YAAY,EAAE,KAAK,GAAG,OAAO,KAAK,CAAC,EAAE,KAAK,IAAI,CAAC;QACrD,MAAM,aAAa,OAAO,KAAK,CAAC;YAC/B,GAAG,QAAQ;YACX,GAAG,SAAS;QACb;QACA,MAAM,SAAS,IAAI;QACnB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,YAAa,IAAI,UAAU,KAAK,KAAK,UAAU,MAAM,OAAO,GAAG,CAAC,KAAK,OAAO;QACtH,MAAM,cAAc,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI;QACvF,MAAM,EAAE,QAAQ,CAAC;IAClB;IACA,IAAI;QACH,IAAI,EAAE,MAAM,KAAK,OAAO,cAAc,OAAO,KAAK,CAAC,EAAE,KAAK;aACrD,IAAI,EAAE,MAAM,KAAK,QAAQ,cAAc,OAAO,KAAK,CAAC,EAAE,IAAI;aAC1D,MAAM,IAAI,MAAM;IACtB,EAAE,OAAO,GAAG;QACX,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B;QACnD,MAAM,EAAE,QAAQ,CAAC,GAAG,gBAAgB,+BAA+B,CAAC;IACrE;IACA,MAAM,EAAE,IAAI,EAAE,OAAO,OAAO,EAAE,KAAK,EAAE,iBAAiB,EAAE,SAAS,EAAE,GAAG;IACtE,IAAI,CAAC,OAAO;QACX,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,mBAAmB;QAC1C,MAAM,MAAM,GAAG,kBAAkB,gBAAgB,QAAQ,CAAC,OAAO,MAAM,IAAI,qBAAqB,CAAC;QACjG,MAAM,EAAE,QAAQ,CAAC;IAClB;IACA,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAE,aAAa,EAAE,GAAG,MAAM,IAAA,oKAAU,EAAC;IAClG,SAAS,gBAAgB,OAAO,EAAE,WAAW;QAC5C,MAAM,UAAU,YAAY;QAC5B,MAAM,SAAS,IAAI,gBAAgB;YAAE,OAAO;QAAQ;QACpD,IAAI,aAAa,OAAO,GAAG,CAAC,qBAAqB;QACjD,MAAM,MAAM,GAAG,UAAU,QAAQ,QAAQ,CAAC,OAAO,MAAM,MAAM,OAAO,QAAQ,IAAI;QAChF,MAAM,EAAE,QAAQ,CAAC;IAClB;IACA,IAAI,SAAS,gBAAgB,SAAS;IACtC,IAAI,CAAC,MAAM;QACV,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACvB,MAAM,gBAAgB;IACvB;IACA,MAAM,WAAW,EAAE,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,EAAE;IAC3E,IAAI,CAAC,UAAU;QACd,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,0BAA0B,EAAE,MAAM,CAAC,EAAE,EAAE;QAC9D,MAAM,gBAAgB;IACvB;IACA,IAAI;IACJ,IAAI;QACH,SAAS,MAAM,SAAS,yBAAyB,CAAC;YACjD;YACA;YACA,UAAU;YACV,aAAa,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,SAAS,EAAE,EAAE;QAC5D;IACD,EAAE,OAAO,GAAG;QACX,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI;QAC3B,MAAM,gBAAgB;IACvB;IACA,MAAM,WAAW,MAAM,SAAS,WAAW,CAAC;QAC3C,GAAG,MAAM;QACT,MAAM,EAAE,IAAI,EAAE,OAAO,IAAA,kKAAa,EAAC,EAAE,IAAI,CAAC,IAAI,IAAI,KAAK;IACxD,GAAG,IAAI,CAAC,CAAC,MAAQ,KAAK;IACtB,IAAI,CAAC,UAAU;QACd,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACvB,OAAO,gBAAgB;IACxB;IACA,IAAI,CAAC,aAAa;QACjB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACvB,MAAM,gBAAgB;IACvB;IACA,IAAI,MAAM;QACT,IAAI,CAAE,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,kBAAmB,SAAS,SAAS,EAAE,KAAK,CAAC,SAAS,aAAa,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,YAAY,OAAO;YACrL,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;YACvB,OAAO,gBAAgB;QACxB;QACA,IAAI,SAAS,KAAK,KAAK,KAAK,KAAK,IAAI,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,gBAAgB,yBAAyB,MAAM,OAAO,gBAAgB;QACtI,MAAM,kBAAkB,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC,OAAO,SAAS,EAAE;QACtF,IAAI,iBAAiB;YACpB,IAAI,gBAAgB,MAAM,CAAC,QAAQ,OAAO,KAAK,MAAM,CAAC,QAAQ,IAAI,OAAO,gBAAgB;YACzF,MAAM,aAAa,OAAO,WAAW,CAAC,OAAO,OAAO,CAAC;gBACpD,aAAa,MAAM,aAAa,OAAO,WAAW,EAAE,EAAE,OAAO;gBAC7D,cAAc,MAAM,aAAa,OAAO,YAAY,EAAE,EAAE,OAAO;gBAC/D,SAAS,OAAO,OAAO;gBACvB,sBAAsB,OAAO,oBAAoB;gBACjD,uBAAuB,OAAO,qBAAqB;gBACnD,OAAO,OAAO,MAAM,EAAE,KAAK;YAC5B,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,GAAK,UAAU,KAAK;YACzC,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,gBAAgB,EAAE,EAAE;QACnE,OAAO,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC;YACzD,QAAQ,KAAK,MAAM;YACnB,YAAY,SAAS,EAAE;YACvB,WAAW,OAAO,SAAS,EAAE;YAC7B,GAAG,MAAM;YACT,aAAa,MAAM,aAAa,OAAO,WAAW,EAAE,EAAE,OAAO;YAC7D,cAAc,MAAM,aAAa,OAAO,YAAY,EAAE,EAAE,OAAO;YAC/D,OAAO,OAAO,MAAM,EAAE,KAAK;QAC5B,IAAI,OAAO,gBAAgB;QAC3B,IAAI;QACJ,IAAI;YACH,iBAAiB,YAAY,QAAQ;QACtC,EAAE,OAAM;YACP,iBAAiB;QAClB;QACA,MAAM,EAAE,QAAQ,CAAC;IAClB;IACA,IAAI,CAAC,SAAS,KAAK,EAAE;QACpB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACvB,OAAO,gBAAgB;IACxB;IACA,MAAM,cAAc;QACnB,YAAY,SAAS,EAAE;QACvB,WAAW,OAAO,SAAS,EAAE;QAC7B,GAAG,MAAM;QACT,OAAO,OAAO,MAAM,EAAE,KAAK;IAC5B;IACA,MAAM,SAAS,MAAM,oBAAoB,GAAG;QAC3C,UAAU;YACT,GAAG,QAAQ;YACX,IAAI,OAAO,SAAS,EAAE;YACtB,OAAO,SAAS,KAAK;YACrB,MAAM,SAAS,IAAI,IAAI,SAAS,KAAK;QACtC;QACA,SAAS;QACT;QACA,eAAe,SAAS,qBAAqB,IAAI,CAAC,iBAAiB,SAAS,OAAO,EAAE;QACrF,kBAAkB,SAAS,OAAO,EAAE;IACrC;IACA,IAAI,OAAO,KAAK,EAAE;QACjB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,KAAK,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC;QACpD,OAAO,gBAAgB,OAAO,KAAK,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC;IACrD;IACA,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,OAAO,IAAI;IACrC,MAAM,IAAA,qKAAgB,EAAC,GAAG;QACzB;QACA;IACD;IACA,IAAI;IACJ,IAAI;QACH,eAAe,CAAC,OAAO,UAAU,GAAG,cAAc,cAAc,WAAW,EAAE,QAAQ;IACtF,EAAE,OAAM;QACP,eAAe,OAAO,UAAU,GAAG,cAAc,cAAc;IAChE;IACA,MAAM,EAAE,QAAQ,CAAC;AAClB;AAEA,YAAY;AACZ,8CAA8C;AAC9C,eAAe,6BAA6B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,IAAI,EAAE,YAAY;IAClG,OAAO,MAAM,IAAA,oKAAO,EAAC;QACpB,OAAO,MAAM,WAAW;QACxB;QACA,GAAG,YAAY;IAChB,GAAG,QAAQ;AACZ;AACA;;AAEA,GACA,eAAe,wBAAwB,GAAG,EAAE,IAAI;IAC/C,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,uBAAuB;QAClE,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS;QAAmC;IACjF;IACA,MAAM,QAAQ,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,KAAK,KAAK,EAAE,KAAK,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;IAChI,MAAM,cAAc,IAAI,IAAI,CAAC,WAAW,GAAG,mBAAmB,IAAI,IAAI,CAAC,WAAW,IAAI,mBAAmB;IACzG,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,aAAa;IAC3F,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,qBAAqB,CAAC;QACjE;QACA;QACA;IACD,GAAG,IAAI,OAAO;AACf;AACA,MAAM,wBAAwB,IAAA,yLAAkB,EAAC,4BAA4B;IAC5E,QAAQ;IACR,aAAa;IACb,MAAM,2JAAQ,CAAC;QACd,OAAO,0JAAO,GAAG,IAAI,CAAC;YAAE,aAAa;QAA8C;QACnF,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAiD,GAAG,QAAQ;IACzG;IACA,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,aAAa;gBAAE,SAAS;oBAAE,oBAAoB;wBAAE,QAAQ;4BACvD,MAAM;4BACN,YAAY;gCACX,OAAO;oCACN,MAAM;oCACN,aAAa;oCACb,SAAS;gCACV;gCACA,aAAa;oCACZ,MAAM;oCACN,aAAa;oCACb,SAAS;oCACT,UAAU;gCACX;4BACD;4BACA,UAAU;gCAAC;6BAAQ;wBACpB;oBAAE;gBAAE;YAAE;YACN,WAAW;gBACV,OAAO;oBACN,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCAAE,QAAQ;wCACrB,MAAM;wCACN,aAAa;wCACb,SAAS;oCACV;gCAAE;4BACH;wBAAE;oBAAE;gBACL;gBACA,OAAO;oBACN,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCAAE,SAAS;wCACtB,MAAM;wCACN,aAAa;wCACb,SAAS;oCACV;gCAAE;4BACH;wBAAE;oBAAE;gBACL;YACD;QACD;IAAE;AACH,GAAG,OAAO;IACT,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,uBAAuB;QAClE,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS;QAAmC;IACjF;IACA,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,IAAI;IAC1B,MAAM,UAAU,MAAM,IAAA,sKAAiB,EAAC;IACxC,IAAI,CAAC,SAAS;QACb,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC;QAC/D,IAAI,CAAC,MAAM;YACV,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,OAAO,KAAK,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;YAC7G,OAAO,IAAI,IAAI,CAAC;gBAAE,QAAQ;YAAK;QAChC;QACA,MAAM,wBAAwB,KAAK,KAAK,IAAI;QAC5C,OAAO,IAAI,IAAI,CAAC;YAAE,QAAQ;QAAK;IAChC;IACA,IAAI,SAAS,KAAK,eAAe,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS;IAAgE;IAC9I,IAAI,SAAS,KAAK,UAAU,OAAO,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS;IAA2D;IAC3I,MAAM,wBAAwB,KAAK,QAAQ,IAAI;IAC/C,OAAO,IAAI,IAAI,CAAC;QAAE,QAAQ;IAAK;AAChC;AACA,MAAM,cAAc,IAAA,yLAAkB,EAAC,iBAAiB;IACvD,QAAQ;IACR,aAAa;IACb,OAAO,2JAAQ,CAAC;QACf,OAAO,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAgC;QACtE,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAkD,GAAG,QAAQ;IAC1G;IACA,KAAK;QAAC,YAAY,CAAC,MAAQ,IAAI,KAAK,CAAC,WAAW;KAAE;IAClD,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,YAAY;gBAAC;oBACZ,MAAM;oBACN,IAAI;oBACJ,aAAa;oBACb,UAAU;oBACV,QAAQ;wBAAE,MAAM;oBAAS;gBAC1B;gBAAG;oBACF,MAAM;oBACN,IAAI;oBACJ,aAAa;oBACb,UAAU;oBACV,QAAQ;wBAAE,MAAM;oBAAS;gBAC1B;aAAE;YACF,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,MAAM;wCACL,MAAM;wCACN,MAAM;oCACP;oCACA,QAAQ;wCACP,MAAM;wCACN,aAAa;oCACd;gCACD;gCACA,UAAU;oCAAC;oCAAQ;iCAAS;4BAC7B;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,SAAS,gBAAgB,OAAO;QAC/B,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE;YAC1B,IAAI,IAAI,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,MAAM,IAAI,QAAQ,CAAC,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS;YACvG,MAAM,IAAI,QAAQ,CAAC,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS;QAC/D;QACA,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;YAAE,SAAS;QAAQ;IACvD;IACA,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,KAAK;IAC3B,IAAI;IACJ,IAAI;QACH,MAAM,MAAM,IAAA,sKAAS,EAAC,OAAO,IAAI,cAAc,MAAM,CAAC,IAAI,OAAO,CAAC,MAAM,GAAG;YAAE,YAAY;gBAAC;aAAQ;QAAC;IACpG,EAAE,OAAO,GAAG;QACX,IAAI,aAAa,wKAAU,EAAE,OAAO,gBAAgB;QACpD,OAAO,gBAAgB;IACxB;IACA,MAAM,SAAS,2JAAQ,CAAC;QACvB,OAAO,0JAAO;QACd,UAAU,2JAAQ,GAAG,QAAQ;QAC7B,aAAa,2JAAQ,GAAG,QAAQ;IACjC,GAAG,KAAK,CAAC,IAAI,OAAO;IACpB,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,OAAO,KAAK;IAC3E,IAAI,CAAC,MAAM,OAAO,gBAAgB;IAClC,IAAI,OAAO,QAAQ,EAAE;QACpB,IAAI,UAAU,MAAM,IAAA,sKAAiB,EAAC;QACtC,IAAI,WAAW,QAAQ,IAAI,CAAC,KAAK,KAAK,OAAO,KAAK,EAAE,OAAO,gBAAgB;QAC3E,IAAI,OAAO,WAAW,KAAK,6BAA6B;YACvD,MAAM,aAAa,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,OAAO,KAAK,EAAE,OAAO,QAAQ,EAAE,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,WAAW;gBAAE,aAAa;YAA4B;YACtM,MAAM,sBAAsB,IAAI,KAAK,CAAC,WAAW,GAAG,mBAAmB,IAAI,KAAK,CAAC,WAAW,IAAI,mBAAmB;YACnH,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,WAAW,aAAa,EAAE,qBAAqB;YACxG,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,wBAAwB;gBACpE,MAAM;oBACL,GAAG,KAAK,IAAI;oBACZ,OAAO,OAAO,QAAQ;gBACvB;gBACA;gBACA,OAAO;YACR,GAAG,IAAI,OAAO;YACd,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW;YACnE,OAAO,IAAI,IAAI,CAAC;gBAAE,QAAQ;YAAK;QAChC;QACA,IAAI,CAAC,SAAS;YACb,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,KAAK,IAAI,CAAC,EAAE;YAC/E,IAAI,CAAC,YAAY,MAAM,IAAI,6JAAQ,CAAC,yBAAyB;gBAAE,SAAS;YAA2B;YACnG,UAAU;gBACT,SAAS;gBACT,MAAM,KAAK,IAAI;YAChB;QACD;QACA,IAAI,OAAO,WAAW,KAAK,6BAA6B;YACvD,MAAM,gBAAgB,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,iBAAiB,CAAC,OAAO,KAAK,EAAE;gBACvF,OAAO,OAAO,QAAQ;gBACtB,eAAe;YAChB;YACA,MAAM,IAAA,qKAAgB,EAAC,KAAK;gBAC3B,SAAS,QAAQ,OAAO;gBACxB,MAAM;oBACL,GAAG,QAAQ,IAAI;oBACf,OAAO,OAAO,QAAQ;oBACtB,eAAe;gBAChB;YACD;YACA,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW;YACnE,OAAO,IAAI,IAAI,CAAC;gBACf,QAAQ;gBACR,MAAM;YACP;QACD;QACA,MAAM,gBAAgB,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,iBAAiB,CAAC,OAAO,KAAK,EAAE;YACvF,OAAO,OAAO,QAAQ;YACtB,eAAe;QAChB;QACA,MAAM,WAAW,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,OAAO,QAAQ;QACvF,MAAM,oBAAoB,IAAI,KAAK,CAAC,WAAW,GAAG,mBAAmB,IAAI,KAAK,CAAC,WAAW,IAAI,mBAAmB;QACjH,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,wBAAwB;YACpE,MAAM;YACN,KAAK,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,SAAS,aAAa,EAAE,mBAAmB;YAC7F,OAAO;QACR,GAAG,IAAI,OAAO;QACd,MAAM,IAAA,qKAAgB,EAAC,KAAK;YAC3B,SAAS,QAAQ,OAAO;YACxB,MAAM;gBACL,GAAG,QAAQ,IAAI;gBACf,OAAO,OAAO,QAAQ;gBACtB,eAAe;YAChB;QACD;QACA,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW;QACnE,OAAO,IAAI,IAAI,CAAC;YACf,QAAQ;YACR,MAAM;gBACL,IAAI,cAAc,EAAE;gBACpB,OAAO,cAAc,KAAK;gBAC1B,MAAM,cAAc,IAAI;gBACxB,OAAO,cAAc,KAAK;gBAC1B,eAAe,cAAc,aAAa;gBAC1C,WAAW,cAAc,SAAS;gBAClC,WAAW,cAAc,SAAS;YACnC;QACD;IACD;IACA,IAAI,KAAK,IAAI,CAAC,aAAa,EAAE;QAC5B,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW;QACnE,OAAO,IAAI,IAAI,CAAC;YACf,QAAQ;YACR,MAAM;QACP;IACD;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,qBAAqB,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,KAAK,IAAI,EAAE,IAAI,OAAO;IACtJ,MAAM,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,iBAAiB,CAAC,OAAO,KAAK,EAAE;QAAE,eAAe;IAAK;IAC5G,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,wBAAwB,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,aAAa,IAAI,OAAO;IAC9J,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,6BAA6B;QACvE,MAAM,iBAAiB,MAAM,IAAA,sKAAiB,EAAC;QAC/C,IAAI,CAAC,kBAAkB,eAAe,IAAI,CAAC,KAAK,KAAK,OAAO,KAAK,EAAE;YAClE,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,KAAK,IAAI,CAAC,EAAE;YAC5E,IAAI,CAAC,SAAS,MAAM,IAAI,6JAAQ,CAAC,yBAAyB;gBAAE,SAAS;YAA2B;YAChG,MAAM,IAAA,qKAAgB,EAAC,KAAK;gBAC3B;gBACA,MAAM;oBACL,GAAG,KAAK,IAAI;oBACZ,eAAe;gBAChB;YACD;QACD,OAAO,MAAM,IAAA,qKAAgB,EAAC,KAAK;YAClC,SAAS,eAAe,OAAO;YAC/B,MAAM;gBACL,GAAG,eAAe,IAAI;gBACtB,eAAe;YAChB;QACD;IACD;IACA,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW;IACnE,OAAO,IAAI,IAAI,CAAC;QACf,QAAQ;QACR,MAAM;IACP;AACD;AAEA,YAAY;AACZ,iCAAiC;AACjC,SAAS,SAAS,KAAK;IACtB,OAAO,MAAM,OAAO,CAAC,MAAM,QAAQ,OAAO,CAAC,MAAM,QAAQ,OAAO,CAAC,MAAM,UAAU,OAAO,CAAC,MAAM,SAAS,OAAO,CAAC,0DAA0D;AAC3K;AACA,MAAM,OAAO,CAAC,SAAS,OAAO,SAAS,EAAE,cAAc,IAAI;IAC1D,MAAM,SAAS,QAAQ,UAAU,EAAE;IACnC,OAAO,CAAC;;;;;;;;;;;qBAWY,EAAE,QAAQ,MAAM,iBAAiB,6FAA6F;oBAC/H,EAAE,QAAQ,QAAQ,cAAc,oBAAoB;;;;;;;;mBAQrD,EAAE,QAAQ,MAAM,UAAU,WAAW;;oBAEpC,EAAE,QAAQ,MAAM,WAAW,SAAS;;oBAEpC,EAAE,QAAQ,MAAM,WAAW,UAAU;;oBAErC,EAAE,QAAQ,MAAM,WAAW,OAAO;;;;;;;kBAOpC,EAAE,QAAQ,MAAM,YAAY,WAAW;oCACrB,EAAE,QAAQ,MAAM,cAAc,yBAAyB;mBACxE,EAAE,QAAQ,QAAQ,WAAW,QAAQ;8BAC1B,EAAE,QAAQ,QAAQ,qBAAqB,QAAQ;sBACvD,EAAE,QAAQ,QAAQ,cAAc,QAAQ;sBACxC,EAAE,QAAQ,QAAQ,cAAc,mBAAmB;kBACvD,EAAE,QAAQ,QAAQ,UAAU,kBAAkB;uBACzC,EAAE,QAAQ,QAAQ,eAAe,0BAA0B;4BACtD,EAAE,QAAQ,QAAQ,mBAAmB,mBAAmB;yBAC3D,EAAE,QAAQ,QAAQ,gBAAgB,UAAU;;;;;;;;;;;;;;;;;;;qBAmBhD,EAAE,QAAQ,QAAQ,WAAW,QAAQ;gCAC1B,EAAE,QAAQ,QAAQ,qBAAqB,QAAQ;wBACvD,EAAE,QAAQ,QAAQ,cAAc,kBAAkB;wBAClD,EAAE,QAAQ,QAAQ,cAAc,kBAAkB;oBACtD,EAAE,QAAQ,QAAQ,UAAU,kBAAkB;yBACzC,EAAE,QAAQ,QAAQ,eAAe,0BAA0B;8BACtD,EAAE,QAAQ,QAAQ,mBAAmB,kBAAkB;2BAC1D,EAAE,QAAQ,QAAQ,gBAAgB,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCvE,EAAE,QAAQ,wBAAwB,KAAK,CAAC;;;;;sDAKc,EAAE,QAAQ,QAAQ,aAAa,gBAAgB;uCAC9D,EAAE,QAAQ,QAAQ,aAAa,gBAAgB;;;;;;;;;;;;;;;sBAehE,EAAE,QAAQ,QAAQ,cAAc,oBAAoB;;;;;;AAM1E,CAAC,CAAC;;;;;;;gBAOc,EAAE,QAAQ,QAAQ,kBAAkB,oBAAoB;;;;;;IAMpE,EAAE,QAAQ,2BAA2B,KAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA8ChC,CAAC,CAAC;;;;;;;kCAOiB,EAAE,QAAQ,qBAAqB,gBAAgB,QAAQ,QAAQ,eAAe,qBAAqB;;;;;;;;yBAQ5G,EAAE,QAAQ,QAAQ,cAAc,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBA4D7D,EAAE,SAAS,MAAM;;;;;;;;;;;;;;YAcrB,EAAE,CAAC,cAAc,CAAC,mMAAmM,EAAE,mBAAmB,MAAM,mHAAmH,CAAC,GAAG,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sDAkCzU,EAAE,mBAAmB,MAAM,OAAO,EAAE,mBAAmB,CAAC,yBAAyB,EAAE,KAAK,MAAM,CAAC,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;OAyBhJ,CAAC;AACR;AACA,MAAM,QAAQ,IAAA,yLAAkB,EAAC,UAAU;IAC1C,QAAQ;IACR,UAAU;QACT,GAAG,oKAAa;QAChB,SAAS;YACR,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,aAAa;4BAAE,QAAQ;gCACjC,MAAM;gCACN,aAAa;4BACd;wBAAE;oBAAE;gBACL;YAAE;QACH;IACD;AACD,GAAG,OAAO;IACT,MAAM,MAAM,IAAI,IAAI,EAAE,OAAO,EAAE,OAAO;IACtC,MAAM,kBAAkB,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY;IACzD,MAAM,yBAAyB,IAAI,YAAY,CAAC,GAAG,CAAC,wBAAwB;IAC5E,MAAM,WAAW,qBAAqB,IAAI,CAAC,mBAAmB,MAAM,kBAAkB;IACtF,MAAM,kBAAkB,yBAAyB,SAAS,0BAA0B;IACpF,MAAM,cAAc,IAAI;IACxB,YAAY,GAAG,CAAC,SAAS;IACzB,IAAI,wBAAwB,YAAY,GAAG,CAAC,qBAAqB;IACjE,MAAM,UAAU,EAAE,OAAO,CAAC,OAAO;IACjC,MAAM,WAAW,QAAQ,UAAU,EAAE;IACrC,IAAI,UAAU,OAAO,IAAI,SAAS,MAAM;QACvC,QAAQ;QACR,SAAS;YAAE,UAAU,GAAG,WAAW,SAAS,QAAQ,CAAC,OAAO,MAAM,MAAM,YAAY,QAAQ,IAAI;QAAC;IAClG;IACA,IAAI,2NAAY,IAAI,CAAC,QAAQ,UAAU,EAAE,2BAA2B,OAAO,IAAI,SAAS,MAAM;QAC7F,QAAQ;QACR,SAAS;YAAE,UAAU,CAAC,EAAE,EAAE,YAAY,QAAQ,IAAI;QAAC;IACpD;IACA,OAAO,IAAI,SAAS,KAAK,EAAE,OAAO,CAAC,OAAO,EAAE,UAAU,kBAAkB;QAAE,SAAS;YAAE,gBAAgB;QAAY;IAAE;AACpH;AAEA,YAAY;AACZ,8BAA8B;AAC9B,MAAM,KAAK,IAAA,yLAAkB,EAAC,OAAO;IACpC,QAAQ;IACR,UAAU;QACT,GAAG,oKAAa;QAChB,SAAS;YACR,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCAAE,IAAI;wCACjB,MAAM;wCACN,aAAa;oCACd;gCAAE;gCACF,UAAU;oCAAC;iCAAK;4BACjB;wBAAE;oBAAE;gBACL;YAAE;QACH;IACD;AACD,GAAG,OAAO;IACT,OAAO,IAAI,IAAI,CAAC;QAAE,IAAI;IAAK;AAC5B;AAEA,YAAY;AACZ,0CAA0C;AAC1C,SAAS,cAAc,GAAG,EAAE,WAAW,EAAE,KAAK;IAC7C,MAAM,MAAM,cAAc,IAAI,IAAI,aAAa,IAAI,OAAO,IAAI,IAAI,IAAI,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC;IAC5F,IAAI,OAAO,OAAO,OAAO,CAAC,OAAO,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,IAAI,YAAY,CAAC,GAAG,CAAC,GAAG;IAC7E,OAAO,IAAI,IAAI;AAChB;AACA,SAAS,iBAAiB,GAAG,EAAE,WAAW,EAAE,KAAK;IAChD,MAAM,MAAM,IAAI,IAAI,aAAa,IAAI,OAAO;IAC5C,IAAI,OAAO,OAAO,OAAO,CAAC,OAAO,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK,IAAI,YAAY,CAAC,GAAG,CAAC,GAAG;IAC7E,OAAO,IAAI,IAAI;AAChB;AACA,MAAM,uBAAuB,IAAA,yLAAkB,EAAC,2BAA2B;IAC1E,QAAQ;IACR,MAAM,2JAAQ,CAAC;QACd,OAAO,0JAAO,GAAG,IAAI,CAAC;YAAE,aAAa;QAAkE;QACvG,YAAY,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAsP,GAAG,QAAQ;IAC7S;IACA,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,QAAQ;wCAAE,MAAM;oCAAU;oCAC1B,SAAS;wCAAE,MAAM;oCAAS;gCAC3B;4BACD;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,mBAAmB;QAC7D,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS;QAA+B;IAC7E;IACA,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,IAAI,IAAI;IACtC,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,OAAO;QAAE,iBAAiB;IAAK;IAC9F,IAAI,CAAC,MAAM;QACV;;;EAGA,GACA,IAAA,oKAAU,EAAC;QACX,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,qBAAqB,CAAC;QACxD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,kCAAkC;YAAE;QAAM;QACnE,OAAO,IAAI,IAAI,CAAC;YACf,QAAQ;YACR,SAAS;QACV;IACD;IACA,MAAM,YAAY,IAAA,oKAAO,EAAC,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,2BAA2B,IAAI,OAAO,GAAG;IACxG,MAAM,oBAAoB,IAAA,oKAAU,EAAC;IACrC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC;QACzD,OAAO,KAAK,IAAI,CAAC,EAAE;QACnB,YAAY,CAAC,eAAe,EAAE,mBAAmB;QACjD;IACD;IACA,MAAM,cAAc,aAAa,mBAAmB,cAAc;IAClE,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,kBAAkB,aAAa,EAAE,aAAa;IACnG,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,iBAAiB,CAAC;QAC5D,MAAM,KAAK,IAAI;QACf;QACA,OAAO;IACR,GAAG,IAAI,OAAO,EAAE,KAAK,CAAC,CAAC;QACtB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,uCAAuC;IACjE;IACA,OAAO,IAAI,IAAI,CAAC;QACf,QAAQ;QACR,SAAS;IACV;AACD;AACA,MAAM,+BAA+B,IAAA,yLAAkB,EAAC,0BAA0B;IACjF,QAAQ;IACR,aAAa;IACb,OAAO,2JAAQ,CAAC;QAAE,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAuD;IAAG;IACxH,KAAK;QAAC,YAAY,CAAC,MAAQ,IAAI,KAAK,CAAC,WAAW;KAAE;IAClD,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,YAAY;gBAAC;oBACZ,MAAM;oBACN,IAAI;oBACJ,UAAU;oBACV,aAAa;oBACb,QAAQ;wBAAE,MAAM;oBAAS;gBAC1B;gBAAG;oBACF,MAAM;oBACN,IAAI;oBACJ,UAAU;oBACV,aAAa;oBACb,QAAQ;wBAAE,MAAM;oBAAS;gBAC1B;aAAE;YACF,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCAAE,OAAO;wCAAE,MAAM;oCAAS;gCAAE;4BACzC;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,MAAM;IAC5B,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,KAAK;IACjC,IAAI,CAAC,SAAS,CAAC,aAAa,MAAM,IAAI,QAAQ,CAAC,cAAc,IAAI,OAAO,EAAE,aAAa;QAAE,OAAO;IAAgB;IAChH,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC,eAAe,EAAE,OAAO;IACtG,IAAI,CAAC,gBAAgB,aAAa,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ,MAAM,IAAI,QAAQ,CAAC,cAAc,IAAI,OAAO,EAAE,aAAa;QAAE,OAAO;IAAgB;IAC9J,MAAM,IAAI,QAAQ,CAAC,iBAAiB,IAAI,OAAO,EAAE,aAAa;QAAE;IAAM;AACvE;AACA,MAAM,gBAAgB,IAAA,yLAAkB,EAAC,mBAAmB;IAC3D,QAAQ;IACR,aAAa;IACb,OAAO,2JAAQ,CAAC;QAAE,OAAO,2JAAQ,GAAG,QAAQ;IAAG,GAAG,QAAQ;IAC1D,MAAM,2JAAQ,CAAC;QACd,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA0B;QACtE,OAAO,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAkC,GAAG,QAAQ;IACpF;IACA,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCAAE,QAAQ;wCAAE,MAAM;oCAAU;gCAAE;4BAC3C;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,MAAM,QAAQ,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,KAAK,EAAE;IAC3C,IAAI,CAAC,OAAO,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,qOAAgB,CAAC,aAAa;IAAC;IACxF,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,IAAI;IAChC,MAAM,YAAY,IAAI,OAAO,CAAC,QAAQ,EAAE,OAAO;IAC/C,MAAM,YAAY,IAAI,OAAO,CAAC,QAAQ,EAAE,OAAO;IAC/C,IAAI,YAAY,MAAM,GAAG,WAAW,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,qOAAgB,CAAC,kBAAkB;IAAC;IACrH,IAAI,YAAY,MAAM,GAAG,WAAW,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,qOAAgB,CAAC,iBAAiB;IAAC;IACpH,MAAM,KAAK,CAAC,eAAe,EAAE,OAAO;IACpC,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,qBAAqB,CAAC;IAC7E,IAAI,CAAC,gBAAgB,aAAa,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,qOAAgB,CAAC,aAAa;IAAC;IACtJ,MAAM,SAAS,aAAa,KAAK;IACjC,MAAM,iBAAiB,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;IACvD,IAAI,CAAC,CAAC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,KAAO,GAAG,UAAU,KAAK,eAAe,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC;QAC3J;QACA,YAAY;QACZ,UAAU;QACV,WAAW;IACZ;SACK,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ;IAC9D,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC,aAAa,EAAE;IACzE,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,iBAAiB;QAC1D,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC;QAC5D,IAAI,MAAM,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,eAAe,CAAC;YAAE;QAAK,GAAG,IAAI,OAAO;IAC3F;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,+BAA+B,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC;IAC1H,OAAO,IAAI,IAAI,CAAC;QAAE,QAAQ;IAAK;AAChC;AAEA,YAAY;AACZ,mCAAmC;AACnC,MAAM,yBAAyB,2JAAQ,CAAC;IACvC,aAAa,2JAAQ,GAAG,IAAI,CAAC;QAAE,aAAa;IAA2D,GAAG,QAAQ;IAClH,oBAAoB,2JAAQ,GAAG,QAAQ;IACvC,kBAAkB,2JAAQ,GAAG,IAAI,CAAC;QAAE,aAAa;IAAkD,GAAG,QAAQ;IAC9G,UAAU,6MAAsB;IAChC,iBAAiB,4JAAS,GAAG,IAAI,CAAC;QAAE,aAAa;IAA8F,GAAG,QAAQ;IAC1J,SAAS,6JAAU,CAAC,2JAAQ,CAAC;QAC5B,OAAO,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA6B;QACnE,OAAO,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAmC,GAAG,QAAQ;QACpF,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAiC,GAAG,QAAQ;QACxF,cAAc,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAkC,GAAG,QAAQ;QAC1F,WAAW,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA2B,GAAG,QAAQ;IACjF;IACA,QAAQ,0JAAO,CAAC,2JAAQ,IAAI,IAAI,CAAC;QAAE,aAAa;IAA8F,GAAG,QAAQ;IACzJ,eAAe,4JAAS,GAAG,IAAI,CAAC;QAAE,aAAa;IAA0F,GAAG,QAAQ;IACpJ,WAAW,2JAAQ,GAAG,IAAI,CAAC;QAAE,aAAa;IAA2D,GAAG,QAAQ;IAChH,gBAAgB,2JAAQ,CAAC,2JAAQ,IAAI,wJAAK,IAAI,QAAQ,GAAG,IAAI,CAAC;QAAE,aAAa;IAAsD;AACpI;AACA,MAAM,eAAe,IAAM,IAAA,yLAAkB,EAAC,mBAAmB;QAChE,QAAQ;QACR,aAAa;QACb,MAAM;QACN,UAAU;YACT,QAAQ;gBACP,MAAM,CAAC;gBACP,UAAU,CAAC;YACZ;YACA,SAAS;gBACR,aAAa;gBACb,aAAa;gBACb,WAAW;oBAAE,OAAO;wBACnB,aAAa;wBACb,SAAS;4BAAE,oBAAoB;gCAAE,QAAQ;oCACxC,MAAM;oCACN,aAAa;oCACb,YAAY;wCACX,OAAO;4CAAE,MAAM;wCAAS;wCACxB,MAAM;4CACL,MAAM;4CACN,MAAM;wCACP;wCACA,KAAK;4CAAE,MAAM;wCAAS;wCACtB,UAAU;4CACT,MAAM;4CACN,MAAM;gDAAC;6CAAM;wCACd;oCACD;oCACA,UAAU;wCACT;wCACA;wCACA;qCACA;gCACF;4BAAE;wBAAE;oBACL;gBAAE;YACH;QACD;IACD,GAAG,OAAO;QACT,MAAM,WAAW,EAAE,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ;QAC/E,IAAI,CAAC,UAAU;YACd,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,yEAAyE;gBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;YAAC;YAC5H,MAAM,IAAI,6JAAQ,CAAC,aAAa;gBAAE,SAAS,qOAAgB,CAAC,kBAAkB;YAAC;QAChF;QACA,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE;YACnB,IAAI,CAAC,SAAS,aAAa,EAAE;gBAC5B,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,mDAAmD;oBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;gBAAC;gBACtG,MAAM,IAAI,6JAAQ,CAAC,aAAa;oBAAE,SAAS,qOAAgB,CAAC,sBAAsB;gBAAC;YACpF;YACA,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,OAAO;YACvC,IAAI,CAAC,MAAM,SAAS,aAAa,CAAC,OAAO,QAAQ;gBAChD,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,oBAAoB;oBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;gBAAC;gBACvE,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;oBAAE,SAAS,qOAAgB,CAAC,aAAa;gBAAC;YAC9E;YACA,MAAM,WAAW,MAAM,SAAS,WAAW,CAAC;gBAC3C,SAAS;gBACT,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;gBACvC,cAAc,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY;YAC1C;YACA,IAAI,CAAC,YAAY,CAAC,UAAU,MAAM;gBACjC,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B;oBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;gBAAC;gBAC9E,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;oBAAE,SAAS,qOAAgB,CAAC,uBAAuB;gBAAC;YACxF;YACA,IAAI,CAAC,SAAS,IAAI,CAAC,KAAK,EAAE;gBACzB,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,wBAAwB;oBAAE,UAAU,EAAE,IAAI,CAAC,QAAQ;gBAAC;gBAC3E,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;oBAAE,SAAS,qOAAgB,CAAC,oBAAoB;gBAAC;YACrF;YACA,MAAM,OAAO,MAAM,oBAAoB,GAAG;gBACzC,UAAU;oBACT,GAAG,SAAS,IAAI;oBAChB,OAAO,SAAS,IAAI,CAAC,KAAK;oBAC1B,IAAI,OAAO,SAAS,IAAI,CAAC,EAAE;oBAC3B,MAAM,SAAS,IAAI,CAAC,IAAI,IAAI;oBAC5B,OAAO,SAAS,IAAI,CAAC,KAAK;oBAC1B,eAAe,SAAS,IAAI,CAAC,aAAa,IAAI;gBAC/C;gBACA,SAAS;oBACR,YAAY,SAAS,EAAE;oBACvB,WAAW,OAAO,SAAS,IAAI,CAAC,EAAE;oBAClC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW;gBACxC;gBACA,aAAa,EAAE,IAAI,CAAC,WAAW;gBAC/B,eAAe,SAAS,qBAAqB,IAAI,CAAC,EAAE,IAAI,CAAC,aAAa,IAAI,SAAS,aAAa;YACjG;YACA,IAAI,KAAK,KAAK,EAAE,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,KAAK,KAAK;YAAC;YACzE,MAAM,IAAA,qKAAgB,EAAC,GAAG,KAAK,IAAI;YACnC,OAAO,EAAE,IAAI,CAAC;gBACb,UAAU;gBACV,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK;gBAC9B,KAAK,KAAK;gBACV,MAAM,IAAA,oKAAe,EAAC,EAAE,OAAO,CAAC,OAAO,EAAE,KAAK,IAAI,CAAC,IAAI;YACxD;QACD;QACA,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,oKAAa,EAAC,GAAG,KAAK,GAAG,EAAE,IAAI,CAAC,cAAc;QACpF,MAAM,MAAM,MAAM,SAAS,sBAAsB,CAAC;YACjD;YACA;YACA,aAAa,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,SAAS,EAAE,EAAE;YAC3D,QAAQ,EAAE,IAAI,CAAC,MAAM;YACrB,WAAW,EAAE,IAAI,CAAC,SAAS;QAC5B;QACA,OAAO,EAAE,IAAI,CAAC;YACb,KAAK,IAAI,QAAQ;YACjB,UAAU,CAAC,EAAE,IAAI,CAAC,eAAe;QAClC;IACD;AACA,MAAM,cAAc,IAAM,IAAA,yLAAkB,EAAC,kBAAkB;QAC9D,QAAQ;QACR,aAAa;QACb,MAAM,2JAAQ,CAAC;YACd,OAAO,2JAAQ,GAAG,IAAI,CAAC;gBAAE,aAAa;YAAoB;YAC1D,UAAU,2JAAQ,GAAG,IAAI,CAAC;gBAAE,aAAa;YAAuB;YAChE,aAAa,2JAAQ,GAAG,IAAI,CAAC;gBAAE,aAAa;YAA2D,GAAG,QAAQ;YAClH,YAAY,4JAAS,GAAG,IAAI,CAAC;gBAAE,aAAa;YAA2E,GAAG,OAAO,CAAC,MAAM,QAAQ;QACjJ;QACA,UAAU;YACT,QAAQ;gBACP,MAAM,CAAC;gBACP,UAAU,CAAC;YACZ;YACA,SAAS;gBACR,aAAa;gBACb,aAAa;gBACb,WAAW;oBAAE,OAAO;wBACnB,aAAa;wBACb,SAAS;4BAAE,oBAAoB;gCAAE,QAAQ;oCACxC,MAAM;oCACN,aAAa;oCACb,YAAY;wCACX,UAAU;4CACT,MAAM;4CACN,MAAM;gDAAC;6CAAM;wCACd;wCACA,OAAO;4CACN,MAAM;4CACN,aAAa;wCACd;wCACA,KAAK;4CACJ,MAAM;4CACN,UAAU;wCACX;wCACA,MAAM;4CACL,MAAM;4CACN,MAAM;wCACP;oCACD;oCACA,UAAU;wCACT;wCACA;wCACA;qCACA;gCACF;4BAAE;wBAAE;oBACL;gBAAE;YACH;QACD;IACD,GAAG,OAAO;QACT,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,EAAE,kBAAkB,SAAS;YACpD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;YACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;gBAAE,SAAS;YAAoC;QAClF;QACA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;QACpC,IAAI,CAAC,0JAAO,GAAG,SAAS,CAAC,OAAO,OAAO,EAAE,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,aAAa;QAAC;QACrH,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,OAAO;YAAE,iBAAiB;QAAK;QAC9F,IAAI,CAAC,MAAM;YACV,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;YAChC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,kBAAkB;gBAAE;YAAM;YACnD,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,qOAAgB,CAAC,yBAAyB;YAAC;QAC1F;QACA,MAAM,oBAAoB,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK;QACrE,IAAI,CAAC,mBAAmB;YACvB,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;YAChC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,gCAAgC;gBAAE;YAAM;YACjE,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,qOAAgB,CAAC,yBAAyB;YAAC;QAC1F;QACA,MAAM,kBAAkB,mBAAmB;QAC3C,IAAI,CAAC,iBAAiB;YACrB,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;YAChC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,sBAAsB;gBAAE;YAAM;YACvD,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,qOAAgB,CAAC,yBAAyB;YAAC;QAC1F;QACA,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;YACtC,MAAM;YACN;QACD,IAAI;YACH,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;YACzB,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,qOAAgB,CAAC,yBAAyB;YAAC;QAC1F;QACA,IAAI,IAAI,OAAO,CAAC,OAAO,EAAE,kBAAkB,4BAA4B,CAAC,KAAK,IAAI,CAAC,aAAa,EAAE;YAChG,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,EAAE,mBAAmB,uBAAuB,MAAM,IAAI,6JAAQ,CAAC,aAAa;gBAAE,SAAS,qOAAgB,CAAC,kBAAkB;YAAC;YACnJ,IAAI,IAAI,OAAO,CAAC,OAAO,EAAE,mBAAmB,cAAc;gBACzD,MAAM,QAAQ,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,KAAK,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;gBACrI,MAAM,cAAc,IAAI,IAAI,CAAC,WAAW,GAAG,mBAAmB,IAAI,IAAI,CAAC,WAAW,IAAI,mBAAmB;gBACzG,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,aAAa;gBAC3F,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,qBAAqB,CAAC;oBACjE,MAAM,KAAK,IAAI;oBACf;oBACA;gBACD,GAAG,IAAI,OAAO;YACf;YACA,MAAM,IAAI,6JAAQ,CAAC,aAAa;gBAAE,SAAS,qOAAgB,CAAC,kBAAkB;YAAC;QAChF;QACA,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,KAAK,IAAI,CAAC,EAAE,EAAE,IAAI,IAAI,CAAC,UAAU,KAAK;QACtG,IAAI,CAAC,SAAS;YACb,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;YACzB,MAAM,IAAI,6JAAQ,CAAC,gBAAgB;gBAAE,SAAS,qOAAgB,CAAC,wBAAwB;YAAC;QACzF;QACA,MAAM,IAAA,qKAAgB,EAAC,KAAK;YAC3B;YACA,MAAM,KAAK,IAAI;QAChB,GAAG,IAAI,IAAI,CAAC,UAAU,KAAK;QAC3B,OAAO,IAAI,IAAI,CAAC;YACf,UAAU,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW;YAChC,OAAO,QAAQ,KAAK;YACpB,KAAK,IAAI,IAAI,CAAC,WAAW;YACzB,MAAM,IAAA,oKAAe,EAAC,IAAI,OAAO,CAAC,OAAO,EAAE,KAAK,IAAI;QACrD;IACD;AAEA,YAAY;AACZ,oCAAoC;AACpC,MAAM,UAAU,IAAA,yLAAkB,EAAC,aAAa;IAC/C,QAAQ;IACR,aAAa;IACb,gBAAgB;IAChB,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCAAE,SAAS;wCAAE,MAAM;oCAAU;gCAAE;4BAC5C;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,MAAM,qBAAqB,MAAM,IAAI,eAAe,CAAC,IAAI,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC,MAAM;IAClH,IAAI,oBAAoB,IAAI;QAC3B,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC;IACjD,EAAE,OAAO,GAAG;QACX,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,0CAA0C;IACpE;IACA,IAAA,qKAAmB,EAAC;IACpB,OAAO,IAAI,IAAI,CAAC;QAAE,SAAS;IAAK;AACjC;AAEA,YAAY;AACZ,mCAAmC;AACnC,MAAM,cAAc,IAAM,IAAA,yLAAkB,EAAC,kBAAkB;QAC9D,QAAQ;QACR,aAAa;QACb,MAAM,2JAAQ,CAAC,2JAAQ,IAAI,wJAAK;QAChC,UAAU;YACT,QAAQ;gBACP,MAAM,CAAC;gBACP,UAAU,CAAC;YACZ;YACA,SAAS;gBACR,aAAa;gBACb,aAAa;gBACb,aAAa;oBAAE,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACvD,MAAM;gCACN,YAAY;oCACX,MAAM;wCACL,MAAM;wCACN,aAAa;oCACd;oCACA,OAAO;wCACN,MAAM;wCACN,aAAa;oCACd;oCACA,UAAU;wCACT,MAAM;wCACN,aAAa;oCACd;oCACA,OAAO;wCACN,MAAM;wCACN,aAAa;oCACd;oCACA,aAAa;wCACZ,MAAM;wCACN,aAAa;oCACd;oCACA,YAAY;wCACX,MAAM;wCACN,aAAa;oCACd;gCACD;gCACA,UAAU;oCACT;oCACA;oCACA;iCACA;4BACF;wBAAE;oBAAE;gBAAE;gBACN,WAAW;oBACV,OAAO;wBACN,aAAa;wBACb,SAAS;4BAAE,oBAAoB;gCAAE,QAAQ;oCACxC,MAAM;oCACN,YAAY;wCACX,OAAO;4CACN,MAAM;4CACN,UAAU;4CACV,aAAa;wCACd;wCACA,MAAM;4CACL,MAAM;4CACN,YAAY;gDACX,IAAI;oDACH,MAAM;oDACN,aAAa;gDACd;gDACA,OAAO;oDACN,MAAM;oDACN,QAAQ;oDACR,aAAa;gDACd;gDACA,MAAM;oDACL,MAAM;oDACN,aAAa;gDACd;gDACA,OAAO;oDACN,MAAM;oDACN,QAAQ;oDACR,UAAU;oDACV,aAAa;gDACd;gDACA,eAAe;oDACd,MAAM;oDACN,aAAa;gDACd;gDACA,WAAW;oDACV,MAAM;oDACN,QAAQ;oDACR,aAAa;gDACd;gDACA,WAAW;oDACV,MAAM;oDACN,QAAQ;oDACR,aAAa;gDACd;4CACD;4CACA,UAAU;gDACT;gDACA;gDACA;gDACA;gDACA;gDACA;6CACA;wCACF;oCACD;oCACA,UAAU;wCAAC;qCAAO;gCACnB;4BAAE;wBAAE;oBACL;oBACA,OAAO;wBACN,aAAa;wBACb,SAAS;4BAAE,oBAAoB;gCAAE,QAAQ;oCACxC,MAAM;oCACN,YAAY;wCAAE,SAAS;4CAAE,MAAM;wCAAS;oCAAE;gCAC3C;4BAAE;wBAAE;oBACL;gBACD;YACD;QACD;IACD,GAAG,OAAO;QACT,OAAO,IAAA,2OAAkB,EAAC,IAAI,OAAO,CAAC,OAAO,EAAE;YAC9C,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,WAAW,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,eAAe,MAAM,IAAI,6JAAQ,CAAC,eAAe;gBAAE,SAAS;YAA4C;YACpM,MAAM,OAAO,IAAI,IAAI;YACrB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,MAAM,GAAG;YAC3E,IAAI,CAAC,0JAAO,GAAG,SAAS,CAAC,OAAO,OAAO,EAAE,MAAM,IAAI,6JAAQ,CAAC,eAAe;gBAAE,SAAS,qOAAgB,CAAC,aAAa;YAAC;YACrH,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;YACvE,IAAI,SAAS,MAAM,GAAG,mBAAmB;gBACxC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;gBACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;oBAAE,SAAS,qOAAgB,CAAC,kBAAkB;gBAAC;YAClF;YACA,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;YACvE,IAAI,SAAS,MAAM,GAAG,mBAAmB;gBACxC,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;gBACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;oBAAE,SAAS,qOAAgB,CAAC,iBAAiB;gBAAC;YACjF;YACA,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,MAAM,GAAG,MAAM;gBACrE,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,oCAAoC,EAAE,OAAO;gBACtE,MAAM,IAAI,6JAAQ,CAAC,wBAAwB;oBAAE,SAAS,qOAAgB,CAAC,qCAAqC;gBAAC;YAC9G;YACA;;;;;;;EAOA,GACA,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;YAC7C,IAAI;YACJ,IAAI;gBACH,MAAM,OAAO,IAAA,oKAAc,EAAC,IAAI,OAAO,CAAC,OAAO,EAAE,MAAM;gBACvD,cAAc,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC;oBAC1D,OAAO,MAAM,WAAW;oBACxB;oBACA;oBACA,GAAG,IAAI;oBACP,eAAe;gBAChB;gBACA,IAAI,CAAC,aAAa,MAAM,IAAI,6JAAQ,CAAC,eAAe;oBAAE,SAAS,qOAAgB,CAAC,qBAAqB;gBAAC;YACvG,EAAE,OAAO,GAAG;gBACX,IAAI,IAAA,6NAAa,KAAI,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,yBAAyB;gBACvE,IAAI,aAAa,6JAAQ,EAAE,MAAM;gBACjC,IAAI,OAAO,CAAC,MAAM,EAAE,MAAM,yBAAyB;gBACnD,MAAM,IAAI,6JAAQ,CAAC,wBAAwB;oBAC1C,SAAS,qOAAgB,CAAC,qBAAqB;oBAC/C,SAAS;gBACV;YACD;YACA,IAAI,CAAC,aAAa,MAAM,IAAI,6JAAQ,CAAC,wBAAwB;gBAAE,SAAS,qOAAgB,CAAC,qBAAqB;YAAC;YAC/G,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;gBAC7C,QAAQ,YAAY,EAAE;gBACtB,YAAY;gBACZ,WAAW,YAAY,EAAE;gBACzB,UAAU;YACX;YACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,gBAAgB,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,wBAAwB,EAAE;gBACzH,MAAM,QAAQ,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,YAAY,KAAK,EAAE,KAAK,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;gBACvI,MAAM,gBAAgB,KAAK,WAAW,GAAG,mBAAmB,KAAK,WAAW,IAAI,mBAAmB;gBACnG,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,eAAe;gBAC7F,MAAM,OAAO,IAAI,OAAO,GAAG;oBAAC;wBAC3B,MAAM;wBACN;wBACA;oBACD;oBAAG,IAAI,OAAO;iBAAC,GAAG;oBAAC;wBAClB,MAAM;wBACN;wBACA;oBACD;iBAAE;gBACF,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,2BAA2B;YACzE;YACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,KAAK,SAAS,IAAI,OAAO,CAAC,OAAO,CAAC,gBAAgB,CAAC,wBAAwB,EAAE,OAAO,IAAI,IAAI,CAAC;gBAC/I,OAAO;gBACP,MAAM,IAAA,oKAAe,EAAC,IAAI,OAAO,CAAC,OAAO,EAAE;YAC5C;YACA,MAAM,UAAU,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,YAAY,EAAE,EAAE,eAAe;YAC/F,IAAI,CAAC,SAAS,MAAM,IAAI,6JAAQ,CAAC,eAAe;gBAAE,SAAS,qOAAgB,CAAC,wBAAwB;YAAC;YACrG,MAAM,IAAA,qKAAgB,EAAC,KAAK;gBAC3B;gBACA,MAAM;YACP,GAAG,eAAe;YAClB,OAAO,IAAI,IAAI,CAAC;gBACf,OAAO,QAAQ,KAAK;gBACpB,MAAM,IAAA,oKAAe,EAAC,IAAI,OAAO,CAAC,OAAO,EAAE;YAC5C;QACD;IACD;AAEA,YAAY;AACZ,uCAAuC;AACvC,MAAM,aAAa,IAAM,IAAA,yLAAkB,EAAC,gBAAgB;QAC3D,QAAQ;QACR,aAAa;QACb,MAAM,2JAAQ,CAAC,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA8B,IAAI,wJAAK;QACrF,KAAK;YAAC,sKAAiB;SAAC;QACxB,UAAU;YACT,QAAQ;gBAAE,MAAM,CAAC;YAAE;YACnB,SAAS;gBACR,aAAa;gBACb,aAAa;gBACb,aAAa;oBAAE,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACvD,MAAM;gCACN,YAAY;oCACX,MAAM;wCACL,MAAM;wCACN,aAAa;oCACd;oCACA,OAAO;wCACN,MAAM;wCACN,aAAa;wCACb,UAAU;oCACX;gCACD;4BACD;wBAAE;oBAAE;gBAAE;gBACN,WAAW;oBAAE,OAAO;wBACnB,aAAa;wBACb,SAAS;4BAAE,oBAAoB;gCAAE,QAAQ;oCACxC,MAAM;oCACN,YAAY;wCAAE,MAAM;4CACnB,MAAM;4CACN,MAAM;wCACP;oCAAE;gCACH;4BAAE;wBAAE;oBACL;gBAAE;YACH;QACD;IACD,GAAG,OAAO;QACT,MAAM,OAAO,IAAI,IAAI;QACrB,IAAI,KAAK,KAAK,EAAE,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,wBAAwB;QAAC;QACvG,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,GAAG;QACjC,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;QACnC,MAAM,mBAAmB,IAAA,oKAAc,EAAC,IAAI,OAAO,CAAC,OAAO,EAAE,MAAM;QACnE,IAAI,UAAU,KAAK,KAAK,SAAS,KAAK,KAAK,OAAO,IAAI,CAAC,kBAAkB,MAAM,KAAK,GAAG,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS;QAAsB;QAC1J,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,IAAI,CAAC,EAAE,EAAE;YAC1E;YACA;YACA,GAAG,gBAAgB;QACpB;QACA;;CAEA,GACA,MAAM,IAAA,qKAAgB,EAAC,KAAK;YAC3B,SAAS,QAAQ,OAAO;YACxB;QACD;QACA,OAAO,IAAI,IAAI,CAAC;YAAE,QAAQ;QAAK;IAChC;AACA,MAAM,iBAAiB,IAAA,yLAAkB,EAAC,oBAAoB;IAC7D,QAAQ;IACR,aAAa;IACb,MAAM,2JAAQ,CAAC;QACd,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA0B;QACtE,iBAAiB,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAmC;QACnF,qBAAqB,4JAAS,GAAG,IAAI,CAAC;YAAE,aAAa;QAA0B,GAAG,QAAQ;IAC3F;IACA,KAAK;QAAC,sKAA0B;KAAC;IACjC,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,OAAO;wCACN,MAAM;wCACN,UAAU;wCACV,aAAa;oCACd;oCACA,MAAM;wCACL,MAAM;wCACN,YAAY;4CACX,IAAI;gDACH,MAAM;gDACN,aAAa;4CACd;4CACA,OAAO;gDACN,MAAM;gDACN,QAAQ;gDACR,aAAa;4CACd;4CACA,MAAM;gDACL,MAAM;gDACN,aAAa;4CACd;4CACA,OAAO;gDACN,MAAM;gDACN,QAAQ;gDACR,UAAU;gDACV,aAAa;4CACd;4CACA,eAAe;gDACd,MAAM;gDACN,aAAa;4CACd;4CACA,WAAW;gDACV,MAAM;gDACN,QAAQ;gDACR,aAAa;4CACd;4CACA,WAAW;gDACV,MAAM;gDACN,QAAQ;gDACR,aAAa;4CACd;wCACD;wCACA,UAAU;4CACT;4CACA;4CACA;4CACA;4CACA;4CACA;yCACA;oCACF;gCACD;gCACA,UAAU;oCAAC;iCAAO;4BACnB;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,MAAM,EAAE,WAAW,EAAE,eAAe,EAAE,qBAAqB,qBAAqB,EAAE,GAAG,IAAI,IAAI;IAC7F,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;IACvE,IAAI,YAAY,MAAM,GAAG,mBAAmB;QAC3C,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,kBAAkB;QAAC;IAClF;IACA,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;IACvE,IAAI,YAAY,MAAM,GAAG,mBAAmB;QAC3C,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,iBAAiB;QAAC;IACjF;IACA,MAAM,UAAU,CAAC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,QAAQ,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,YAAc,UAAU,UAAU,KAAK,gBAAgB,UAAU,QAAQ;IACjK,IAAI,CAAC,WAAW,CAAC,QAAQ,QAAQ,EAAE,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,qOAAgB,CAAC,4BAA4B;IAAC;IAC9H,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;IACrD,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;QACtC,MAAM,QAAQ,QAAQ;QACtB,UAAU;IACX,IAAI,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS,qOAAgB,CAAC,gBAAgB;IAAC;IACnF,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAE;QAAE,UAAU;IAAa;IACrF,IAAI,QAAQ;IACZ,IAAI,uBAAuB;QAC1B,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;QAChE,MAAM,aAAa,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,aAAa,CAAC,QAAQ,IAAI,CAAC,EAAE;QAClF,IAAI,CAAC,YAAY,MAAM,IAAI,6JAAQ,CAAC,yBAAyB;YAAE,SAAS,qOAAgB,CAAC,qBAAqB;QAAC;QAC/G,MAAM,IAAA,qKAAgB,EAAC,KAAK;YAC3B,SAAS;YACT,MAAM,QAAQ,IAAI;QACnB;QACA,QAAQ,WAAW,KAAK;IACzB;IACA,OAAO,IAAI,IAAI,CAAC;QACf;QACA,MAAM;YACL,IAAI,QAAQ,IAAI,CAAC,EAAE;YACnB,OAAO,QAAQ,IAAI,CAAC,KAAK;YACzB,MAAM,QAAQ,IAAI,CAAC,IAAI;YACvB,OAAO,QAAQ,IAAI,CAAC,KAAK;YACzB,eAAe,QAAQ,IAAI,CAAC,aAAa;YACzC,WAAW,QAAQ,IAAI,CAAC,SAAS;YACjC,WAAW,QAAQ,IAAI,CAAC,SAAS;QAClC;IACD;AACD;AACA,MAAM,cAAc,IAAA,yLAAkB,EAAC,iBAAiB;IACvD,QAAQ;IACR,MAAM,2JAAQ,CAAC;QAAE,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAsC;IAAG;IACtG,UAAU;QAAE,aAAa;IAAK;IAC9B,KAAK;QAAC,sKAA0B;KAAC;AAClC,GAAG,OAAO;IACT,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,IAAI;IAChC,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;IACvE,IAAI,YAAY,MAAM,GAAG,mBAAmB;QAC3C,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,kBAAkB;QAAC;IAClF;IACA,MAAM,oBAAoB,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB;IACvE,IAAI,YAAY,MAAM,GAAG,mBAAmB;QAC3C,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,iBAAiB;QAAC;IACjF;IACA,MAAM,UAAU,CAAC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,QAAQ,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,YAAc,UAAU,UAAU,KAAK,gBAAgB,UAAU,QAAQ;IACjK,MAAM,eAAe,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;IACrD,IAAI,CAAC,SAAS;QACb,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,WAAW,CAAC;YAC7C,QAAQ,QAAQ,IAAI,CAAC,EAAE;YACvB,YAAY;YACZ,WAAW,QAAQ,IAAI,CAAC,EAAE;YAC1B,UAAU;QACX;QACA,OAAO,IAAI,IAAI,CAAC;YAAE,QAAQ;QAAK;IAChC;IACA,MAAM,IAAI,6JAAQ,CAAC,eAAe;QAAE,SAAS;IAA8B;AAC5E;AACA,MAAM,aAAa,IAAA,yLAAkB,EAAC,gBAAgB;IACrD,QAAQ;IACR,KAAK;QAAC,sKAA0B;KAAC;IACjC,MAAM,2JAAQ,CAAC;QACd,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA4D,GAAG,QAAQ;QACnH,UAAU,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA0D,GAAG,QAAQ;QAC9G,OAAO,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA2C,GAAG,QAAQ;IAC7F;IACA,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,aAAa;YACb,aAAa;gBAAE,SAAS;oBAAE,oBAAoB;wBAAE,QAAQ;4BACvD,MAAM;4BACN,YAAY;gCACX,aAAa;oCACZ,MAAM;oCACN,aAAa;gCACd;gCACA,UAAU;oCACT,MAAM;oCACN,aAAa;gCACd;gCACA,OAAO;oCACN,MAAM;oCACN,aAAa;gCACd;4BACD;wBACD;oBAAE;gBAAE;YAAE;YACN,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,SAAS;wCACR,MAAM;wCACN,aAAa;oCACd;oCACA,SAAS;wCACR,MAAM;wCACN,MAAM;4CAAC;4CAAgB;yCAA0B;wCACjD,aAAa;oCACd;gCACD;gCACA,UAAU;oCAAC;oCAAW;iCAAU;4BACjC;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,YAAY,SAAS;QACnD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC;IACpB;IACA,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO;IACnC,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;QACtB,MAAM,UAAU,CAAC,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,YAAY,CAAC,QAAQ,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,YAAc,UAAU,UAAU,KAAK,gBAAgB,UAAU,QAAQ;QACjK,IAAI,CAAC,WAAW,CAAC,QAAQ,QAAQ,EAAE,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,4BAA4B;QAAC;QAC9H,IAAI,CAAC,MAAM,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;YACtC,MAAM,QAAQ,QAAQ;YACtB,UAAU,IAAI,IAAI,CAAC,QAAQ;QAC5B,IAAI,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,gBAAgB;QAAC;IACpF;IACA,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;QACnB,MAAM,mBAAmB;YACxB,GAAG,GAAG;YACN,OAAO;gBAAE,OAAO,IAAI,IAAI,CAAC,KAAK;YAAC;QAChC;QACA,OAAO,IAAI,IAAI,CAAC;YACf,SAAS;YACT,SAAS;QACV;IACD;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,+BAA+B;QACvE,MAAM,QAAQ,IAAA,oKAAoB,EAAC,IAAI,OAAO;QAC9C,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC;YACzD,OAAO,QAAQ,IAAI,CAAC,EAAE;YACtB,YAAY,CAAC,eAAe,EAAE,OAAO;YACrC,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,wBAAwB,OAAO,EAAE,IAAI;QAC7G;QACA,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,4BAA4B,EAAE,MAAM,aAAa,EAAE,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK;QACnH,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,6BAA6B,CAAC;YACvE,MAAM,QAAQ,IAAI;YAClB;YACA;QACD,GAAG,IAAI,OAAO;QACd,OAAO,IAAI,IAAI,CAAC;YACf,SAAS;YACT,SAAS;QACV;IACD;IACA,IAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,OAAO,CAAC,aAAa,CAAC,QAAQ,KAAK,GAAG;QACnE,MAAM,aAAa,IAAI,KAAK,QAAQ,OAAO,CAAC,SAAS,EAAE,OAAO;QAC9D,MAAM,WAAW,IAAI,OAAO,CAAC,aAAa,CAAC,QAAQ,GAAG;QACtD,IAAI,KAAK,GAAG,KAAK,aAAa,WAAW,KAAK,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS,qOAAgB,CAAC,eAAe;QAAC;IAC7H;IACA,MAAM,eAAe,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IAC1D,IAAI,cAAc,MAAM,aAAa,QAAQ,IAAI,EAAE,IAAI,OAAO;IAC9D,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,IAAI,CAAC,EAAE;IAC5D,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;IAChE,IAAA,qKAAmB,EAAC;IACpB,MAAM,cAAc,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IACzD,IAAI,aAAa,MAAM,YAAY,QAAQ,IAAI,EAAE,IAAI,OAAO;IAC5D,OAAO,IAAI,IAAI,CAAC;QACf,SAAS;QACT,SAAS;IACV;AACD;AACA,MAAM,qBAAqB,IAAA,yLAAkB,EAAC,yBAAyB;IACtE,QAAQ;IACR,OAAO,2JAAQ,CAAC;QACf,OAAO,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAA2C;QACjF,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAwC,GAAG,QAAQ;IAChG;IACA,KAAK;QAAC,YAAY,CAAC,MAAQ,IAAI,KAAK,CAAC,WAAW;KAAE;IAClD,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,WAAW;gBAAE,OAAO;oBACnB,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,SAAS;wCACR,MAAM;wCACN,aAAa;oCACd;oCACA,SAAS;wCACR,MAAM;wCACN,MAAM;4CAAC;yCAAe;wCACtB,aAAa;oCACd;gCACD;gCACA,UAAU;oCAAC;oCAAW;iCAAU;4BACjC;wBAAE;oBAAE;gBACL;YAAE;QACH;IAAE;AACH,GAAG,OAAO;IACT,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,YAAY,SAAS;QACnD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC;IACpB;IACA,MAAM,UAAU,MAAM,IAAA,sKAAiB,EAAC;IACxC,IAAI,CAAC,SAAS,MAAM,IAAI,6JAAQ,CAAC,aAAa;QAAE,SAAS,qOAAgB,CAAC,uBAAuB;IAAC;IAClG,MAAM,QAAQ,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC,eAAe,EAAE,IAAI,KAAK,CAAC,KAAK,EAAE;IACzG,IAAI,CAAC,SAAS,MAAM,SAAS,GAAG,aAAa,GAAG,IAAI,QAAQ,MAAM,IAAI,6JAAQ,CAAC,aAAa;QAAE,SAAS,qOAAgB,CAAC,aAAa;IAAC;IACtI,IAAI,MAAM,KAAK,KAAK,QAAQ,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,6JAAQ,CAAC,aAAa;QAAE,SAAS,qOAAgB,CAAC,aAAa;IAAC;IAC/G,MAAM,eAAe,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IAC1D,IAAI,cAAc,MAAM,aAAa,QAAQ,IAAI,EAAE,IAAI,OAAO;IAC9D,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,IAAI,CAAC,EAAE;IAC5D,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;IAChE,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,EAAE;IAChE,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,uBAAuB,CAAC,MAAM,EAAE;IAClE,IAAA,qKAAmB,EAAC;IACpB,MAAM,cAAc,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE;IACzD,IAAI,aAAa,MAAM,YAAY,QAAQ,IAAI,EAAE,IAAI,OAAO;IAC5D,IAAI,IAAI,KAAK,CAAC,WAAW,EAAE,MAAM,IAAI,QAAQ,CAAC,IAAI,KAAK,CAAC,WAAW,IAAI;IACvE,OAAO,IAAI,IAAI,CAAC;QACf,SAAS;QACT,SAAS;IACV;AACD;AACA,MAAM,cAAc,IAAA,yLAAkB,EAAC,iBAAiB;IACvD,QAAQ;IACR,MAAM,2JAAQ,CAAC;QACd,UAAU,0JAAO,GAAG,IAAI,CAAC;YAAE,aAAa;QAA6D;QACrG,aAAa,2JAAQ,GAAG,IAAI,CAAC;YAAE,aAAa;QAAkD,GAAG,QAAQ;IAC1G;IACA,KAAK;QAAC,sKAA0B;KAAC;IACjC,UAAU;QAAE,SAAS;YACpB,aAAa;YACb,WAAW;gBACV,OAAO;oBACN,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCACX,MAAM;wCACL,MAAM;wCACN,MAAM;oCACP;oCACA,QAAQ;wCACP,MAAM;wCACN,aAAa;oCACd;oCACA,SAAS;wCACR,MAAM;wCACN,MAAM;4CAAC;4CAAiB;yCAA0B;wCAClD,aAAa;wCACb,UAAU;oCACX;gCACD;gCACA,UAAU;oCAAC;iCAAS;4BACrB;wBAAE;oBAAE;gBACL;gBACA,OAAO;oBACN,aAAa;oBACb,SAAS;wBAAE,oBAAoB;4BAAE,QAAQ;gCACxC,MAAM;gCACN,YAAY;oCAAE,SAAS;wCAAE,MAAM;oCAAS;gCAAE;4BAC3C;wBAAE;oBAAE;gBACL;YACD;QACD;IAAE;AACH,GAAG,OAAO;IACT,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,aAAa,SAAS;QACpD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS;QAA2B;IACzE;IACA,MAAM,WAAW,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW;IAC9C,IAAI,aAAa,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE;QAChD,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS;QAAoB;IAClE;IACA,IAAI,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,eAAe,CAAC,WAAW;QAChE,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,wBAAwB;YAAE,SAAS,qOAAgB,CAAC,qCAAqC;QAAC;IAC9G;IACA;;CAEA,GACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,KAAK,QAAQ,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,8BAA8B,EAAE;QAC3H,MAAM,IAAI,OAAO,CAAC,eAAe,CAAC,iBAAiB,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE;YAAE,OAAO;QAAS;QACtG,MAAM,IAAA,qKAAgB,EAAC,KAAK;YAC3B,SAAS,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO;YACpC,MAAM;gBACL,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;gBAC3B,OAAO;YACR;QACD;QACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,uBAAuB;YACjE,MAAM,UAAU,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,UAAU,KAAK,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE;YAChI,MAAM,QAAQ,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,QAAQ,aAAa,EAAE,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK;YAC/G,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,qBAAqB,CAAC;gBACjE,MAAM;oBACL,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;oBAC3B,OAAO;gBACR;gBACA,KAAK;gBACL,OAAO;YACR,GAAG,IAAI,OAAO;QACf;QACA,OAAO,IAAI,IAAI,CAAC;YAAE,QAAQ;QAAK;IAChC;IACA,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,2BAA2B,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,2BAA2B,GAAG;QACrL,MAAM,UAAU,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,WAAW;YAAE,aAAa;QAA4B;QAC9M,MAAM,QAAQ,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,QAAQ,aAAa,EAAE,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK;QAC/G,MAAM,SAAS,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,2BAA2B,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,2BAA2B;QACnJ,IAAI,QAAQ,MAAM,OAAO;YACxB,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;YAC9B;YACA,KAAK;YACL,OAAO;QACR,GAAG,IAAI,OAAO;QACd,OAAO,IAAI,IAAI,CAAC;YAAE,QAAQ;QAAK;IAChC;IACA,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,uBAAuB;QAClE,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QACzB,MAAM,IAAI,6JAAQ,CAAC,eAAe;YAAE,SAAS;QAAmC;IACjF;IACA,MAAM,QAAQ,MAAM,6BAA6B,IAAI,OAAO,CAAC,MAAM,EAAE,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,WAAW;QAAE,aAAa;IAA4B;IAC5M,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,oBAAoB,EAAE,MAAM,aAAa,EAAE,IAAI,IAAI,CAAC,WAAW,IAAI,KAAK;IAC3G,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC,qBAAqB,CAAC;QACjE,MAAM;YACL,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI;YAC3B,OAAO;QACR;QACA;QACA;IACD,GAAG,IAAI,OAAO;IACd,OAAO,IAAI,IAAI,CAAC;QAAE,QAAQ;IAAK;AAChC;AAEA,YAAY;AACZ,sCAAsC;AACtC,MAAM,oBAAoB,IAAA,qJAAU,EAAC,CAAC,KAAK,KAAK;IAC/C,IAAI,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,KAAK,MAAM,OAAO,CAAC,QAAQ;QACpD,GAAG,CAAC,IAAI,GAAG;QACX,OAAO;IACR;AACD;AACA,SAAS,gBAAgB,SAAS,EAAE,GAAG;IACtC,MAAM,MAAM,CAAC;IACb,KAAK,MAAM,CAAC,KAAK,SAAS,IAAI,OAAO,OAAO,CAAC,WAAY;QACxD,GAAG,CAAC,IAAI,GAAG,OAAO;YACjB,MAAM,MAAM;gBACX,MAAM,cAAc,MAAM;gBAC1B,IAAI,kBAAkB;oBACrB,GAAG,OAAO;oBACV,SAAS;wBACR,GAAG,WAAW;wBACd,UAAU,KAAK;wBACf,iBAAiB,KAAK;wBACtB,SAAS;oBACV;oBACA,MAAM,SAAS,IAAI;oBACnB,SAAS,SAAS,UAAU,IAAI,QAAQ,SAAS,WAAW,KAAK;gBAClE;gBACA,OAAO,IAAA,mPAAsB,EAAC,iBAAiB;oBAC9C,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,SAAS;oBAC7C,MAAM,SAAS,MAAM,eAAe,iBAAiB;oBACrD;;;KAGA,GACA,IAAI,aAAa,UAAU,OAAO,OAAO,IAAI,OAAO,OAAO,OAAO,KAAK,UAAU;wBAChF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,GAAG,OAAO,OAAO;wBAC3C;;;;MAIA,GACA,IAAI,SAAS,QAAQ,OAAO,CAAC,CAAC,OAAO;4BACpC,gBAAgB,OAAO,CAAC,GAAG,CAAC,OAAO;wBACpC;wBACA,kBAAkB,kBAAkB,MAAM;oBAC3C,OAAO,IAAI,QAAQ,OAAO,SAAS,aAAa,IAAA,+JAAU,EAAC,QAAQ;wBAAE,SAAS,SAAS;oBAAQ,KAAK,SAAS,gBAAgB;wBAC5H,SAAS,SAAS;wBAClB,UAAU;oBACX,IAAI;oBACJ,gBAAgB,UAAU,GAAG;oBAC7B,gBAAgB,aAAa,GAAG;oBAChC,gBAAgB,YAAY,GAAG;oBAC/B,MAAM,SAAS,MAAM,IAAA,mPAAsB,EAAC,iBAAiB,IAAM,SAAS,kBAAkB,KAAK,CAAC,CAAC;wBACpG,IAAI,aAAa,6JAAQ,EAC9B;;;MAGK,GACA,OAAO;4BACN,UAAU;4BACV,QAAQ,EAAE,UAAU;4BACpB,SAAS,EAAE,OAAO,GAAG,IAAI,QAAQ,EAAE,OAAO,IAAI;wBAC/C;wBACA,MAAM;oBACP;oBACA,IAAI,UAAU,kBAAkB,UAAU,OAAO;oBACjD,gBAAgB,OAAO,CAAC,QAAQ,GAAG,OAAO,QAAQ;oBAClD,gBAAgB,OAAO,CAAC,eAAe,GAAG,OAAO,OAAO;oBACxD,MAAM,QAAQ,MAAM,cAAc,iBAAiB;oBACnD,IAAI,MAAM,QAAQ,EAAE,OAAO,QAAQ,GAAG,MAAM,QAAQ;oBACpD,IAAI,OAAO,QAAQ,YAAY,6JAAQ,IAAI,IAAA,mOAAgB,EAAC,YAAY,MAAM,CAAC,KAAK,EAAE,UAAU,OAAO,QAAQ,CAAC,KAAK,GAAG,OAAO,QAAQ,CAAC,UAAU;oBAClJ,IAAI,OAAO,QAAQ,YAAY,6JAAQ,IAAI,CAAC,SAAS,YAAY,MAAM,OAAO,QAAQ;oBACtF,OAAO,SAAS,aAAa,IAAA,+JAAU,EAAC,OAAO,QAAQ,EAAE;wBACxD,SAAS,OAAO,OAAO;wBACvB,QAAQ,OAAO,MAAM;oBACtB,KAAK,SAAS,gBAAgB,SAAS,eAAe;wBACrD,SAAS,OAAO,OAAO;wBACvB,UAAU,OAAO,QAAQ;wBACzB,QAAQ,OAAO,MAAM;oBACtB,IAAI;wBACH,SAAS,OAAO,OAAO;wBACvB,UAAU,OAAO,QAAQ;oBAC1B,IAAI,SAAS,eAAe;wBAC3B,UAAU,OAAO,QAAQ;wBACzB,QAAQ,OAAO,MAAM;oBACtB,IAAI,OAAO,QAAQ;gBACpB;YACD;YACA,IAAI,MAAM,IAAA,qOAAe,KAAI,OAAO;iBAC/B,OAAO,IAAA,6OAAmB,EAAC,aAAa,GAAG,IAAI,WAAW;QAChE;QACA,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,IAAI;QAC7B,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,SAAS,OAAO;IACpC;IACA,OAAO;AACR;AACA,eAAe,eAAe,OAAO,EAAE,KAAK;IAC3C,IAAI,kBAAkB,CAAC;IACvB,KAAK,MAAM,QAAQ,MAAO,IAAI,KAAK,OAAO,CAAC,UAAU;QACpD,MAAM,SAAS,MAAM,KAAK,OAAO,CAAC;YACjC,GAAG,OAAO;YACV,eAAe;QAChB,GAAG,KAAK,CAAC,CAAC;YACT,IAAI,aAAa,6JAAQ,IAAI,IAAA,mOAAgB,EAAC,QAAQ,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,EAAE,KAAK,GAAG,EAAE,UAAU;YAC5G,MAAM;QACP;QACA,IAAI,UAAU,OAAO,WAAW,UAAU;YACzC,IAAI,aAAa,UAAU,OAAO,OAAO,OAAO,KAAK,UAAU;gBAC9D,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,GAAG,OAAO,OAAO;gBAC3C,IAAI,mBAAmB,SAAS,IAAI,gBAAgB,OAAO,EAAE,QAAQ,OAAO,CAAC,CAAC,OAAO;oBACpF,gBAAgB,OAAO,EAAE,IAAI,KAAK;gBACnC;qBACK,gBAAgB,OAAO,GAAG;gBAC/B,kBAAkB,kBAAkB,MAAM;gBAC1C;YACD;YACA,OAAO;QACR;IACD;IACA,OAAO;QAAE,SAAS;IAAgB;AACnC;AACA,eAAe,cAAc,OAAO,EAAE,KAAK;IAC1C,KAAK,MAAM,QAAQ,MAAO,IAAI,KAAK,OAAO,CAAC,UAAU;QACpD,MAAM,SAAS,MAAM,KAAK,OAAO,CAAC,SAAS,KAAK,CAAC,CAAC;YACjD,IAAI,aAAa,6JAAQ,EAAE;gBAC1B,IAAI,IAAA,mOAAgB,EAAC,QAAQ,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,EAAE,KAAK,GAAG,EAAE,UAAU;gBACnF,OAAO;oBACN,UAAU;oBACV,SAAS,EAAE,OAAO,GAAG,IAAI,QAAQ,EAAE,OAAO,IAAI;gBAC/C;YACD;YACA,MAAM;QACP;QACA,IAAI,OAAO,OAAO,EAAE,OAAO,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO;YAClD,IAAI,CAAC,QAAQ,OAAO,CAAC,eAAe,EAAE,QAAQ,OAAO,CAAC,eAAe,GAAG,IAAI,QAAQ;gBAAE,CAAC,IAAI,EAAE;YAAM;iBAC9F,IAAI,IAAI,WAAW,OAAO,cAAc,QAAQ,OAAO,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK;iBACpF,QAAQ,OAAO,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK;QAC/C;QACA,IAAI,OAAO,QAAQ,EAAE,QAAQ,OAAO,CAAC,QAAQ,GAAG,OAAO,QAAQ;IAChE;IACA,OAAO;QACN,UAAU,QAAQ,OAAO,CAAC,QAAQ;QAClC,SAAS,QAAQ,OAAO,CAAC,eAAe;IACzC;AACD;AACA,SAAS,SAAS,WAAW;IAC5B,MAAM,UAAU,YAAY,OAAO,CAAC,OAAO,IAAI,EAAE;IACjD,MAAM,cAAc,EAAE;IACtB,MAAM,aAAa,EAAE;IACrB,IAAI,YAAY,OAAO,CAAC,KAAK,EAAE,QAAQ,YAAY,IAAI,CAAC;QACvD,SAAS,IAAM;QACf,SAAS,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM;IAC1C;IACA,IAAI,YAAY,OAAO,CAAC,KAAK,EAAE,OAAO,WAAW,IAAI,CAAC;QACrD,SAAS,IAAM;QACf,SAAS,YAAY,OAAO,CAAC,KAAK,CAAC,KAAK;IACzC;IACA,MAAM,oBAAoB,QAAQ,GAAG,CAAC,CAAC;QACtC,IAAI,OAAO,KAAK,EAAE,QAAQ,OAAO,OAAO,KAAK,CAAC,MAAM;IACrD,GAAG,MAAM,CAAC,CAAC,SAAW,WAAW,KAAK,GAAG,IAAI;IAC7C,MAAM,mBAAmB,QAAQ,GAAG,CAAC,CAAC;QACrC,IAAI,OAAO,KAAK,EAAE,OAAO,OAAO,OAAO,KAAK,CAAC,KAAK;IACnD,GAAG,MAAM,CAAC,CAAC,SAAW,WAAW,KAAK,GAAG,IAAI;IAC7C;;CAEA,GACA,IAAI,kBAAkB,MAAM,EAAE,YAAY,IAAI,IAAI;IAClD,IAAI,iBAAiB,MAAM,EAAE,WAAW,IAAI,IAAI;IAChD,OAAO;QACN;QACA;IACD;AACD;AAEA,YAAY;AACZ,0BAA0B;AAC1B,SAAS,uBAAuB,OAAO,EAAE,QAAQ;IAChD,MAAM,mBAAmB,aAAa,GAAG,IAAI;IAC7C,QAAQ,OAAO,EAAE,QAAQ,CAAC;QACzB,IAAI,OAAO,SAAS,EAAE;YACrB,KAAK,MAAM,CAAC,KAAK,SAAS,IAAI,OAAO,OAAO,CAAC,OAAO,SAAS,EAAG,IAAI,YAAY,UAAU,UAAU;gBACnG,MAAM,OAAO,SAAS,IAAI;gBAC1B,IAAI,UAAU,EAAE;gBAChB,IAAI,SAAS,OAAO,IAAI,YAAY,SAAS,OAAO,EAAE;oBACrD,IAAI,MAAM,OAAO,CAAC,SAAS,OAAO,CAAC,MAAM,GAAG,UAAU,SAAS,OAAO,CAAC,MAAM;yBACxE,IAAI,OAAO,SAAS,OAAO,CAAC,MAAM,KAAK,UAAU,UAAU;wBAAC,SAAS,OAAO,CAAC,MAAM;qBAAC;gBAC1F;gBACA,IAAI,QAAQ,MAAM,KAAK,GAAG,UAAU;oBAAC;iBAAI;gBACzC,IAAI,CAAC,iBAAiB,GAAG,CAAC,OAAO,iBAAiB,GAAG,CAAC,MAAM,EAAE;gBAC9D,iBAAiB,GAAG,CAAC,MAAM,IAAI,CAAC;oBAC/B,UAAU,OAAO,EAAE;oBACnB,aAAa;oBACb;gBACD;YACD;QACD;IACD;IACA,MAAM,YAAY,EAAE;IACpB,KAAK,MAAM,CAAC,MAAM,QAAQ,IAAI,iBAAiB,OAAO,GAAI,IAAI,QAAQ,MAAM,GAAG,GAAG;QACjF,MAAM,YAAY,aAAa,GAAG,IAAI;QACtC,IAAI,cAAc;QAClB,KAAK,MAAM,SAAS,QAAS,KAAK,MAAM,UAAU,MAAM,OAAO,CAAE;YAChE,IAAI,CAAC,UAAU,GAAG,CAAC,SAAS,UAAU,GAAG,CAAC,QAAQ,EAAE;YACpD,UAAU,GAAG,CAAC,QAAQ,IAAI,CAAC,MAAM,QAAQ;YACzC,IAAI,UAAU,GAAG,CAAC,QAAQ,MAAM,GAAG,GAAG,cAAc;YACpD,IAAI,WAAW,OAAO,QAAQ,MAAM,GAAG,GAAG,cAAc;iBACnD,IAAI,WAAW,OAAO,UAAU,GAAG,CAAC,MAAM,cAAc;QAC9D;QACA,IAAI,aAAa;YAChB,MAAM,gBAAgB;mBAAI,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ;aAAG;YAClE,MAAM,qBAAqB,EAAE;YAC7B,KAAK,MAAM,CAAC,QAAQ,QAAQ,IAAI,UAAU,OAAO,GAAI,IAAI,QAAQ,MAAM,GAAG,KAAK,WAAW,OAAO,QAAQ,MAAM,GAAG,KAAK,WAAW,OAAO,UAAU,GAAG,CAAC,MAAM,mBAAmB,IAAI,CAAC;YACrL,UAAU,IAAI,CAAC;gBACd;gBACA,SAAS;gBACT;YACD;QACD;IACD;IACA,IAAI,UAAU,MAAM,GAAG,GAAG;QACzB,MAAM,mBAAmB,UAAU,GAAG,CAAC,CAAC,WAAa,CAAC,KAAK,EAAE,SAAS,IAAI,CAAC,GAAG,EAAE,SAAS,kBAAkB,CAAC,IAAI,CAAC,MAAM,mBAAmB,EAAE,SAAS,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC;QAChL,SAAS,KAAK,CAAC,CAAC;AAClB,EAAE,iBAAiB;;;;;;AAMnB,CAAC;IACA;AACD;AACA,SAAS,aAAa,GAAG,EAAE,OAAO;IACjC,MAAM,kBAAkB,QAAQ,OAAO,EAAE,OAAO,CAAC,KAAK;QACrD,OAAO;YACN,GAAG,GAAG;YACN,GAAG,OAAO,SAAS;QACpB;IACD,GAAG,CAAC,MAAM,CAAC;IACX,MAAM,cAAc,QAAQ,OAAO,EAAE,IAAI,CAAC,SAAW,OAAO,WAAW,EAAE,IAAI,CAAC;YAC7E,MAAM,aAAc,OAAO;gBAC1B,MAAM,cAAc,MAAM;gBAC1B,OAAO,EAAE,UAAU,CAAC;oBACnB,GAAG,OAAO;oBACV,SAAS;wBACR,GAAG,WAAW;wBACd,GAAG,QAAQ,OAAO;oBACnB;gBACD;YACD;YACA,WAAW,OAAO,GAAG,EAAE,UAAU,CAAC,OAAO;YACzC,OAAO;gBACN,MAAM,EAAE,IAAI;gBACZ;YACD;QACD,IAAI,OAAO,CAAC,SAAW,WAAW,KAAK,GAAG,UAAU,EAAE;IACtD,OAAO;QACN,KAAK,gBAAgB;YACpB,cAAc;YACd;YACA,YAAY,IAAA,sKAAU;YACtB;YACA,aAAa;YACb,aAAa;YACb;YACA;YACA;YACA;YACA;YACA;YACA,YAAY;YACZ;YACA;YACA;YACA,cAAc,IAAA,sKAAY;YAC1B,eAAA,sKAAa;YACb,gBAAA,sKAAc;YACd,qBAAA,sKAAmB;YACnB;YACA;YACA;YACA;YACA;YACA;YACA;YACA,GAAG,eAAe;YAClB;YACA;QACD,GAAG;QACH;IACD;AACD;AACA,MAAM,SAAS,CAAC,KAAK;IACpB,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,GAAG,aAAa,KAAK;IAC/C,MAAM,WAAW,IAAI,IAAI,IAAI,OAAO,EAAE,QAAQ;IAC9C,OAAO,IAAA,iKAAY,EAAC,KAAK;QACxB,eAAe;QACf,SAAS;YAAE,UAAU;QAAK;QAC1B;QACA,kBAAkB;YAAC;gBAClB,MAAM;gBACN,YAAY;YACb;eAAM;SAAY;QAClB,mBAAmB;YAAC;SAAmB;QACvC,MAAM,WAAU,GAAG;YAClB,MAAM,gBAAgB,IAAI,OAAO,CAAC,aAAa,IAAI,EAAE;YACrD,MAAM,OAAO,IAAI,IAAI,IAAI,GAAG,EAAE,QAAQ,CAAC,OAAO,CAAC,UAAU;YACzD,IAAI,cAAc,QAAQ,CAAC,OAAO,OAAO,IAAI,SAAS,aAAa;gBAAE,QAAQ;YAAI;YACjF,KAAK,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO,IAAI,EAAE,CAAE,IAAI,OAAO,SAAS,EAAE;gBACrE,MAAM,WAAW,MAAM,OAAO,SAAS,CAAC,KAAK;gBAC7C,IAAI,YAAY,cAAc,UAAU,OAAO,SAAS,QAAQ;gBAChE,IAAI,YAAY,aAAa,UAAU;oBACtC,MAAM,sBAAsB,MAAM,mBAAmB,SAAS,OAAO,EAAE;oBACvE,IAAI,qBAAqB,OAAO;oBAChC,OAAO,SAAS,OAAO;gBACxB;YACD;YACA,OAAO,mBAAmB,KAAK;QAChC;QACA,MAAM,YAAW,GAAG;YACnB,KAAK,MAAM,UAAU,IAAI,OAAO,CAAC,OAAO,IAAI,EAAE,CAAE,IAAI,OAAO,UAAU,EAAE;gBACtE,MAAM,WAAW,MAAM,OAAO,UAAU,CAAC,KAAK;gBAC9C,IAAI,UAAU,OAAO,SAAS,QAAQ;YACvC;YACA,OAAO;QACR;QACA,SAAQ,CAAC;YACR,IAAI,aAAa,6JAAQ,IAAI,EAAE,MAAM,KAAK,SAAS;YACnD,IAAI,QAAQ,UAAU,EAAE,OAAO,MAAM;YACrC,IAAI,QAAQ,UAAU,EAAE,SAAS;gBAChC,QAAQ,UAAU,CAAC,OAAO,CAAC,GAAG;gBAC9B;YACD;YACA,MAAM,cAAc,QAAQ,MAAM,EAAE;YACpC,MAAM,MAAM,gBAAgB,WAAW,gBAAgB,UAAU,gBAAgB,UAAU,+MAAM,GAAG,KAAK;YACzG,IAAI,QAAQ,MAAM,EAAE,aAAa,MAAM;gBACtC,IAAI,KAAK,OAAO,MAAM,YAAY,aAAa,KAAK,OAAO,EAAE,OAAO,KAAK,UAAU;oBAClF,IAAI,EAAE,OAAO,CAAC,QAAQ,CAAC,gBAAgB,EAAE,OAAO,CAAC,QAAQ,CAAC,aAAa,EAAE,OAAO,CAAC,QAAQ,CAAC,eAAe,EAAE,OAAO,CAAC,QAAQ,CAAC,YAAY,EAAE,OAAO,CAAC,QAAQ,CAAC,mBAAmB;wBAC7K,IAAI,MAAM,EAAE,MAAM,EAAE,OAAO;wBAC3B;oBACD;gBACD;gBACA,IAAI,aAAa,6JAAQ,EAAE;oBAC1B,IAAI,EAAE,MAAM,KAAK,yBAAyB,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE;oBACrE,KAAK,MAAM,EAAE,OAAO;gBACrB,OAAO,IAAI,MAAM,EAAE,MAAM,KAAK,OAAO,MAAM,YAAY,UAAU,IAAI,EAAE,IAAI,GAAG,IAAI;YACnF;QACD;IACD;AACD","ignoreList":[0]}}]
}