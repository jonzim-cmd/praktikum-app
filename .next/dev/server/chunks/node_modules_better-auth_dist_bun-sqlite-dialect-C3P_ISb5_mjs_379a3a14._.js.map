{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jz/Projekte/Schule/praktikum-app/node_modules/better-auth/dist/bun-sqlite-dialect-C3P_ISb5.mjs"],"sourcesContent":["import { CompiledQuery, DEFAULT_MIGRATION_LOCK_TABLE, DEFAULT_MIGRATION_TABLE, DefaultQueryCompiler, sql } from \"kysely\";\n\n//#region src/adapters/kysely-adapter/bun-sqlite-dialect.ts\nvar BunSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar BunSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new BunSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar BunSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst stmt = this.#db.prepare(sql$1);\n\t\treturn Promise.resolve({ rows: stmt.all(parameters) });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar BunSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom(sql`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar BunSqliteQueryCompiler = class extends DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar BunSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new BunSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new BunSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new BunSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new BunSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\nexport { BunSqliteDialect };"],"names":[],"mappings":"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","ignoreList":[0]}}]
}